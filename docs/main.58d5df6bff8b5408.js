"use strict";var Y9=Object.defineProperty,Z9=Object.defineProperties,Q9=Object.getOwnPropertyDescriptors,E$=Object.getOwnPropertySymbols,J9=Object.prototype.hasOwnProperty,X9=Object.prototype.propertyIsEnumerable,C$=(ze,ue,M)=>ue in ze?Y9(ze,ue,{enumerable:!0,configurable:!0,writable:!0,value:M}):ze[ue]=M,D$=(ze,ue)=>{for(var M in ue||(ue={}))J9.call(ue,M)&&C$(ze,M,ue[M]);if(E$)for(var M of E$(ue))X9.call(ue,M)&&C$(ze,M,ue[M]);return ze},T$=(ze,ue)=>Z9(ze,Q9(ue));(self.webpackChunkmovies_website_angular=self.webpackChunkmovies_website_angular||[]).push([[179],{4093:(ze,ue,M)=>{M.d(ue,{hO:()=>ee});var d=M(1223),K=M(2090),$=M(4859),te=M(9681),X=M(1877);class ye{constructor(Fe,Ve){this._delegate=Fe,this.firebase=Ve,(0,te._addComponent)(Fe,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this._delegate.automaticDataCollectionEnabled=Fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Fe=>{this._delegate.checkDestroyed(),Fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,te.deleteApp)(this._delegate)))}_getService(Fe,Ve=te._DEFAULT_ENTRY_NAME){var He;this._delegate.checkDestroyed();const gt=this._delegate.container.getProvider(Fe);return!gt.isInitialized()&&"EXPLICIT"===(null===(He=gt.getComponent())||void 0===He?void 0:He.instantiationMode)&&gt.initialize(),gt.getImmediate({identifier:Ve})}_removeServiceInstance(Fe,Ve=te._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Fe).clearInstance(Ve)}_addComponent(Fe){(0,te._addComponent)(this._delegate,Fe)}_addOrOverwriteComponent(Fe){(0,te._addOrOverwriteComponent)(this._delegate,Fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new K.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),F=function L(){const ve=function le(ve){const Fe={},Ve={__esModule:!0,initializeApp:function Ut(bt,Ht={}){const kt=te.initializeApp(bt,Ht);if((0,K.r3)(Fe,kt.name))return Fe[kt.name];const lt=new ve(kt,Ve);return Fe[kt.name]=lt,lt},app:gt,registerVersion:te.registerVersion,setLogLevel:te.setLogLevel,onLog:te.onLog,apps:null,SDK_VERSION:te.SDK_VERSION,INTERNAL:{registerComponent:function jt(bt){const Ht=bt.name,kt=Ht.replace("-compat","");if(te._registerComponent(bt)&&"PUBLIC"===bt.type){const lt=(Sn=gt())=>{if("function"!=typeof Sn[kt])throw pe.create("invalid-app-argument",{appName:Ht});return Sn[kt]()};void 0!==bt.serviceProps&&(0,K.ZB)(lt,bt.serviceProps),Ve[kt]=lt,ve.prototype[kt]=function(...Sn){return this._getService.bind(this,Ht).apply(this,bt.multipleInstances?Sn:[])}}return"PUBLIC"===bt.type?Ve[kt]:null},removeApp:function He(bt){delete Fe[bt]},useAsService:function fn(bt,Ht){return"serverAuth"===Ht?null:Ht},modularAPIs:te}};function gt(bt){if(!(0,K.r3)(Fe,bt=bt||te._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:bt});return Fe[bt]}return Ve.default=Ve,Object.defineProperty(Ve,"apps",{get:function Dt(){return Object.keys(Fe).map(bt=>Fe[bt])}}),gt.App=ve,Ve}(ye);return ve.INTERNAL=Object.assign(Object.assign({},ve.INTERNAL),{createFirebaseNamespace:L,extendNamespace:function Fe(Ve){(0,K.ZB)(ve,Ve)},createSubscribe:K.ne,ErrorFactory:K.LL,deepExtend:K.ZB}),ve}(),de=new X.Yd("@firebase/app-compat");if((0,K.jU)()&&void 0!==self.firebase){de.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ve=self.firebase.SDK_VERSION;ve&&ve.indexOf("LITE")>=0&&de.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=F;!function Me(ve){(0,te.registerVersion)("@firebase/app-compat","0.1.26",ve)}(),We.registerVersion("firebase","9.8.2","app-compat");var at=M(5813);ze=M.hmd(ze);class Ne{constructor(Fe){return Fe}}const De=new d.OlP("angularfire2.app.options"),vt=new d.OlP("angularfire2.app.name"),H={provide:Ne,useFactory:function Z(ve,Fe,Ve){const gt="object"==typeof Ve&&Ve||{};gt.name=gt.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const Dt=We.apps.filter(jt=>jt&&jt.name===gt.name)[0]||Fe.runOutsideAngular(()=>We.initializeApp(ve,gt));try{JSON.stringify(ve)!==JSON.stringify(Dt.options)&&((ve,...Fe)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[ve](...Fe)})("error",`${Dt.name} Firebase App already initialized with different options${ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(jt){}return new Ne(Dt)},deps:[De,d.R0b,[new d.FiY,vt]]};let ee=(()=>{class ve{constructor(Ve){We.registerVersion("angularfire",at.q4.full,"core"),We.registerVersion("angularfire",at.q4.full,"app-compat"),We.registerVersion("angular",d.q4F.full,Ve.toString())}static initializeApp(Ve,He){return{ngModule:ve,providers:[{provide:De,useValue:Ve},{provide:vt,useValue:He}]}}}return ve.\u0275fac=function(Ve){return new(Ve||ve)(d.LFG(d.Lbi))},ve.\u0275mod=d.oAB({type:ve}),ve.\u0275inj=d.cJS({providers:[H]}),ve})();globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ze,ue,M)=>{M.d(ue,{q4:()=>ob,HU:()=>vm,vb:()=>cf,JM:()=>ds,u3:()=>Pl});var d=M(1223),K=M(5867),$=M(5861),te=M(9681),X=M(2090),ye=M(4859),oe=M(1877),pe=M(8766);const le="@firebase/installations",L="0.5.9",de=`w:${L}`,je="FIS_v2",at=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Mt(w){return w instanceof X.ZR&&w.code.includes("request-failed")}function fe({projectId:w}){return`https://firebaseinstallations.googleapis.com/v1/projects/${w}/installations`}function Ie(w){return{token:w.token,requestStatus:2,expiresIn:ee(w.expiresIn),creationTime:Date.now()}}function Ne(w,C){return De.apply(this,arguments)}function De(){return(De=(0,$.Z)(function*(w,C){const x=(yield C.json()).error;return at.create("request-failed",{requestName:w,serverCode:x.code,serverMessage:x.message,serverStatus:x.status})})).apply(this,arguments)}function vt({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function Z(w,{refreshToken:C}){const S=vt(w);return S.append("Authorization",function J(w){return`${je} ${w}`}(C)),S}function me(w){return H.apply(this,arguments)}function H(){return(H=(0,$.Z)(function*(w){const C=yield w();return C.status>=500&&C.status<600?w():C})).apply(this,arguments)}function ee(w){return Number(w.replace("s","000"))}function ie(w,C){return Y.apply(this,arguments)}function Y(){return(Y=(0,$.Z)(function*({appConfig:w,heartbeatServiceProvider:C},{fid:S}){const x=fe(w),q=vt(w),Q=C.getImmediate({optional:!0});if(Q){const ct=yield Q.getHeartbeatsHeader();ct&&q.append("x-firebase-client",ct)}const Ge={method:"POST",headers:q,body:JSON.stringify({fid:S,authVersion:je,appId:w.appId,sdkVersion:de})},dt=yield me(()=>fetch(x,Ge));if(dt.ok){const ct=yield dt.json();return{fid:ct.fid||S,registrationStatus:2,refreshToken:ct.refreshToken,authToken:Ie(ct.authToken)}}throw yield Ne("Create Installation",dt)})).apply(this,arguments)}function Te(w){return new Promise(C=>{setTimeout(C,w)})}const Fe=/^[cdef][\w-]{21}$/;function He(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const S=function gt(w){return function ve(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return Fe.test(S)?S:""}catch(w){return""}}function Ut(w){return`${w.appName}!${w.appId}`}const Dt=new Map;function jt(w,C){const S=Ut(w);Ht(S,C),function kt(w,C){const S=function Sn(){return!lt&&"BroadcastChannel"in self&&(lt=new BroadcastChannel("[Firebase] FID Change"),lt.onmessage=w=>{Ht(w.data.key,w.data.fid)}),lt}();S&&S.postMessage({key:w,fid:C}),function Ea(){0===Dt.size&&lt&&(lt.close(),lt=null)}()}(S,C)}function Ht(w,C){const S=Dt.get(w);if(S)for(const x of S)x(C)}let lt=null;const Di="firebase-installations-store";let $i=null;function os(){return $i||($i=(0,pe.X3)("firebase-installations-database",1,{upgrade:(w,C)=>{0===C&&w.createObjectStore(Di)}})),$i}function as(w,C){return bn.apply(this,arguments)}function bn(){return(bn=(0,$.Z)(function*(w,C){const S=Ut(w),q=(yield os()).transaction(Di,"readwrite"),Q=q.objectStore(Di),be=yield Q.get(S);return yield Q.put(C,S),yield q.done,(!be||be.fid!==C.fid)&&jt(w,C.fid),C})).apply(this,arguments)}function Ti(w){return ao.apply(this,arguments)}function ao(){return(ao=(0,$.Z)(function*(w){const C=Ut(w),x=(yield os()).transaction(Di,"readwrite");yield x.objectStore(Di).delete(C),yield x.done})).apply(this,arguments)}function hr(w,C){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,$.Z)(function*(w,C){const S=Ut(w),q=(yield os()).transaction(Di,"readwrite"),Q=q.objectStore(Di),be=yield Q.get(S),Ge=C(be);return void 0===Ge?yield Q.delete(S):yield Q.put(Ge,S),yield q.done,Ge&&(!be||be.fid!==Ge.fid)&&jt(w,Ge.fid),Ge})).apply(this,arguments)}function Ii(w){return ci.apply(this,arguments)}function ci(){return(ci=(0,$.Z)(function*(w){let C;const S=yield hr(w.appConfig,x=>{const q=it(x),Q=tn(w,q);return C=Q.registrationPromise,Q.installationEntry});return""===S.fid?{installationEntry:yield C}:{installationEntry:S,registrationPromise:C}})).apply(this,arguments)}function it(w){return Un(w||{fid:He(),registrationStatus:0})}function tn(w,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(at.create("app-offline"))};const S={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},x=function Xe(w,C){return et.apply(this,arguments)}(w,S);return{installationEntry:S,registrationPromise:x}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:As(w)}:{installationEntry:C}}function et(){return(et=(0,$.Z)(function*(w,C){try{const S=yield ie(w,C);return as(w.appConfig,S)}catch(S){throw Mt(S)&&409===S.customData.serverCode?yield Ti(w.appConfig):yield as(w.appConfig,{fid:C.fid,registrationStatus:0}),S}})).apply(this,arguments)}function As(w){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,$.Z)(function*(w){let C=yield wn(w.appConfig);for(;1===C.registrationStatus;)yield Te(100),C=yield wn(w.appConfig);if(0===C.registrationStatus){const{installationEntry:S,registrationPromise:x}=yield Ii(w);return x||S}return C})).apply(this,arguments)}function wn(w){return hr(w,C=>{if(!C)throw at.create("installation-not-found");return Un(C)})}function Un(w){return function Dr(w){return 1===w.registrationStatus&&w.registrationTime+1e4<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function Ca(w,C){return k.apply(this,arguments)}function k(){return(k=(0,$.Z)(function*({appConfig:w,heartbeatServiceProvider:C},S){const x=V(w,S),q=Z(w,S),Q=C.getImmediate({optional:!0});if(Q){const ct=yield Q.getHeartbeatsHeader();ct&&q.append("x-firebase-client",ct)}const Ge={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:de,appId:w.appId}})},dt=yield me(()=>fetch(x,Ge));if(dt.ok)return Ie(yield dt.json());throw yield Ne("Generate Auth Token",dt)})).apply(this,arguments)}function V(w,{fid:C}){return`${fe(w)}/${C}/authTokens:generate`}function U(w){return he.apply(this,arguments)}function he(){return(he=(0,$.Z)(function*(w,C=!1){let S;const x=yield hr(w.appConfig,Q=>{if(!$e(Q))throw at.create("not-registered");const be=Q.authToken;if(!C&&Yt(be))return Q;if(1===be.requestStatus)return S=P(w,C),Q;{if(!navigator.onLine)throw at.create("app-offline");const Ge=Ur(Q);return S=qe(w,Ge),Ge}});return S?yield S:x.authToken})).apply(this,arguments)}function P(w,C){return j.apply(this,arguments)}function j(){return(j=(0,$.Z)(function*(w,C){let S=yield Ee(w.appConfig);for(;1===S.authToken.requestStatus;)yield Te(100),S=yield Ee(w.appConfig);const x=S.authToken;return 0===x.requestStatus?U(w,C):x})).apply(this,arguments)}function Ee(w){return hr(w,C=>{if(!$e(C))throw at.create("not-registered");return function Ms(w){return 1===w.requestStatus&&w.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function qe(w,C){return ot.apply(this,arguments)}function ot(){return(ot=(0,$.Z)(function*(w,C){try{const S=yield Ca(w,C),x=Object.assign(Object.assign({},C),{authToken:S});return yield as(w.appConfig,x),S}catch(S){if(!Mt(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const x=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield as(w.appConfig,x)}else yield Ti(w.appConfig);throw S}})).apply(this,arguments)}function $e(w){return void 0!==w&&2===w.registrationStatus}function Yt(w){return 2===w.requestStatus&&!function mt(w){const C=Date.now();return C<w.creationTime||w.creationTime+w.expiresIn<C+36e5}(w)}function Ur(w){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:C})}function lo(){return(lo=(0,$.Z)(function*(w){const C=w,{installationEntry:S,registrationPromise:x}=yield Ii(C);return x?x.catch(console.error):U(C).catch(console.error),S.fid})).apply(this,arguments)}function Da(){return(Da=(0,$.Z)(function*(w,C=!1){const S=w;return yield xh(S),(yield U(S,C)).token})).apply(this,arguments)}function xh(w){return ml.apply(this,arguments)}function ml(){return(ml=(0,$.Z)(function*(w){const{registrationPromise:C}=yield Ii(w);C&&(yield C)})).apply(this,arguments)}function ui(w){return at.create("missing-app-config-values",{valueName:w})}const xs="installations",yl=w=>{const C=w.getProvider("app").getImmediate(),S=function er(w){if(!w||!w.options)throw ui("App Configuration");if(!w.name)throw ui("App Name");const C=["projectId","apiKey","appId"];for(const S of C)if(!w.options[S])throw ui(S);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(C);return{app:C,appConfig:S,heartbeatServiceProvider:(0,te._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Ta=w=>{const C=w.getProvider("app").getImmediate(),S=(0,te._getProvider)(C,xs).getImmediate();return{getId:()=>function Si(w){return lo.apply(this,arguments)}(S),getToken:q=>function Yg(w){return Da.apply(this,arguments)}(S,q)}};(function Ia(){(0,te._registerComponent)(new ye.wA(xs,yl,"PUBLIC")),(0,te._registerComponent)(new ye.wA("installations-internal",Ta,"PRIVATE"))})(),(0,te.registerVersion)(le,L),(0,te.registerVersion)(le,L,"esm2017");const Bo="@firebase/remote-config",Ae=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Uo{constructor(C,S,x,q){this.client=C,this.storage=S,this.storageCache=x,this.logger=q}isCachedDataFresh(C,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const x=Date.now()-S,q=x<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${x}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${q}.`),q}fetch(C){var S=this;return(0,$.Z)(function*(){const[x,q]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(q&&S.isCachedDataFresh(C.cacheMaxAgeMillis,x))return q;C.eTag=q&&q.eTag;const Q=yield S.client.fetch(C),be=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Q.status&&be.push(S.storage.setLastSuccessfulFetchResponse(Q)),yield Promise.all(be),Q})()}}function U0(w=navigator){return w.languages&&w.languages[0]||w.language}class Nn{constructor(C,S,x,q,Q,be){this.firebaseInstallations=C,this.sdkVersion=S,this.namespace=x,this.projectId=q,this.apiKey=Q,this.appId=be}fetch(C){var S=this;return(0,$.Z)(function*(){const[x,q]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),be=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,Ge={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},dt={sdk_version:S.sdkVersion,app_instance_id:x,app_instance_id_token:q,app_id:S.appId,language_code:U0()},ct={method:"POST",headers:Ge,body:JSON.stringify(dt)},Bt=fetch(be,ct),pt=new Promise((hs,Qr)=>{C.signal.addEventListener(()=>{const $n=new Error("The operation was aborted.");$n.name="AbortError",Qr($n)})});let Zr;try{yield Promise.race([Bt,pt]),Zr=yield Bt}catch(hs){let Qr="fetch-client-network";throw"AbortError"===hs.name&&(Qr="fetch-timeout"),Ae.create(Qr,{originalErrorMessage:hs.message})}let un=Zr.status;const Us=Zr.headers.get("ETag")||void 0;let Fl,mn;if(200===Zr.status){let hs;try{hs=yield Zr.json()}catch(Qr){throw Ae.create("fetch-client-parse",{originalErrorMessage:Qr.message})}Fl=hs.entries,mn=hs.state}if("INSTANCE_STATE_UNSPECIFIED"===mn?un=500:"NO_CHANGE"===mn?un=304:("NO_TEMPLATE"===mn||"EMPTY_CONFIG"===mn)&&(Fl={}),304!==un&&200!==un)throw Ae.create("fetch-status",{httpStatus:un});return{status:un,eTag:Us,config:Fl}})()}}class El{constructor(C,S){this.client=C,this.storage=S}fetch(C){var S=this;return(0,$.Z)(function*(){const x=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(C,x)})()}attemptFetch(C,{throttleEndTimeMillis:S,backoffCount:x}){var q=this;return(0,$.Z)(function*(){yield function Ni(w,C){return new Promise((S,x)=>{const q=Math.max(C-Date.now(),0),Q=setTimeout(S,q);w.addEventListener(()=>{clearTimeout(Q),x(Ae.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,S);try{const Q=yield q.client.fetch(C);return yield q.storage.deleteThrottleMetadata(),Q}catch(Q){if(!function zc(w){if(!(w instanceof X.ZR&&w.customData))return!1;const C=Number(w.customData.httpStatus);return 429===C||500===C||503===C||504===C}(Q))throw Q;const be={throttleEndTimeMillis:Date.now()+(0,X.$s)(x),backoffCount:x+1};return yield q.storage.setThrottleMetadata(be),q.attemptFetch(C,be)}})()}}class Zg{constructor(C,S,x,q,Q){this.app=C,this._client=S,this._storageCache=x,this._storage=q,this._logger=Q,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qc(w,C){const S=w.target.error||void 0;return Ae.create(C,{originalErrorMessage:S&&S.message})}const ho="app_namespace_store";class G0{constructor(C,S,x,q=function Jg(){return new Promise((w,C)=>{try{const S=indexedDB.open("firebase_remote_config",1);S.onerror=x=>{C(qc(x,"storage-open"))},S.onsuccess=x=>{w(x.target.result)},S.onupgradeneeded=x=>{0===x.oldVersion&&x.target.result.createObjectStore(ho,{keyPath:"compositeKey"})}}catch(S){C(Ae.create("storage-open",{originalErrorMessage:S}))}})}()){this.appId=C,this.appName=S,this.namespace=x,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var S=this;return(0,$.Z)(function*(){const x=yield S.openDbPromise;return new Promise((q,Q)=>{const Ge=x.transaction([ho],"readonly").objectStore(ho),dt=S.createCompositeKey(C);try{const ct=Ge.get(dt);ct.onerror=Bt=>{Q(qc(Bt,"storage-get"))},ct.onsuccess=Bt=>{const pt=Bt.target.result;q(pt?pt.value:void 0)}}catch(ct){Q(Ae.create("storage-get",{originalErrorMessage:ct&&ct.message}))}})})()}set(C,S){var x=this;return(0,$.Z)(function*(){const q=yield x.openDbPromise;return new Promise((Q,be)=>{const dt=q.transaction([ho],"readwrite").objectStore(ho),ct=x.createCompositeKey(C);try{const Bt=dt.put({compositeKey:ct,value:S});Bt.onerror=pt=>{be(qc(pt,"storage-set"))},Bt.onsuccess=()=>{Q()}}catch(Bt){be(Ae.create("storage-set",{originalErrorMessage:Bt&&Bt.message}))}})})()}delete(C){var S=this;return(0,$.Z)(function*(){const x=yield S.openDbPromise;return new Promise((q,Q)=>{const Ge=x.transaction([ho],"readwrite").objectStore(ho),dt=S.createCompositeKey(C);try{const ct=Ge.delete(dt);ct.onerror=Bt=>{Q(qc(Bt,"storage-delete"))},ct.onsuccess=()=>{q()}}catch(ct){Q(Ae.create("storage-delete",{originalErrorMessage:ct&&ct.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class H0{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,$.Z)(function*(){const S=C.storage.getLastFetchStatus(),x=C.storage.getLastSuccessfulFetchTimestampMillis(),q=C.storage.getActiveConfig(),Q=yield S;Q&&(C.lastFetchStatus=Q);const be=yield x;be&&(C.lastSuccessfulFetchTimestampMillis=be);const Ge=yield q;Ge&&(C.activeConfig=Ge)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function W0(){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,$.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(w){return!1}})).apply(this,arguments)}!function $0(){(0,te._registerComponent)(new ye.wA("remote-config",function w(C,{instanceIdentifier:S}){const x=C.getProvider("app").getImmediate(),q=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ae.create("registration-window");if(!(0,X.hl)())throw Ae.create("indexed-db-unavailable");const{projectId:Q,apiKey:be,appId:Ge}=x.options;if(!Q)throw Ae.create("registration-project-id");if(!be)throw Ae.create("registration-api-key");if(!Ge)throw Ae.create("registration-app-id");const dt=new G0(Ge,x.name,S=S||"firebase"),ct=new H0(dt),Bt=new oe.Yd(Bo);Bt.logLevel=oe.in.ERROR;const pt=new Nn(q,te.SDK_VERSION,S,Q,be,Ge),Zr=new El(pt,dt),un=new Uo(Zr,dt,ct,Bt),Us=new Zg(x,un,ct,dt,Bt);return function Et(w){const C=(0,X.m9)(w);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Us),Us},"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(Bo,"0.3.8"),(0,te.registerVersion)(Bo,"0.3.8","esm2017")}();const z0="/firebase-messaging-sw.js",q0="/firebase-cloud-messaging-push-scope",Xg="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Yc="google.c.a.c_id",Ph="google.c.a.c_l",Fh="google.c.a.ts",$r="google.c.a.e";var Aa=(()=>{return(w=Aa||(Aa={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",Aa;var w})();function fr(w){const C=new Uint8Array(w);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function em(w){const S=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),x=atob(S),q=new Uint8Array(x.length);for(let Q=0;Q<x.length;++Q)q[Q]=x.charCodeAt(Q);return q}const Ma="fcm_token_details_db",nm="fcm_token_object_Store";function Y0(w){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,$.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Q=>Q.name).includes(Ma))return null;let C=null;return(yield(0,pe.X3)(Ma,5,{upgrade:(x=(0,$.Z)(function*(q,Q,be,Ge){var dt;if(Q<2||!q.objectStoreNames.contains(nm))return;const ct=Ge.objectStore(nm),Bt=yield ct.index("fcmSenderId").get(w);if(yield ct.clear(),Bt)if(2===Q){const pt=Bt;if(!pt.auth||!pt.p256dh||!pt.endpoint)return;C={token:pt.fcmToken,createTime:null!==(dt=pt.createTime)&&void 0!==dt?dt:Date.now(),subscriptionOptions:{auth:pt.auth,p256dh:pt.p256dh,endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:"string"==typeof pt.vapidKey?pt.vapidKey:fr(pt.vapidKey)}}}else if(3===Q){const pt=Bt;C={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:fr(pt.auth),p256dh:fr(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:fr(pt.vapidKey)}}}else if(4===Q){const pt=Bt;C={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:fr(pt.auth),p256dh:fr(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:fr(pt.vapidKey)}}}}),function(Q,be,Ge,dt){return x.apply(this,arguments)})})).close(),yield(0,pe.Lj)(Ma),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),Lh(C)?C:null;var x}),Zc.apply(this,arguments)}function Lh(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:C}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const fo="firebase-messaging-store";let Wr=null;function jo(){return Wr||(Wr=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(w,C)=>{0===C&&w.createObjectStore(fo)}})),Wr}function Vh(w){return po.apply(this,arguments)}function po(){return(po=(0,$.Z)(function*(w){const C=Ho(w),x=yield(yield jo()).transaction(fo).objectStore(fo).get(C);if(x)return x;{const q=yield Y0(w.appConfig.senderId);if(q)return yield go(w,q),q}})).apply(this,arguments)}function go(w,C){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,$.Z)(function*(w,C){const S=Ho(w),q=(yield jo()).transaction(fo,"readwrite");return yield q.objectStore(fo).put(C,S),yield q.done,C})).apply(this,arguments)}function Go(w){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,$.Z)(function*(w){const C=Ho(w),x=(yield jo()).transaction(fo,"readwrite");yield x.objectStore(fo).delete(C),yield x.done})).apply(this,arguments)}function Ho({appConfig:w}){return w.appId}const It=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Tl(w,C){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,$.Z)(function*(w,C){const S=yield Il(w),x=ls(C),q={method:"POST",headers:S,body:JSON.stringify(x)};let Q;try{Q=yield(yield fetch(Hn(w.appConfig),q)).json()}catch(be){throw It.create("token-subscribe-failed",{errorInfo:be})}if(Q.error)throw It.create("token-subscribe-failed",{errorInfo:Q.error.message});if(!Q.token)throw It.create("token-subscribe-no-token");return Q.token})).apply(this,arguments)}function ln(w,C){return $o.apply(this,arguments)}function $o(){return($o=(0,$.Z)(function*(w,C){const S=yield Il(w),x=ls(C.subscriptionOptions),q={method:"PATCH",headers:S,body:JSON.stringify(x)};let Q;try{Q=yield(yield fetch(`${Hn(w.appConfig)}/${C.token}`,q)).json()}catch(be){throw It.create("token-update-failed",{errorInfo:be})}if(Q.error)throw It.create("token-update-failed",{errorInfo:Q.error.message});if(!Q.token)throw It.create("token-update-no-token");return Q.token})).apply(this,arguments)}function Bh(w,C){return mo.apply(this,arguments)}function mo(){return(mo=(0,$.Z)(function*(w,C){const x={method:"DELETE",headers:yield Il(w)};try{const Q=yield(yield fetch(`${Hn(w.appConfig)}/${C}`,x)).json();if(Q.error)throw It.create("token-unsubscribe-failed",{errorInfo:Q.error.message})}catch(q){throw It.create("token-unsubscribe-failed",{errorInfo:q})}})).apply(this,arguments)}function Hn({projectId:w}){return`https://fcmregistrations.googleapis.com/v1/projects/${w}/registrations`}function Il(w){return _o.apply(this,arguments)}function _o(){return(_o=(0,$.Z)(function*({appConfig:w,installations:C}){const S=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function ls({p256dh:w,auth:C,endpoint:S,vapidKey:x}){const q={web:{endpoint:S,auth:C,p256dh:w}};return x!==Xg&&(q.web.applicationPubKey=x),q}const Tr=6048e5;function eu(w){return xa.apply(this,arguments)}function xa(){return(xa=(0,$.Z)(function*(w){const C=yield Gh(w.swRegistration,w.vapidKey),S={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:C.endpoint,auth:fr(C.getKey("auth")),p256dh:fr(C.getKey("p256dh"))},x=yield Vh(w.firebaseDependencies);if(x){if(im(x.subscriptionOptions,S))return Date.now()>=x.createTime+Tr?jh(w,{token:x.token,createTime:Date.now(),subscriptionOptions:S}):x.token;try{yield Bh(w.firebaseDependencies,x.token)}catch(q){console.warn(q)}return ut(w.firebaseDependencies,S)}return ut(w.firebaseDependencies,S)})).apply(this,arguments)}function Uh(w){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,$.Z)(function*(w){const C=yield Vh(w.firebaseDependencies);C&&(yield Bh(w.firebaseDependencies,C.token),yield Go(w.firebaseDependencies));const S=yield w.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()})).apply(this,arguments)}function jh(w,C){return ks.apply(this,arguments)}function ks(){return(ks=(0,$.Z)(function*(w,C){try{const S=yield ln(w.firebaseDependencies,C),x=Object.assign(Object.assign({},C),{token:S,createTime:Date.now()});return yield go(w.firebaseDependencies,x),S}catch(S){throw yield Uh(w),S}})).apply(this,arguments)}function ut(w,C){return tu.apply(this,arguments)}function tu(){return(tu=(0,$.Z)(function*(w,C){const x={token:yield Tl(w,C),createTime:Date.now(),subscriptionOptions:C};return yield go(w,x),x.token})).apply(this,arguments)}function Gh(w,C){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,$.Z)(function*(w,C){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:em(C)})})).apply(this,arguments)}function im(w,C){return C.vapidKey===w.vapidKey&&C.endpoint===w.endpoint&&C.auth===w.auth&&C.p256dh===w.p256dh}function nu(w){const C={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function Hh(w,C){if(!C.notification)return;w.notification={};const S=C.notification.title;S&&(w.notification.title=S);const x=C.notification.body;x&&(w.notification.body=x);const q=C.notification.image;q&&(w.notification.image=q)}(C,w),function sm(w,C){!C.data||(w.data=C.data)}(C,w),function om(w,C){if(!C.fcmOptions)return;w.fcmOptions={};const S=C.fcmOptions.link;S&&(w.fcmOptions.link=S);const x=C.fcmOptions.analytics_label;x&&(w.fcmOptions.analyticsLabel=x)}(C,w),C}function ge(w){return"object"==typeof w&&!!w&&Yc in w}function xt(w,C){const S=[];for(let x=0;x<w.length;x++)S.push(w.charAt(x)),x<C.length&&S.push(C.charAt(x));return S.join("")}function pn(w){return It.create("missing-app-config-values",{valueName:w})}xt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Wh{constructor(C,S,x){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function $h(w){if(!w||!w.options)throw pn("App Configuration Object");if(!w.name)throw pn("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:S}=w;for(const x of C)if(!S[x])throw pn(x);return{appName:w.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:q,installations:S,analyticsProvider:x}}_delete(){return Promise.resolve()}}function Wo(w){return hi.apply(this,arguments)}function hi(){return(hi=(0,$.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(z0,{scope:q0}),w.swRegistration.update().catch(()=>{})}catch(C){throw It.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function ru(w,C){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,$.Z)(function*(w,C){if(!C&&!w.swRegistration&&(yield Wo(w)),C||!w.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw It.create("invalid-sw-registration");w.swRegistration=C}})).apply(this,arguments)}function Q0(w,C){return iu.apply(this,arguments)}function iu(){return(iu=(0,$.Z)(function*(w,C){C?w.vapidKey=C:w.vapidKey||(w.vapidKey=Xg)})).apply(this,arguments)}function zo(){return(zo=(0,$.Z)(function*(w,C){if(!navigator)throw It.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw It.create("permission-blocked");return yield Q0(w,null==C?void 0:C.vapidKey),yield ru(w,null==C?void 0:C.serviceWorkerRegistration),eu(w)})).apply(this,arguments)}function pr(w,C,S){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,$.Z)(function*(w,C,S){const x=zh(C);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(x,{message_id:S[Yc],message_name:S[Ph],message_time:S[Fh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function zh(w){switch(w){case Aa.NOTIFICATION_CLICKED:return"notification_open";case Aa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Qi(){return(Qi=(0,$.Z)(function*(w,C){const S=C.data;if(!S.isFirebaseMessaging)return;w.onMessageHandler&&S.messageType===Aa.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(nu(S)):w.onMessageHandler.next(nu(S)));const x=S.data;ge(x)&&"1"===x[$r]&&(yield pr(w,S.messageType,x))})).apply(this,arguments)}const qh="@firebase/messaging",lm=w=>{const C=new Wh(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function ka(w,C){return Qi.apply(this,arguments)}(C,S)),C},J0=w=>{const C=w.getProvider("messaging").getImmediate();return{getToken:x=>function am(w,C){return zo.apply(this,arguments)}(C,x)}};function Pa(){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,$.Z)(function*(){try{yield(0,X.eu)()}catch(w){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Kh(){(0,te._registerComponent)(new ye.wA("messaging",lm,"PUBLIC")),(0,te._registerComponent)(new ye.wA("messaging-internal",J0,"PRIVATE")),(0,te.registerVersion)(qh,"0.9.13"),(0,te.registerVersion)(qh,"0.9.13","esm2017")}();const qo="analytics",um="firebase_id",yo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",cn="https://www.googletagmanager.com/gtag/js",rr=new oe.Yd("@firebase/analytics");function dm(w){return Promise.all(w.map(C=>C.catch(S=>S)))}function nb(w,C){const S=document.createElement("script");S.src=`${cn}?l=${w}&id=${C}`,S.async=!0,document.head.appendChild(S)}function ib(w,C,S,x,q,Q){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,$.Z)(function*(w,C,S,x,q,Q){const be=x[q];try{if(be)yield C[be];else{const dt=(yield dm(S)).find(ct=>ct.measurementId===q);dt&&(yield C[dt.appId])}}catch(Ge){rr.error(Ge)}w("config",q,Q)})).apply(this,arguments)}function cu(w,C,S,x,q){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,$.Z)(function*(w,C,S,x,q){try{let Q=[];if(q&&q.send_to){let be=q.send_to;Array.isArray(be)||(be=[be]);const Ge=yield dm(S);for(const dt of be){const ct=Ge.find(pt=>pt.measurementId===dt),Bt=ct&&C[ct.appId];if(!Bt){Q=[];break}Q.push(Bt)}}0===Q.length&&(Q=Object.values(C)),yield Promise.all(Q),w("event",x,q||{})}catch(Q){rr.error(Q)}})).apply(this,arguments)}function Sr(){const w=window.document.getElementsByTagName("script");for(const C of Object.values(w))if(C.src&&C.src.includes(cn))return C;return null}const Zt=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),gr=new class Pn{constructor(C={},S=1e3){this.throttleMetadata=C,this.intervalMillis=S}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,S){this.throttleMetadata[C]=S}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Mn(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function hm(w){return xi.apply(this,arguments)}function xi(){return(xi=(0,$.Z)(function*(w){var C;const{appId:S,apiKey:x}=w,q={method:"GET",headers:Mn(x)},Q=yo.replace("{app-id}",S),be=yield fetch(Q,q);if(200!==be.status&&304!==be.status){let Ge="";try{const dt=yield be.json();(null===(C=dt.error)||void 0===C?void 0:C.message)&&(Ge=dt.error.message)}catch(dt){}throw Zt.create("config-fetch-failed",{httpStatus:be.status,responseMessage:Ge})}return be.json()})).apply(this,arguments)}function At(w){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,$.Z)(function*(w,C=gr,S){const{appId:x,apiKey:q,measurementId:Q}=w.options;if(!x)throw Zt.create("no-app-id");if(!q){if(Q)return{measurementId:Q,appId:x};throw Zt.create("no-api-key")}const be=C.getThrottleMetadata(x)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new Jh;return setTimeout((0,$.Z)(function*(){Ge.abort()}),void 0!==S?S:6e4),La({appId:x,apiKey:q,measurementId:Q},be,Ge,C)})).apply(this,arguments)}function La(w,C,S){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,$.Z)(function*(w,{throttleEndTimeMillis:C,backoffCount:S},x,q=gr){const{appId:Q,measurementId:be}=w;try{yield uu(x,C)}catch(Ge){if(be)return rr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${be} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:Q,measurementId:be};throw Ge}try{const Ge=yield hm(w);return q.deleteThrottleMetadata(Q),Ge}catch(Ge){if(!Ml(Ge)){if(q.deleteThrottleMetadata(Q),be)return rr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${be} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:Q,measurementId:be};throw Ge}const dt=503===Number(Ge.customData.httpStatus)?(0,X.$s)(S,q.intervalMillis,30):(0,X.$s)(S,q.intervalMillis),ct={throttleEndTimeMillis:Date.now()+dt,backoffCount:S+1};return q.setThrottleMetadata(Q,ct),rr.debug(`Calling attemptFetch again in ${dt} millis`),La(w,ct,x,q)}})).apply(this,arguments)}function uu(w,C){return new Promise((S,x)=>{const q=Math.max(C-Date.now(),0),Q=setTimeout(S,q);w.addEventListener(()=>{clearTimeout(Q),x(Zt.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Ml(w){if(!(w instanceof X.ZR&&w.customData))return!1;const C=Number(w.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Jh{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function ir(){return cs.apply(this,arguments)}function cs(){return(cs=(0,$.Z)(function*(){if(!(0,X.hl)())return rr.warn(Zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(w){return rr.warn(Zt.create("indexeddb-unavailable",{errorInfo:w}).message),!1}return!0})).apply(this,arguments)}function Fs(){return(Fs=(0,$.Z)(function*(w,C,S,x,q,Q,be){var Ge;const dt=At(w);dt.then(un=>{S[un.measurementId]=un.appId,w.options.measurementId&&un.measurementId!==w.options.measurementId&&rr.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${un.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(un=>rr.error(un)),C.push(dt);const ct=ir().then(un=>{if(un)return x.getId()}),[Bt,pt]=yield Promise.all([dt,ct]);Sr()||nb(Q,Bt.measurementId),q("js",new Date);const Zr=null!==(Ge=null==be?void 0:be.config)&&void 0!==Ge?Ge:{};return Zr.origin="firebase",Zr.update=!0,null!=pt&&(Zr[um]=pt),q("config",Bt.measurementId,Zr),Bt.measurementId})).apply(this,arguments)}class du{constructor(C){this.app=C}_delete(){return delete zr[this.app.options.appId],Promise.resolve()}}let zr={},pm=[];const hu={};let fu,Qt,vo="dataLayer",Yo=!1;function xl(w,C,S){!function Cn(){const w=[];if((0,X.ru)()&&w.push("This is a browser extension environment."),(0,X.zI)()||w.push("Cookies are not available."),w.length>0){const C=w.map((x,q)=>`(${q+1}) ${x}`).join(" "),S=Zt.create("invalid-analytics-context",{errorInfo:C});rr.warn(S.message)}}();const x=w.options.appId;if(!x)throw Zt.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw Zt.create("no-api-key");rr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zr[x])throw Zt.create("already-exists",{id:x});if(!Yo){!function rb(w){let C=[];Array.isArray(window[w])?C=window[w]:window[w]=C}(vo);const{wrappedGtag:Q,gtagCore:be}=function Zh(w,C,S,x,q){let Q=function(...be){window[x].push(arguments)};return window[q]&&"function"==typeof window[q]&&(Q=window[q]),window[q]=function Al(w,C,S,x){function Q(){return(Q=(0,$.Z)(function*(be,Ge,dt){try{"event"===be?yield cu(w,C,S,Ge,dt):"config"===be?yield ib(w,C,S,x,Ge,dt):w("set",Ge)}catch(ct){rr.error(ct)}})).apply(this,arguments)}return function q(be,Ge,dt){return Q.apply(this,arguments)}}(Q,w,C,S),{gtagCore:Q,wrappedGtag:window[q]}}(zr,pm,hu,vo,"gtag");Qt=Q,fu=be,Yo=!0}return zr[x]=function fm(w,C,S,x,q,Q,be){return Fs.apply(this,arguments)}(w,pm,hu,C,fu,vo,S),new du(w)}function Ol(){return(Ol=(0,$.Z)(function*(w,C,S,x,q){if(q&&q.global)w("event",S,x);else{const Q=yield C;w("event",S,Object.assign(Object.assign({},x),{send_to:Q}))}})).apply(this,arguments)}function wo(){return gu.apply(this,arguments)}function gu(){return(gu=(0,$.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(w){return!1}})).apply(this,arguments)}const Yn="@firebase/analytics";!function Fn(){(0,te._registerComponent)(new ye.wA(qo,(C,{options:S})=>xl(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,te._registerComponent)(new ye.wA("analytics-internal",function w(C){try{const S=C.getProvider(qo).getImmediate();return{logEvent:(x,q,Q)=>function Qo(w,C,S,x){w=(0,X.m9)(w),function gm(w,C,S,x,q){return Ol.apply(this,arguments)}(Qt,zr[w.app.options.appId],C,S,x).catch(q=>rr.error(q))}(S,x,q,Q)}}catch(S){throw Zt.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,te.registerVersion)(Yn,"0.7.9"),(0,te.registerVersion)(Yn,"0.7.9","esm2017")}();var Nr=M(4408),on=M(640);const Vs=new class mm extends on.v{}(class Rl extends Nr.o{constructor(C,S){super(C,S),this.scheduler=C,this.work=S}schedule(C,S=0){return S>0?super.schedule(C,S):(this.delay=S,this.state=C,this.scheduler.flush(this),this)}execute(C,S){return S>0||this.closed?super.execute(C,S):this._execute(C,S)}requestAsyncId(C,S,x=0){return null!=x&&x>0||null==x&&this.delay>0?super.requestAsyncId(C,S,x):C.flush(this)}});var af=M(4986),_m=M(8306),sb=M(8505),lf=M(9468),Jo=M(5363);const ob=new d.GfV("7.4.1"),Dn="__angularfire_symbol__analyticsIsSupportedValue",Xo="__angularfire_symbol__analyticsIsSupported",Kr="__angularfire_symbol__remoteConfigIsSupportedValue",Ar="__angularfire_symbol__remoteConfigIsSupported",mu="__angularfire_symbol__messagingIsSupportedValue",mr="__angularfire_symbol__messagingIsSupported";function ds(w,C,S){if(C){if(1===C.length)return C[0];const Q=C.filter(be=>be.app===S);if(1===Q.length)return Q[0]}return S.container.getProvider(w).getImmediate({optional:!0})}globalThis[Xo]||(globalThis[Xo]=wo().then(w=>globalThis[Dn]=w).catch(()=>globalThis[Dn]=!1)),globalThis[mr]||(globalThis[mr]=Pa().then(w=>globalThis[mu]=w).catch(()=>globalThis[mu]=!1)),globalThis[Ar]||(globalThis[Ar]=W0().then(w=>globalThis[Kr]=w).catch(()=>globalThis[Kr]=!1));const cf=(w,C)=>{const S=C?[C]:(0,K.C6)(),x=[];return S.forEach(q=>{q.container.getProvider(w).instances.forEach(be=>{x.includes(be)||x.push(be)})}),x};function Tn(){}class Bs{constructor(C,S=Vs){this.zone=C,this.delegate=S}now(){return this.delegate.now()}schedule(C,S,x){const q=this.zone;return this.delegate.schedule(function(be){q.runGuarded(()=>{C.apply(this,[be])})},S,x)}}class ab{constructor(C){this.zone=C,this.task=null}call(C,S){const x=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tn,{},Tn,Tn)),S.pipe((0,sb.b)({next:x,complete:x,error:x})).subscribe(C).add(x)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vm=(()=>{class w{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new Bs(Zone.current)),this.insideAngular=S.run(()=>new Bs(Zone.current,af.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(S){return new(S||w)(d.LFG(d.R0b))},w.\u0275prov=d.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function xn(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function kl(w){return xn().ngZone.runOutsideAngular(()=>w())}function Yr(w){return xn().ngZone.run(()=>w())}function df(w){return xn(),function hf(w){return function(S){return(S=S.lift(new ab(w.ngZone))).pipe((0,lf.R)(w.outsideAngular),(0,Jo.Q)(w.insideAngular))}}(xn())(w)}const ff=(w,C)=>function(){const x=arguments;return C&&setTimeout(()=>{"scheduled"===C.state&&C.invoke()},10),Yr(()=>w.apply(void 0,x))},Pl=(w,C)=>function(){let S;const x=arguments;for(let Q=0;Q<arguments.length;Q++)"function"==typeof x[Q]&&(C&&(S||(S=Yr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tn,{},Tn,Tn)))),x[Q]=ff(x[Q],S));const q=kl(()=>w.apply(this,x));if(!C){if(q instanceof _m.y){const Q=xn();return q.pipe((0,lf.R)(Q.outsideAngular),(0,Jo.Q)(Q.insideAngular))}return Yr(()=>q)}return q instanceof _m.y?q.pipe(df):q instanceof Promise?Yr(()=>new Promise((Q,be)=>q.then(Ge=>Yr(()=>Q(Ge)),Ge=>Yr(()=>be(Ge))))):"function"==typeof q&&S?function(){return setTimeout(()=>{S&&"scheduled"===S.state&&S.invoke()},10),q.apply(this,arguments)}:Yr(()=>q)}},2090:(ze,ue,M)=>{M.d(ue,{$s:()=>wn,BH:()=>je,DV:()=>bt,GJ:()=>jt,L:()=>pe,LL:()=>Y,Mn:()=>Ne,Pz:()=>Ve,UI:()=>kt,US:()=>ye,Yr:()=>De,ZB:()=>F,ZR:()=>ie,b$:()=>Mt,cI:()=>Fe,d:()=>fe,dS:()=>it,eu:()=>me,g5:()=>$,gK:()=>hr,gQ:()=>Di,h$:()=>oe,hl:()=>Z,hu:()=>K,jU:()=>tt,m9:()=>Ca,ne:()=>$i,p$:()=>L,r3:()=>fn,ru:()=>at,tV:()=>le,uI:()=>We,ug:()=>tn,vZ:()=>lt,w1:()=>Ie,w9:()=>Dt,xO:()=>Ea,xb:()=>Ht,z$:()=>Me,zI:()=>H});const K=function(k,V){if(!k)throw $(V)},$=function(k){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+k)},te=function(k){const V=[];let U=0;for(let he=0;he<k.length;he++){let P=k.charCodeAt(he);P<128?V[U++]=P:P<2048?(V[U++]=P>>6|192,V[U++]=63&P|128):55296==(64512&P)&&he+1<k.length&&56320==(64512&k.charCodeAt(he+1))?(P=65536+((1023&P)<<10)+(1023&k.charCodeAt(++he)),V[U++]=P>>18|240,V[U++]=P>>12&63|128,V[U++]=P>>6&63|128,V[U++]=63&P|128):(V[U++]=P>>12|224,V[U++]=P>>6&63|128,V[U++]=63&P|128)}return V},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(k,V){if(!Array.isArray(k))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let P=0;P<k.length;P+=3){const j=k[P],Ee=P+1<k.length,qe=Ee?k[P+1]:0,ot=P+2<k.length,$e=ot?k[P+2]:0;let Ur=(15&qe)<<2|$e>>6,Ms=63&$e;ot||(Ms=64,Ee||(Ur=64)),he.push(U[j>>2],U[(3&j)<<4|qe>>4],U[Ur],U[Ms])}return he.join("")},encodeString(k,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(k):this.encodeByteArray(te(k),V)},decodeString(k,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(k):function(k){const V=[];let U=0,he=0;for(;U<k.length;){const P=k[U++];if(P<128)V[he++]=String.fromCharCode(P);else if(P>191&&P<224){const j=k[U++];V[he++]=String.fromCharCode((31&P)<<6|63&j)}else if(P>239&&P<365){const ot=((7&P)<<18|(63&k[U++])<<12|(63&k[U++])<<6|63&k[U++])-65536;V[he++]=String.fromCharCode(55296+(ot>>10)),V[he++]=String.fromCharCode(56320+(1023&ot))}else{const j=k[U++],Ee=k[U++];V[he++]=String.fromCharCode((15&P)<<12|(63&j)<<6|63&Ee)}}return V.join("")}(this.decodeStringToByteArray(k,V))},decodeStringToByteArray(k,V){this.init_();const U=V?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let P=0;P<k.length;){const j=U[k.charAt(P++)],qe=P<k.length?U[k.charAt(P)]:0;++P;const $e=P<k.length?U[k.charAt(P)]:64;++P;const mt=P<k.length?U[k.charAt(P)]:64;if(++P,null==j||null==qe||null==$e||null==mt)throw Error();he.push(j<<2|qe>>4),64!==$e&&(he.push(qe<<4&240|$e>>2),64!==mt&&he.push($e<<6&192|mt))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let k=0;k<this.ENCODED_VALS.length;k++)this.byteToCharMap_[k]=this.ENCODED_VALS.charAt(k),this.charToByteMap_[this.byteToCharMap_[k]]=k,this.byteToCharMapWebSafe_[k]=this.ENCODED_VALS_WEBSAFE.charAt(k),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[k]]=k,k>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(k)]=k,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(k)]=k)}}},oe=function(k){const V=te(k);return ye.encodeByteArray(V,!0)},pe=function(k){return oe(k).replace(/\./g,"")},le=function(k){try{return ye.decodeString(k,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function L(k){return F(void 0,k)}function F(k,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===k&&(k={});break;case Array:k=[];break;default:return V}for(const U in V)!V.hasOwnProperty(U)||!de(U)||(k[U]=F(k[U],V[U]));return k}function de(k){return"__proto__"!==k}class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,U)=>{this.resolve=V,this.reject=U})}wrapCallback(V){return(U,he)=>{U?this.reject(U):this.resolve(he),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(U):V(U,he))}}}function Me(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function We(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function tt(){return"object"==typeof self&&self.self===self}function at(){const k="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof k&&void 0!==k.id}function Mt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function fe(){return Me().indexOf("Electron/")>=0}function Ie(){const k=Me();return k.indexOf("MSIE ")>=0||k.indexOf("Trident/")>=0}function Ne(){return Me().indexOf("MSAppHost/")>=0}function De(){return!1}function Z(){return"object"==typeof indexedDB}function me(){return new Promise((k,V)=>{try{let U=!0;const he="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(he);P.onsuccess=()=>{P.result.close(),U||self.indexedDB.deleteDatabase(he),k(!0)},P.onupgradeneeded=()=>{U=!1},P.onerror=()=>{var j;V((null===(j=P.error)||void 0===j?void 0:j.message)||"")}}catch(U){V(U)}})}function H(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ie extends Error{constructor(V,U,he){super(U),this.code=V,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y.prototype.create)}}class Y{constructor(V,U,he){this.service=V,this.serviceName=U,this.errors=he}create(V,...U){const he=U[0]||{},P=`${this.service}/${V}`,j=this.errors[V],Ee=j?function Te(k,V){return k.replace(ve,(U,he)=>{const P=V[he];return null!=P?String(P):`<${he}?>`})}(j,he):"Error";return new ie(P,`${this.serviceName}: ${Ee} (${P}).`,he)}}const ve=/\{\$([^}]+)}/g;function Fe(k){return JSON.parse(k)}function Ve(k){return JSON.stringify(k)}const He=function(k){let V={},U={},he={},P="";try{const j=k.split(".");V=Fe(le(j[0])||""),U=Fe(le(j[1])||""),P=j[2],he=U.d||{},delete U.d}catch(j){}return{header:V,claims:U,data:he,signature:P}},Dt=function(k){const U=He(k).claims;return!!U&&"object"==typeof U&&U.hasOwnProperty("iat")},jt=function(k){const V=He(k).claims;return"object"==typeof V&&!0===V.admin};function fn(k,V){return Object.prototype.hasOwnProperty.call(k,V)}function bt(k,V){if(Object.prototype.hasOwnProperty.call(k,V))return k[V]}function Ht(k){for(const V in k)if(Object.prototype.hasOwnProperty.call(k,V))return!1;return!0}function kt(k,V,U){const he={};for(const P in k)Object.prototype.hasOwnProperty.call(k,P)&&(he[P]=V.call(U,k[P],P,k));return he}function lt(k,V){if(k===V)return!0;const U=Object.keys(k),he=Object.keys(V);for(const P of U){if(!he.includes(P))return!1;const j=k[P],Ee=V[P];if(Sn(j)&&Sn(Ee)){if(!lt(j,Ee))return!1}else if(j!==Ee)return!1}for(const P of he)if(!U.includes(P))return!1;return!0}function Sn(k){return null!==k&&"object"==typeof k}function Ea(k){const V=[];for(const[U,he]of Object.entries(k))Array.isArray(he)?he.forEach(P=>{V.push(encodeURIComponent(U)+"="+encodeURIComponent(P))}):V.push(encodeURIComponent(U)+"="+encodeURIComponent(he));return V.length?"&"+V.join("&"):""}class Di{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let V=1;V<this.blockSize;++V)this.pad_[V]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(V,U){U||(U=0);const he=this.W_;if("string"==typeof V)for(let mt=0;mt<16;mt++)he[mt]=V.charCodeAt(U)<<24|V.charCodeAt(U+1)<<16|V.charCodeAt(U+2)<<8|V.charCodeAt(U+3),U+=4;else for(let mt=0;mt<16;mt++)he[mt]=V[U]<<24|V[U+1]<<16|V[U+2]<<8|V[U+3],U+=4;for(let mt=16;mt<80;mt++){const Ur=he[mt-3]^he[mt-8]^he[mt-14]^he[mt-16];he[mt]=4294967295&(Ur<<1|Ur>>>31)}let $e,Yt,P=this.chain_[0],j=this.chain_[1],Ee=this.chain_[2],qe=this.chain_[3],ot=this.chain_[4];for(let mt=0;mt<80;mt++){mt<40?mt<20?($e=qe^j&(Ee^qe),Yt=1518500249):($e=j^Ee^qe,Yt=1859775393):mt<60?($e=j&Ee|qe&(j|Ee),Yt=2400959708):($e=j^Ee^qe,Yt=3395469782);const Ur=(P<<5|P>>>27)+$e+ot+Yt+he[mt]&4294967295;ot=qe,qe=Ee,Ee=4294967295&(j<<30|j>>>2),j=P,P=Ur}this.chain_[0]=this.chain_[0]+P&4294967295,this.chain_[1]=this.chain_[1]+j&4294967295,this.chain_[2]=this.chain_[2]+Ee&4294967295,this.chain_[3]=this.chain_[3]+qe&4294967295,this.chain_[4]=this.chain_[4]+ot&4294967295}update(V,U){if(null==V)return;void 0===U&&(U=V.length);const he=U-this.blockSize;let P=0;const j=this.buf_;let Ee=this.inbuf_;for(;P<U;){if(0===Ee)for(;P<=he;)this.compress_(V,P),P+=this.blockSize;if("string"==typeof V){for(;P<U;)if(j[Ee]=V.charCodeAt(P),++Ee,++P,Ee===this.blockSize){this.compress_(j),Ee=0;break}}else for(;P<U;)if(j[Ee]=V[P],++Ee,++P,Ee===this.blockSize){this.compress_(j),Ee=0;break}}this.inbuf_=Ee,this.total_+=U}digest(){const V=[];let U=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let P=this.blockSize-1;P>=56;P--)this.buf_[P]=255&U,U/=256;this.compress_(this.buf_);let he=0;for(let P=0;P<5;P++)for(let j=24;j>=0;j-=8)V[he]=this.chain_[P]>>j&255,++he;return V}}function $i(k,V){const U=new os(k,V);return U.subscribe.bind(U)}class os{constructor(V,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{V(this)}).catch(he=>{this.error(he)})}next(V){this.forEachObserver(U=>{U.next(V)})}error(V){this.forEachObserver(U=>{U.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,U,he){let P;if(void 0===V&&void 0===U&&void 0===he)throw new Error("Missing Observer.");P=function bn(k,V){if("object"!=typeof k||null===k)return!1;for(const U of V)if(U in k&&"function"==typeof k[U])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:U,complete:he},void 0===P.next&&(P.next=Ti),void 0===P.error&&(P.error=Ti),void 0===P.complete&&(P.complete=Ti);const j=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch(Ee){}}),this.observers.push(P),j}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,V)}sendOne(V,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{U(this.observers[V])}catch(he){"undefined"!=typeof console&&console.error&&console.error(he)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ti(){}function hr(k,V){return`${k} failed: ${V} argument `}const it=function(k){const V=[];let U=0;for(let he=0;he<k.length;he++){let P=k.charCodeAt(he);if(P>=55296&&P<=56319){const j=P-55296;he++,K(he<k.length,"Surrogate pair missing trail surrogate."),P=65536+(j<<10)+(k.charCodeAt(he)-56320)}P<128?V[U++]=P:P<2048?(V[U++]=P>>6|192,V[U++]=63&P|128):P<65536?(V[U++]=P>>12|224,V[U++]=P>>6&63|128,V[U++]=63&P|128):(V[U++]=P>>18|240,V[U++]=P>>12&63|128,V[U++]=P>>6&63|128,V[U++]=63&P|128)}return V},tn=function(k){let V=0;for(let U=0;U<k.length;U++){const he=k.charCodeAt(U);he<128?V++:he<2048?V+=2:he>=55296&&he<=56319?(V+=4,U++):V+=3}return V};function wn(k,V=1e3,U=2){const he=V*Math.pow(U,k),P=Math.round(.5*he*(Math.random()-.5)*2);return Math.min(144e5,he+P)}function Ca(k){return k&&k._delegate?k._delegate:k}},8426:(ze,ue,M)=>{var d=M(1223);let K=null;function $(){return K}const oe=new d.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function le(){return(0,d.LFG)(F)}()},providedIn:"platform"}),n})();const L=new d.OlP("Location Initialized");let F=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $().getBaseHref(this._doc)}onPopState(t){const r=$().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=$().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){de()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){de()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function je(){return new F((0,d.LFG)(oe))}()},providedIn:"platform"}),n})();function de(){return!!window.history.pushState}function _e(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function We(n){return n&&"?"!==n[0]?"?"+n:n}let xe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function tt(n){const e=(0,d.LFG)(oe).location;return new Mt((0,d.LFG)(pe),e&&e.origin||"")}()},providedIn:"root"}),n})();const at=new d.OlP("appBaseHref");let Mt=(()=>{class n extends xe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _e(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+We(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const c=this.prepareExternalUrl(i+We(s));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){const c=this.prepareExternalUrl(i+We(s));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(at,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),fe=(()=>{class n extends xe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=_e(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let c=this.prepareExternalUrl(i+We(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){let c=this.prepareExternalUrl(i+We(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(at,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Me(vt(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+We(r))}normalize(t){return n.stripTrailingSlash(function De(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,vt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=We,n.joinWithSlash=_e,n.stripTrailingSlash=Me,n.\u0275fac=function(t){return new(t||n)(d.LFG(xe),d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ne(){return new Ie((0,d.LFG)(xe),(0,d.LFG)(pe))}()},providedIn:"root"}),n})();function vt(n){return n.replace(/\/index.html$/,"")}var ee=(()=>((ee=ee||{})[ee.Format=0]="Format",ee[ee.Standalone=1]="Standalone",ee))(),J=(()=>((J=J||{})[J.Narrow=0]="Narrow",J[J.Abbreviated=1]="Abbreviated",J[J.Wide=2]="Wide",J[J.Short=3]="Short",J))(),ie=(()=>((ie=ie||{})[ie.Short=0]="Short",ie[ie.Medium=1]="Medium",ie[ie.Long=2]="Long",ie[ie.Full=3]="Full",ie))(),Y=(()=>((Y=Y||{})[Y.Decimal=0]="Decimal",Y[Y.Group=1]="Group",Y[Y.List=2]="List",Y[Y.PercentSign=3]="PercentSign",Y[Y.PlusSign=4]="PlusSign",Y[Y.MinusSign=5]="MinusSign",Y[Y.Exponential=6]="Exponential",Y[Y.SuperscriptingExponent=7]="SuperscriptingExponent",Y[Y.PerMille=8]="PerMille",Y[Y.Infinity=9]="Infinity",Y[Y.NaN=10]="NaN",Y[Y.TimeSeparator=11]="TimeSeparator",Y[Y.CurrencyDecimal=12]="CurrencyDecimal",Y[Y.CurrencyGroup=13]="CurrencyGroup",Y))();function jt(n,e){return bn((0,d.cg1)(n)[d.wAp.DateFormat],e)}function fn(n,e){return bn((0,d.cg1)(n)[d.wAp.TimeFormat],e)}function bt(n,e){return bn((0,d.cg1)(n)[d.wAp.DateTimeFormat],e)}function Ht(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(void 0===r){if(e===Y.CurrencyDecimal)return t[d.wAp.NumberSymbols][Y.Decimal];if(e===Y.CurrencyGroup)return t[d.wAp.NumberSymbols][Y.Group]}return r}function Di(n){if(!n[d.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[d.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function bn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Ti(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Ii=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ci={},it=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var tn=(()=>((tn=tn||{})[tn.Short=0]="Short",tn[tn.ShortGMT=1]="ShortGMT",tn[tn.Long=2]="Long",tn[tn.Extended=3]="Extended",tn))(),Xe=(()=>((Xe=Xe||{})[Xe.FullYear=0]="FullYear",Xe[Xe.Month=1]="Month",Xe[Xe.Date=2]="Date",Xe[Xe.Hours=3]="Hours",Xe[Xe.Minutes=4]="Minutes",Xe[Xe.Seconds=5]="Seconds",Xe[Xe.FractionalSeconds=6]="FractionalSeconds",Xe[Xe.Day=7]="Day",Xe))(),et=(()=>((et=et||{})[et.DayPeriods=0]="DayPeriods",et[et.Days=1]="Days",et[et.Months=2]="Months",et[et.Eras=3]="Eras",et))();function As(n,e,t,r){let i=function Yg(n){if(xh(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,c=1]=n.split("-").map(h=>+h);return Wi(i,s-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Ii))return function Da(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,h=Number(n[5]||0)-r,p=Number(n[6]||0),m=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,c,h,p,m),e}(r)}const e=new Date(n);if(!xh(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=wn(t,e)||e;let h,c=[];for(;e;){if(h=it.exec(e),!h){c.push(e);break}{c=c.concat(h.slice(1));const v=c.pop();if(!v)break;e=v}}let p=i.getTimezoneOffset();r&&(p=Ms(r,p),i=function lo(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Si(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Ms(e,i)-i))}(i,r,!0));let m="";return c.forEach(v=>{const E=function Ur(n){if(mt[n])return mt[n];let e;switch(n){case"G":case"GG":case"GGG":e=U(et.Eras,J.Abbreviated);break;case"GGGG":e=U(et.Eras,J.Wide);break;case"GGGGG":e=U(et.Eras,J.Narrow);break;case"y":e=k(Xe.FullYear,1,0,!1,!0);break;case"yy":e=k(Xe.FullYear,2,0,!0,!0);break;case"yyy":e=k(Xe.FullYear,3,0,!1,!0);break;case"yyyy":e=k(Xe.FullYear,4,0,!1,!0);break;case"Y":e=Yt(1);break;case"YY":e=Yt(2,!0);break;case"YYY":e=Yt(3);break;case"YYYY":e=Yt(4);break;case"M":case"L":e=k(Xe.Month,1,1);break;case"MM":case"LL":e=k(Xe.Month,2,1);break;case"MMM":e=U(et.Months,J.Abbreviated);break;case"MMMM":e=U(et.Months,J.Wide);break;case"MMMMM":e=U(et.Months,J.Narrow);break;case"LLL":e=U(et.Months,J.Abbreviated,ee.Standalone);break;case"LLLL":e=U(et.Months,J.Wide,ee.Standalone);break;case"LLLLL":e=U(et.Months,J.Narrow,ee.Standalone);break;case"w":e=$e(1);break;case"ww":e=$e(2);break;case"W":e=$e(1,!0);break;case"d":e=k(Xe.Date,1);break;case"dd":e=k(Xe.Date,2);break;case"c":case"cc":e=k(Xe.Day,1);break;case"ccc":e=U(et.Days,J.Abbreviated,ee.Standalone);break;case"cccc":e=U(et.Days,J.Wide,ee.Standalone);break;case"ccccc":e=U(et.Days,J.Narrow,ee.Standalone);break;case"cccccc":e=U(et.Days,J.Short,ee.Standalone);break;case"E":case"EE":case"EEE":e=U(et.Days,J.Abbreviated);break;case"EEEE":e=U(et.Days,J.Wide);break;case"EEEEE":e=U(et.Days,J.Narrow);break;case"EEEEEE":e=U(et.Days,J.Short);break;case"a":case"aa":case"aaa":e=U(et.DayPeriods,J.Abbreviated);break;case"aaaa":e=U(et.DayPeriods,J.Wide);break;case"aaaaa":e=U(et.DayPeriods,J.Narrow);break;case"b":case"bb":case"bbb":e=U(et.DayPeriods,J.Abbreviated,ee.Standalone,!0);break;case"bbbb":e=U(et.DayPeriods,J.Wide,ee.Standalone,!0);break;case"bbbbb":e=U(et.DayPeriods,J.Narrow,ee.Standalone,!0);break;case"B":case"BB":case"BBB":e=U(et.DayPeriods,J.Abbreviated,ee.Format,!0);break;case"BBBB":e=U(et.DayPeriods,J.Wide,ee.Format,!0);break;case"BBBBB":e=U(et.DayPeriods,J.Narrow,ee.Format,!0);break;case"h":e=k(Xe.Hours,1,-12);break;case"hh":e=k(Xe.Hours,2,-12);break;case"H":e=k(Xe.Hours,1);break;case"HH":e=k(Xe.Hours,2);break;case"m":e=k(Xe.Minutes,1);break;case"mm":e=k(Xe.Minutes,2);break;case"s":e=k(Xe.Seconds,1);break;case"ss":e=k(Xe.Seconds,2);break;case"S":e=k(Xe.FractionalSeconds,1);break;case"SS":e=k(Xe.FractionalSeconds,2);break;case"SSS":e=k(Xe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=P(tn.Short);break;case"ZZZZZ":e=P(tn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=P(tn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=P(tn.Long);break;default:return null}return mt[n]=e,e}(v);m+=E?E(i,t,p):"''"===v?"'":v.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),m}function Wi(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function wn(n,e){const t=function ve(n){return(0,d.cg1)(n)[d.wAp.LocaleId]}(n);if(ci[t]=ci[t]||{},ci[t][e])return ci[t][e];let r="";switch(e){case"shortDate":r=jt(n,ie.Short);break;case"mediumDate":r=jt(n,ie.Medium);break;case"longDate":r=jt(n,ie.Long);break;case"fullDate":r=jt(n,ie.Full);break;case"shortTime":r=fn(n,ie.Short);break;case"mediumTime":r=fn(n,ie.Medium);break;case"longTime":r=fn(n,ie.Long);break;case"fullTime":r=fn(n,ie.Full);break;case"short":const i=wn(n,"shortTime"),s=wn(n,"shortDate");r=Un(bt(n,ie.Short),[i,s]);break;case"medium":const c=wn(n,"mediumTime"),h=wn(n,"mediumDate");r=Un(bt(n,ie.Medium),[c,h]);break;case"long":const p=wn(n,"longTime"),m=wn(n,"longDate");r=Un(bt(n,ie.Long),[p,m]);break;case"full":const v=wn(n,"fullTime"),E=wn(n,"fullDate");r=Un(bt(n,ie.Full),[v,E])}return r&&(ci[t][e]=r),r}function Un(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Dr(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),s+c}function k(n,e,t=0,r=!1,i=!1){return function(s,c){let h=function V(n,e){switch(n){case Xe.FullYear:return e.getFullYear();case Xe.Month:return e.getMonth();case Xe.Date:return e.getDate();case Xe.Hours:return e.getHours();case Xe.Minutes:return e.getMinutes();case Xe.Seconds:return e.getSeconds();case Xe.FractionalSeconds:return e.getMilliseconds();case Xe.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||h>-t)&&(h+=t),n===Xe.Hours)0===h&&-12===t&&(h=12);else if(n===Xe.FractionalSeconds)return function Ca(n,e){return Dr(n,3).substr(0,e)}(h,e);const p=Ht(c,Y.MinusSign);return Dr(h,e,p,r,i)}}function U(n,e,t=ee.Format,r=!1){return function(i,s){return function he(n,e,t,r,i,s){switch(t){case et.Months:return function He(n,e,t){const r=(0,d.cg1)(n),s=bn([r[d.wAp.MonthsFormat],r[d.wAp.MonthsStandalone]],e);return bn(s,t)}(e,i,r)[n.getMonth()];case et.Days:return function Ve(n,e,t){const r=(0,d.cg1)(n),s=bn([r[d.wAp.DaysFormat],r[d.wAp.DaysStandalone]],e);return bn(s,t)}(e,i,r)[n.getDay()];case et.DayPeriods:const c=n.getHours(),h=n.getMinutes();if(s){const m=function $i(n){const e=(0,d.cg1)(n);return Di(e),(e[d.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Ti(r):[Ti(r[0]),Ti(r[1])])}(e),v=function os(n,e,t){const r=(0,d.cg1)(n);Di(r);const s=bn([r[d.wAp.ExtraData][0],r[d.wAp.ExtraData][1]],e)||[];return bn(s,t)||[]}(e,i,r),E=m.findIndex(T=>{if(Array.isArray(T)){const[N,O]=T,z=c>=N.hours&&h>=N.minutes,ae=c<O.hours||c===O.hours&&h<O.minutes;if(N.hours<O.hours){if(z&&ae)return!0}else if(z||ae)return!0}else if(T.hours===c&&T.minutes===h)return!0;return!1});if(-1!==E)return v[E]}return function Fe(n,e,t){const r=(0,d.cg1)(n),s=bn([r[d.wAp.DayPeriodsFormat],r[d.wAp.DayPeriodsStandalone]],e);return bn(s,t)}(e,i,r)[c<12?0:1];case et.Eras:return function gt(n,e){return bn((0,d.cg1)(n)[d.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function P(n){return function(e,t,r){const i=-1*r,s=Ht(t,Y.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case tn.Short:return(i>=0?"+":"")+Dr(c,2,s)+Dr(Math.abs(i%60),2,s);case tn.ShortGMT:return"GMT"+(i>=0?"+":"")+Dr(c,1,s);case tn.Long:return"GMT"+(i>=0?"+":"")+Dr(c,2,s)+":"+Dr(Math.abs(i%60),2,s);case tn.Extended:return 0===r?"Z":(i>=0?"+":"")+Dr(c,2,s)+":"+Dr(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function ot(n){return Wi(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function $e(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+s)/7)}else{const s=ot(t),c=function qe(n){const e=Wi(n,0,1).getDay();return Wi(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),h=s.getTime()-c.getTime();i=1+Math.round(h/6048e5)}return Dr(i,n,Ht(r,Y.MinusSign))}}function Yt(n,e=!1){return function(t,r){return Dr(ot(t).getFullYear(),n,Ht(r,Y.MinusSign),e)}}const mt={};function Ms(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function xh(n){return n instanceof Date&&!isNaN(n.valueOf())}function nn(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class Gn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Gn(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,c),En(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{En(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function En(n,e){n.context.$implicit=e.item}let nr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Et,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Sa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Sa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Et{constructor(){this.$implicit=null,this.ngIf=null}}function Sa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Uo=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const r=this._viewContainerRef;this._viewRef&&r.remove(r.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?r.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[d.TTD]}),n})();const j0=new d.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Jg=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,s){var c;if(null==t||""===t||t!=t)return null;try{return As(t,r,s||this.locale,null!==(c=null!=i?i:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(h){throw function Nn(n,e){return new d.vHH(2100,"")}()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16),d.Y36(j0,24))},n.\u0275pipe=d.Yjl({name:"date",type:n,pure:!0}),n})(),$r=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();let Lh=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new rm((0,d.LFG)(oe),window)}),n})();class rm{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function fo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Dl(this.window.history)||Dl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Dl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class jo{}class po extends class Vh extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){K||(K=n)}(new po)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Qc(){return go=go||document.querySelector("base"),go?go.getAttribute("href"):null}();return null==t?null:function Jc(n){Go=Go||document.createElement("a"),Go.setAttribute("href",n);const e=Go.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){go=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nn(document.cookie,e)}}let Go,go=null;const Ho=new d.OlP("TRANSITION_ID"),It=[{provide:d.ip1,useFactory:function Z0(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=$(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Ho,oe,d.zs3],multi:!0}];class Tl{static init(){(0,d.VLi)(new Tl)}addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let s=i.length,c=!1;const h=function(p){c=c||p,s--,0==s&&r(c)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?$().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Xc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ln=new d.OlP("EventManagerPlugins");let $o=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const c=i[s];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ln),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Bh{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=$().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let mo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Hn=(()=>{class n extends mo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Il),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Il))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Il(n){$().remove(n)}const _o={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ls=/%COMP%/g;function ks(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ks(n,i,t):(i=i.replace(ls,n),t.push(i))}return t}function ut(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Gh=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Oa(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Hh(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new sm(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ks(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($o),d.LFG(Hn),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Oa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_o[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=_o[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=_o[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ut(r)):this.eventManager.addEventListener(e,t,ut(r))}}class Hh extends Oa{constructor(e,t,r,i){super(e),this.component=r;const s=ks(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Yi(n){return"_ngcontent-%COMP%".replace(ls,n)}(i+"-"+r.id),this.hostAttr=function jh(n){return"_nghost-%COMP%".replace(ls,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class sm extends Oa{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ks(i.id,i.styles,[]);for(let c=0;c<s.length;c++){const h=document.createElement("style");h.textContent=s[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let om=(()=>{class n extends Bh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ge=["alt","control","meta","shift"],$h={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Wh={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wo=(()=>{class n extends Bh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$().onAndCancel(t,s.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let c="";if(ge.forEach(p=>{const m=r.indexOf(p);m>-1&&(r.splice(m,1),c+=p+".")}),c+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=c,h}static getEventFullKey(t){let r="",i=function hi(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&pn.hasOwnProperty(e)&&(e=pn[e]))}return $h[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ge.forEach(s=>{s!=i&&Wh[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const am=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function ru(){po.makeCurrent(),Tl.init()},multi:!0},{provide:oe,useFactory:function Q0(){return(0,d.RDi)(document),document},deps:[]}]),zo=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Ra(){return new d.qLn},deps:[]},{provide:ln,useClass:om,multi:!0,deps:[oe,d.R0b,d.Lbi]},{provide:ln,useClass:Wo,multi:!0,deps:[oe]},{provide:Gh,useClass:Gh,deps:[$o,Hn,d.AFp]},{provide:d.FYo,useExisting:Gh},{provide:mo,useExisting:Hn},{provide:Hn,useClass:Hn,deps:[oe]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:$o,useClass:$o,deps:[ln,d.R0b]},{provide:jo,useClass:Xc,deps:[]}];let pr=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Ho,useExisting:d.AFp},It]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:zo,imports:[$r,d.hGG]}),n})();"undefined"!=typeof window&&window;var Sr=M(8306),Ps=M(515),Zt=M(3269),An=M(8996);function ft(...n){const e=(0,Zt.yG)(n);return(0,An.D)(n,e)}var Pn=M(7579),gr=M(8421),Mn=M(5577),hm=M(1144),xi=M(576),At=M(4004);const{isArray:Qh}=Array;function Ko(n){return(0,At.U)(e=>function La(n,e){return Qh(e)?n(...e):n(e)}(n,e))}const uu=["addListener","removeListener"],Ml=["addEventListener","removeEventListener"],Jh=["on","off"];function ir(n,e,t,r){if((0,xi.m)(t)&&(r=t,t=void 0),r)return ir(n,e,t).pipe(Ko(r));const[i,s]=function du(n){return(0,xi.m)(n.addEventListener)&&(0,xi.m)(n.removeEventListener)}(n)?Ml.map(c=>h=>n[c](e,h,t)):function fm(n){return(0,xi.m)(n.addListener)&&(0,xi.m)(n.removeListener)}(n)?uu.map(cs(n,e)):function Fs(n){return(0,xi.m)(n.on)&&(0,xi.m)(n.off)}(n)?Jh.map(cs(n,e)):[];if(!i&&(0,hm.z)(n))return(0,Mn.z)(c=>ir(c,e,t))((0,gr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Sr.y(c=>{const h=(...p)=>c.next(1<p.length?p:p[0]);return i(h),()=>s(h)})}function cs(n,e){return t=>r=>n[t](e,r)}var zr=M(4986),pm=M(3532);const{isArray:Xh}=Array;function fu(n){return 1===n.length&&Xh(n[0])?n[0]:n}var Qt=M(5403);class Cn extends Pn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:xl}=Array,{getPrototypeOf:gm,prototype:Ol,keys:tf}=Object;function Va(n){if(1===n.length){const e=n[0];if(xl(e))return{args:e,keys:null};if(function nf(n){return n&&"object"==typeof n&&gm(n)===Ol}(e)){const t=tf(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ls=M(4671);function rf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Zo=M(9672);function sf(n,e,t){n?(0,Zo.f)(t,n,e):e()}var Ba=M(5032);function Ua(...n){const e=(0,Zt.jO)(n),t=fu(n);return t.length?new Sr.y(r=>{let i=t.map(()=>[]),s=t.map(()=>!1);r.add(()=>{i=s=null});for(let c=0;!r.closed&&c<t.length;c++)(0,gr.Xf)(t[c]).subscribe((0,Qt.x)(r,h=>{if(i[c].push(h),i.every(p=>p.length)){const p=i.map(m=>m.shift());r.next(e?e(...p):p),i.some((m,v)=>!m.length&&s[v])&&r.complete()}},()=>{s[c]=!0,!i[c].length&&r.complete()}));return()=>{i=s=null}}):Ps.E}new Sr.y(Ba.Z);var ja=M(8189);function us(...n){return function Ga(){return(0,ja.J)(1)}()((0,An.D)(n,(0,Zt.yG)(n)))}var Yn=M(4482);function gn(n){return(0,Yn.e)((e,t)=>{(0,gr.Xf)(n).subscribe((0,Qt.x)(t,()=>t.complete(),Ba.Z)),!t.closed&&e.subscribe(t)})}function Fn(n,e){return(0,Yn.e)((t,r)=>{let i=0;t.subscribe((0,Qt.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var Nr=M(5698);function Vs(n,e){return(0,Yn.e)((t,r)=>{let i=null,s=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,Qt.x)(r,p=>{null==i||i.unsubscribe();let m=0;const v=s++;(0,gr.Xf)(n(p,v)).subscribe(i=(0,Qt.x)(r,E=>r.next(e?e(p,E,v,m++):E),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var qr=M(8505);function af(...n){const e=(0,Zt.jO)(n);return(0,Yn.e)((t,r)=>{const i=n.length,s=new Array(i);let c=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,gr.Xf)(n[p]).subscribe((0,Qt.x)(r,m=>{s[p]=m,!h&&!c[p]&&(c[p]=!0,(h=c.every(Ls.y))&&(c=null))},Ba.Z));t.subscribe((0,Qt.x)(r,p=>{if(h){const m=[p,...s];r.next(e?e(...m):m)}}))})}const Ar=new d.OlP("NgValueAccessor"),Tn=new d.OlP("NgValidators"),Bs=new d.OlP("NgAsyncValidators");function w(n){return null!=n}function C(n){const e=(0,d.QGY)(n)?(0,An.D)(n):n;return(0,d.CqO)(e),e}function S(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function x(n,e){return e.map(t=>t(n))}function Q(n){return n.map(e=>function q(n){return!n.validate}(e)?e:t=>e.validate(t))}function Ge(n){return null!=n?function be(n){if(!n)return null;const e=n.filter(w);return 0==e.length?null:function(t){return S(x(t,e))}}(Q(n)):null}function ct(n){return null!=n?function dt(n){if(!n)return null;const e=n.filter(w);return 0==e.length?null:function(t){return function Dn(...n){const e=(0,Zt.jO)(n),{args:t,keys:r}=Va(n),i=new Sr.y(s=>{const{length:c}=t;if(!c)return void s.complete();const h=new Array(c);let p=c,m=c;for(let v=0;v<c;v++){let E=!1;(0,gr.Xf)(t[v]).subscribe((0,Qt.x)(s,T=>{E||(E=!0,m--),h[v]=T},()=>p--,void 0,()=>{(!p||!E)&&(m||s.next(r?rf(r,h):h),s.complete())}))}});return e?i.pipe(Ko(e)):i}(x(t,e).map(C)).pipe((0,At.U)(S))}}(Q(n)):null}function Bt(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function un(n){return n?Array.isArray(n)?n:[n]:[]}function Us(n,e){return Array.isArray(n)?n.includes(e):n===e}function Fl(n,e){const t=un(e);return un(n).forEach(i=>{Us(t,i)||t.push(i)}),t}function mn(n,e){return un(e).filter(t=>!Us(n,t))}class $n extends class hs{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ge(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ct(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}{get formDirective(){return null}get path(){return null}}let Vl=(()=>{class n extends class Ll{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($n,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function gf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Cu(n,e){const t=function pt(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Bt(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Zr(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Bt(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();gf(e._rawValidators,i),gf(e._rawAsyncValidators,i)}function OT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function js(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const bf="VALID",Sm="INVALID",Du="PENDING",wf="DISABLED";function Ef(n){return(Cf(n)?n.validators:n)||null}function mb(n){return Array.isArray(n)?Ge(n):n||null}function Nm(n,e){return(Cf(e)?e.asyncValidators:n)||null}function _b(n){return Array.isArray(n)?ct(n):n||null}function Cf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Am=n=>n instanceof If;function Mm(n){return(n=>n instanceof xm)(n)?n.value:n.getRawValue()}function fs(n,e){const t=Am(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function Bl(n,e){Am(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new d.vHH(1002,"")})}class Tf{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=mb(this._rawValidators),this._composedAsyncValidatorFn=_b(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===bf}get invalid(){return this.status===Sm}get pending(){return this.status==Du}get disabled(){return this.status===wf}get enabled(){return this.status!==wf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=mb(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=_b(e)}addValidators(e){this.setValidators(Fl(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Fl(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mn(e,this._rawAsyncValidators))}hasValidator(e){return Us(this._rawValidators,e)}hasAsyncValidator(e){return Us(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Du,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=wf,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=bf,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bf||this.status===Du)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wf:bf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Du,this._hasOwnPendingAsyncValidator=!0;const t=C(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function uP(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Am(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof dP)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?wf:this.errors?Sm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Du)?Du:this._anyControlsHaveStatus(Sm)?Sm:bf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class xm extends Tf{constructor(e=null,t,r){super(Ef(t),Nm(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cf(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){js(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){js(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class If extends Tf{constructor(e,t,r){super(Ef(t),Nm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Bl(this,e),Object.keys(e).forEach(r=>{fs(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Mm(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class dP extends Tf{constructor(e,t,r){super(Ef(t),Nm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Bl(this,e),e.forEach((r,i)=>{fs(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Mm(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const hP={provide:$n,useExisting:(0,d.Gpc)(()=>$a)},Sf=(()=>Promise.resolve(null))();let $a=(()=>{class n extends $n{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new If({},Ge(t),ct(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Sf.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),function Eu(n,e){Cu(n,e),e.valueAccessor.writeValue(n.value),function MT(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&OT(n,e)})}(n,e),function _f(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function xT(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&OT(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function mf(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Sf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Sf.then(()=>{const r=this._findContainer(t.path),i=new If({});(function yf(n,e){Cu(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Sf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Sf.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function gb(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Tn,10),d.Y36(Bs,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([hP]),d.qOj]}),n})(),Ul=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),wb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),gP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[wb]]}),n})(),nI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[gP]}),n})();Math,Math,Math;const t_=["*"],Pi=["dialog"];function l_(n,e){1&n&&d._uU(0),2&n&&d.Oqu(100===e.fill?"\u2605":"\u2606")}function Iw(n,e){}function UP(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span",2),d._uU(1),d.qZA(),d.TgZ(2,"span",3),d.NdJ("mouseenter",function(){const s=d.CHM(t).index;return d.oxw().enter(s+1)})("click",function(){const s=d.CHM(t).index;return d.oxw().handleClick(s+1)}),d.YNc(3,Iw,0,0,"ng-template",4),d.qZA()}if(2&n){const t=e.index,r=d.oxw(),i=d.MAs(1);d.xp6(1),d.hij("(",t<r.nextRate?"*":" ",")"),d.xp6(1),d.Udp("cursor",r.isInteractive()?"pointer":"default"),d.xp6(1),d.Q6J("ngTemplateOutlet",r.starTemplate||r.starTemplateFromContent||i)("ngTemplateOutletContext",r.contexts[t])}}function ju(n,e,t=0){return Math.max(Math.min(n,e),t)}function d_(n){return"string"==typeof n}function ts(n){return null!=n}function zl(n){return(n||document.body).getBoundingClientRect()}const Zf={animation:!0,transitionTimerDelayMs:5},Rw=()=>{},{transitionTimerDelayMs:kw}=Zf,ql=new Map,Mr=(n,e,t,r)=>{let i=r.context||{};const s=ql.get(e);if(s)switch(r.runningTransition){case"continue":return Ps.E;case"stop":n.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),ql.delete(e)}const c=t(e,r.animation,i)||Rw;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>c()),ft(void 0).pipe(function XI(n){return e=>new Sr.y(t=>e.subscribe({next:c=>n.run(()=>t.next(c)),error:c=>n.run(()=>t.error(c)),complete:()=>n.run(()=>t.complete())}))}(n));const h=new Pn.x,p=new Pn.x,m=h.pipe(function Qo(...n){return e=>us(e,ft(...n))}(!0));ql.set(e,{transition$:h,complete:()=>{p.next(),p.complete()},context:i});const v=function $s(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const E=ir(e,"transitionend").pipe(gn(m),Fn(({target:N})=>N===e));(function Yo(...n){return 1===(n=fu(n)).length?(0,gr.Xf)(n[0]):new Sr.y(function ef(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,gr.Xf)(n[r]).subscribe((0,Qt.x)(e,i=>{if(t){for(let s=0;s<t.length;s++)s!==r&&t[s].unsubscribe();t=null}e.next(i)})))}}(n))})(function vo(n=0,e,t=zr.P){let r=-1;return null!=e&&((0,pm.K)(e)?t=e:r=e),new Sr.y(i=>{let s=function hu(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(v+kw).pipe(gn(m)),E,p).pipe(gn(m)).subscribe(()=>{ql.delete(e),n.run(()=>{c(),h.next(),h.complete()})})}),h.asObservable()};let Qf=(()=>{class n{constructor(){this.animation=Zf.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),f_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r]]}),n})(),rS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r]]}),n})(),tp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),$w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r]]}),n})(),_s=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();var an=(()=>{return(n=an||(an={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",an;var n})();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const bS=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function wS(n){const e=Array.from(n.querySelectorAll(bS)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let HS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r,nI]]}),n})(),I_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();class oa{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let $S=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Nr.q)(1)).subscribe(()=>{Mr(this._zone,this._el.nativeElement,(t,r)=>{r&&zl(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Mr(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(d.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),d.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class yE{close(e){}dismiss(e){}}class WS{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Pn.x,this._dismissed=new Pn.x,this._hidden=new Pn.x,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,c)=>{this._resolve=s,this._reject=c}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(gn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(gn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function h_(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ft(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Ua(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Xa=(()=>{return(n=Xa||(Xa={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",Xa;var n})();let nd=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new Pn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new d.vpe,this.shown=new Pn.x,this.hidden=new Pn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":d_(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Nr.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},c=Ua(Mr(this._zone,t,()=>t.classList.remove("show"),r),Mr(this._zone,this._dialogEl.nativeElement,()=>{},r));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const t={animation:this.animation,runningTransition:"continue"};Ua(Mr(this._zone,this._elRef.nativeElement,(s,c)=>{c&&zl(s),s.classList.add("show")},t),Mr(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{ir(t,"keydown").pipe(gn(this._closed$),Fn(i=>i.which===an.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(Xa.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;ir(this._dialogEl.nativeElement,"mousedown").pipe(gn(this._closed$),(0,qr.b)(()=>r=!1),Vs(()=>ir(t,"mouseup").pipe(gn(this._closed$),(0,Nr.q)(1))),Fn(({target:i})=>t===i)).subscribe(()=>{r=!0}),ir(t,"click").pipe(gn(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(Xa.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=wS(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Mr(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(oe),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&d.Gf(Pi,7),2&t){let i;d.iGM(i=d.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(d.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),d.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),d.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:t_,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div",0,1)(2,"div",2),d.Hsn(3),d.qZA()()),2&t&&d.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),zS=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:s,paddingRight:c}=i;if(t>0){const h=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${h+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=c),i.overflow=s}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vE=(()=>{class n{constructor(t,r,i,s,c,h){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=s,this._rendererFactory=c,this._ngZone=h,this._activeWindowCmptHasChanged=new Pn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new d.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const p=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=ir(e,"focusin").pipe(gn(t),(0,At.U)(s=>s.target));ir(e,"keydown").pipe(gn(t),Fn(s=>s.which===an.Tab),af(i)).subscribe(([s,c])=>{const[h,p]=wS(e);(c===h||c===e)&&s.shiftKey&&(p.focus(),s.preventDefault()),c===p&&!s.shiftKey&&(h.focus(),s.preventDefault())}),r&&ir(e,"click").pipe(gn(t),af(i),(0,At.U)(s=>s[1])).subscribe(s=>s.focus())})})(0,p.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(p.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i,s){const c=s.container instanceof HTMLElement?s.container:ts(s.container)?this._document.querySelector(s.container):this._document.body,h=this._rendererFactory.createRenderer(null,null);if(!c)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const p=new yE,m=this._getContentRef(t,s.injector||r,i,p,s);let v=!1!==s.backdrop?this._attachBackdrop(t,c):void 0,E=this._attachWindowComponent(t,c,m),T=new WS(E,m,v,s.beforeDismiss);return this._registerModalRef(T),this._registerWindowCmpt(E),T.hidden.pipe((0,Nr.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(h.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),p.close=N=>{T.close(N)},p.dismiss=N=>{T.dismiss(N)},this._applyWindowOptions(E.instance,s),1===this._modalRefs.length&&h.addClass(this._document.body,"modal-open"),v&&v.instance&&(this._applyBackdropOptions(v.instance,s),v.changeDetectorRef.detectChanges()),E.changeDetectorRef.detectChanges(),T}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,r){let s=t.resolveComponentFactory($S).create(this._injector);return this._applicationRef.attachView(s.hostView),r.appendChild(s.location.nativeElement),s}_attachWindowComponent(t,r,i){let c=t.resolveComponentFactory(nd).create(this._injector,i.nodes);return this._applicationRef.attachView(c.hostView),r.appendChild(c.location.nativeElement),c}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{ts(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{ts(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,s,c){return i?i instanceof d.Rgc?this._createFromTemplateRef(i,s):d_(i)?this._createFromString(i):this._createFromComponent(t,r,i,s,c):new oa([])}_createFromTemplateRef(t,r){const s=t.createEmbeddedView({$implicit:r,close(c){r.close(c)},dismiss(c){r.dismiss(c)}});return this._applicationRef.attachView(s),new oa([s.rootNodes],s)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new oa([[r]])}_createFromComponent(t,r,i,s,c){const h=t.resolveComponentFactory(i),p=d.zs3.create({providers:[{provide:yE,useValue:s}],parent:r}),m=h.create(p),v=m.location.nativeElement;return c.scrollable&&v.classList.add("component-host-scrollable"),this._applicationRef.attachView(m.hostView),new oa([[v]],m.hostView,m)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.z2F),d.LFG(d.zs3),d.LFG(oe),d.LFG(zS),d.LFG(d.FYo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qS=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Qf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bE=(()=>{class n{constructor(t,r,i,s){this._moduleCFR=t,this._injector=r,this._modalStack=i,this._config=s}open(t,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d._Vd),d.LFG(d.zs3),d.LFG(vE),d.LFG(qS))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[bE]}),n})(),M_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r]]}),n})(),RE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r]]}),n})(),x_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r]]}),n})(),O_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r]]}),n})(),PE=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FE=(()=>{class n{constructor(t,r){this._changeDetectorRef=r,this.contexts=[],this.disabled=!1,this.hover=new d.vpe,this.leave=new d.vpe,this.rateChange=new d.vpe(!0),this.onChange=i=>{},this.onTouched=()=>{},this.max=t.max,this.readonly=t.readonly}ariaValueText(){return`${this.nextRate} out of ${this.max}`}isInteractive(){return!this.readonly&&!this.disabled}enter(t){this.isInteractive()&&this._updateState(t),this.hover.emit(t)}handleBlur(){this.onTouched()}handleClick(t){this.isInteractive()&&this.update(this.resettable&&this.rate===t?0:t)}handleKeyDown(t){switch(t.which){case an.ArrowDown:case an.ArrowLeft:this.update(this.rate-1);break;case an.ArrowUp:case an.ArrowRight:this.update(this.rate+1);break;case an.Home:this.update(0);break;case an.End:this.update(this.max);break;default:return}t.preventDefault()}ngOnChanges(t){t.rate&&this.update(this.rate),t.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(t){this.disabled=t}update(t,r=!0){const i=ju(t,this.max,0);this.isInteractive()&&this.rate!==i&&(this.rate=i,this.rateChange.emit(this.rate)),r&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(t){this.update(t,!1),this._changeDetectorRef.markForCheck()}_updateState(t){this.nextRate=t,this.contexts.forEach((r,i)=>r.fill=Math.round(100*ju(t-i,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(t,r)=>({fill:0,index:r}))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(PE),d.Y36(d.sBO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-rating"]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,d.Rgc,5),2&t){let s;d.iGM(s=d.CRH())&&(r.starTemplateFromContent=s.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(t,r){1&t&&d.NdJ("blur",function(){return r.handleBlur()})("keydown",function(s){return r.handleKeyDown(s)})("mouseleave",function(){return r.reset()}),2&t&&(d.Ikx("tabindex",r.disabled?-1:0),d.uIk("aria-valuemax",r.max)("aria-valuenow",r.nextRate)("aria-valuetext",r.ariaValueText())("aria-disabled",!!r.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},features:[d._Bn([{provide:Ar,useExisting:(0,d.Gpc)(()=>n),multi:!0}]),d.TTD],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(d.YNc(0,l_,1,1,"ng-template",null,0,d.W1O),d.YNc(2,UP,4,5,"ng-template",1)),2&t&&(d.xp6(2),d.Q6J("ngForOf",r.contexts))},directives:[tr,Uo],encapsulation:2,changeDetection:0}),n})(),fp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r]]}),n})(),cN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r]]}),n})(),VE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r]]}),n})(),F_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();new d.OlP("live announcer delay",{providedIn:"root",factory:function BE(){return 100}});let sc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r]]}),n})(),oc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const id=[f_,rS,tp,$w,_s,HS,I_,S_,M_,oc,RE,x_,O_,fp,cN,VE,F_,sc];let mN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[id,f_,rS,tp,$w,_s,HS,I_,S_,M_,oc,RE,x_,O_,fp,cN,VE,F_,sc]}),n})(),_N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$r,mN]]}),n})();function ac(n,e){return(0,xi.m)(e)?(0,Mn.z)(n,e,1):(0,Mn.z)(n,1)}class V_{}class B_{}class Ks{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ks?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ks;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ks?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===s.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class yN{encodeKey(e){return wN(e)}encodeValue(e){return wN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const vN=/%(\d[a-f0-9])/gi,bN={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function wN(n){return encodeURIComponent(n).replace(vN,(e,t)=>{var r;return null!==(r=bN[t])&&void 0!==r?r:e})}function EN(n){return`${n}`}class el{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new yN,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function UE(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[c,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(c)||[];p.push(h),t.set(c,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new el({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(EN(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(EN(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class jE{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function GE(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function HE(n){return"undefined"!=typeof Blob&&n instanceof Blob}function U_(n){return"undefined"!=typeof FormData&&n instanceof FormData}class od{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function pp(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ks),this.context||(this.context=new jE),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new el,this.urlWithParams=t}serializeBody(){return null===this.body?null:GE(this.body)||HE(this.body)||U_(this.body)||function sd(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof el?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||U_(this.body)?null:HE(this.body)?this.body.type||null:GE(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof el?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,v=e.params||this.params;const E=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((T,N)=>T.set(N,e.setHeaders[N]),m)),e.setParams&&(v=Object.keys(e.setParams).reduce((T,N)=>T.set(N,e.setParams[N]),v)),new od(r,i,c,{params:v,headers:m,context:E,reportProgress:p,responseType:s,withCredentials:h})}}var Wn=(()=>((Wn=Wn||{})[Wn.Sent=0]="Sent",Wn[Wn.UploadProgress=1]="UploadProgress",Wn[Wn.ResponseHeader=2]="ResponseHeader",Wn[Wn.DownloadProgress=3]="DownloadProgress",Wn[Wn.Response=4]="Response",Wn[Wn.User=5]="User",Wn))();class j_{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ks,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class G_ extends j_{constructor(e={}){super(e),this.type=Wn.ResponseHeader}clone(e={}){return new G_({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gp extends j_{constructor(e={}){super(e),this.type=Wn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new gp({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class H_ extends j_{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function $_(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let $E=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof od)s=t;else{let p,m;p=i.headers instanceof Ks?i.headers:new Ks(i.headers),i.params&&(m=i.params instanceof el?i.params:new el({fromObject:i.params})),s=new od(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:m,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=ft(s).pipe(ac(p=>this.handler.handle(p)));if(t instanceof od||"events"===i.observe)return c;const h=c.pipe(Fn(p=>p instanceof gp));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,At.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,At.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,At.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,At.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new el).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,$_(i,r))}post(t,r,i={}){return this.request("POST",t,$_(i,r))}put(t,r,i={}){return this.request("PUT",t,$_(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(V_))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class tl{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const WE=new d.OlP("HTTP_INTERCEPTORS");let zE=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const KE=/^\)\]\}',?\n/;let YE=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Sr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((N,O)=>i.setRequestHeader(N,O.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const N=t.detectContentTypeHeader();null!==N&&i.setRequestHeader("Content-Type",N)}if(t.responseType){const N=t.responseType.toLowerCase();i.responseType="json"!==N?N:"text"}const s=t.serializeBody();let c=null;const h=()=>{if(null!==c)return c;const N=i.statusText||"OK",O=new Ks(i.getAllResponseHeaders()),z=function IN(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new G_({headers:O,status:i.status,statusText:N,url:z}),c},p=()=>{let{headers:N,status:O,statusText:z,url:ae}=h(),Re=null;204!==O&&(Re=void 0===i.response?i.responseText:i.response),0===O&&(O=Re?200:0);let ke=O>=200&&O<300;if("json"===t.responseType&&"string"==typeof Re){const Ye=Re;Re=Re.replace(KE,"");try{Re=""!==Re?JSON.parse(Re):null}catch(Qe){Re=Ye,ke&&(ke=!1,Re={error:Qe,text:Re})}}ke?(r.next(new gp({body:Re,headers:N,status:O,statusText:z,url:ae||void 0})),r.complete()):r.error(new H_({error:Re,headers:N,status:O,statusText:z,url:ae||void 0}))},m=N=>{const{url:O}=h(),z=new H_({error:N,status:i.status||0,statusText:i.statusText||"Unknown Error",url:O||void 0});r.error(z)};let v=!1;const E=N=>{v||(r.next(h()),v=!0);let O={type:Wn.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(O.total=N.total),"text"===t.responseType&&!!i.responseText&&(O.partialText=i.responseText),r.next(O)},T=N=>{let O={type:Wn.UploadProgress,loaded:N.loaded};N.lengthComputable&&(O.total=N.total),r.next(O)};return i.addEventListener("load",p),i.addEventListener("error",m),i.addEventListener("timeout",m),i.addEventListener("abort",m),t.reportProgress&&(i.addEventListener("progress",E),null!==s&&i.upload&&i.upload.addEventListener("progress",T)),i.send(s),r.next({type:Wn.Sent}),()=>{i.removeEventListener("error",m),i.removeEventListener("abort",m),i.removeEventListener("load",p),i.removeEventListener("timeout",m),t.reportProgress&&(i.removeEventListener("progress",E),null!==s&&i.upload&&i.upload.removeEventListener("progress",T)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(jo))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const W_=new d.OlP("XSRF_COOKIE_NAME"),ad=new d.OlP("XSRF_HEADER_NAME");class ZE{}let QE=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=nn(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe),d.LFG(d.Lbi),d.LFG(W_))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),z_=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ZE),d.LFG(ad))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),SN=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(WE,[]);this.chain=r.reduceRight((i,s)=>new tl(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(B_),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),NN=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:z_,useClass:zE}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:W_,useValue:t.cookieName}:[],t.headerName?{provide:ad,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[z_,{provide:WE,useExisting:z_,multi:!0},{provide:ZE,useClass:QE},{provide:W_,useValue:"XSRF-TOKEN"},{provide:ad,useValue:"X-XSRF-TOKEN"}]}),n})(),AN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[$E,{provide:V_,useClass:SN},YE,{provide:B_,useExisting:YE}],imports:[[NN.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var W=M(5861),rn=M(5813),Ys=M(5867);class nl{constructor(e){return e}}class lc{constructor(){return(0,Ys.C6)()}}const q_=new d.OlP("angularfire2._apps"),K_={provide:nl,useFactory:function xN(n){return n&&1===n.length?n[0]:new nl((0,Ys.Mq)())},deps:[[new d.FiY,q_]]},Y_={provide:lc,deps:[[new d.FiY,q_]]};function JE(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new nl(r)}}let Z_=(()=>{class n{constructor(t){(0,Ys.KN)("angularfire",rn.q4.full,"core"),(0,Ys.KN)("angularfire",rn.q4.full,"app"),(0,Ys.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[K_,Y_]}),n})();function ON(n,...e){return{ngModule:Z_,providers:[{provide:q_,useFactory:JE(n),multi:!0,deps:[d.R0b,d.zs3,rn.HU,...e]}]}}const eC=(0,rn.u3)(Ys.ZF,!0);var sn=M(9681),ld=M(4859),B=M(2090),yi=M(1877);const tC=new Map,cc={activated:!1,tokenObservers:[]},cd={initialized:!1,enabled:!1};function or(n){return tC.get(n)||cc}function Zs(n,e){tC.set(n,e)}function ud(){return cd}class X_{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,W.Z)(function*(){t.stop();try{t.pending=new B.BH,yield function mp(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new B.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ei=new B.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ey(n){if(!or(n).activated)throw ei.create("use-before-activation",{appName:n.name})}function ny(n,e){return rC.apply(this,arguments)}function rC(){return(rC=(0,W.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const E=yield i.getHeartbeatsHeader();E&&(r["X-Firebase-Client"]=E)}const s={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,s)}catch(E){throw ei.create("fetch-network-error",{originalErrorMessage:E.message})}if(200!==c.status)throw ei.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(E){throw ei.create("fetch-parse-error",{originalErrorMessage:E.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw ei.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const m=1e3*Number(p[1]),v=Date.now();return{token:h.token,expireTimeMillis:v+m,issuedAtTimeMillis:v}})).apply(this,arguments)}function dc(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const _p="firebase-app-check-store";let yp=null;function UN(){return yp||(yp=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ei.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_p,{keyPath:"compositeKey"})}}catch(t){e(ei.create("storage-open",{originalErrorMessage:t.message}))}}),yp)}function vp(){return(vp=(0,W.Z)(function*(n,e){const r=(yield UN()).transaction(_p,"readwrite"),s=r.objectStore(_p).put({compositeKey:n,value:e});return new Promise((c,h)=>{s.onsuccess=p=>{c()},r.onerror=p=>{var m;h(ei.create("storage-set",{originalErrorMessage:null===(m=p.target.error)||void 0===m?void 0:m.message}))}})})).apply(this,arguments)}const fd=new yi.Yd("@firebase/app-check");function cC(n,e){return(0,B.hl)()?function XF(n,e){return function aC(n,e){return vp.apply(this,arguments)}(function lC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{fd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ay(){return ud().enabled}function ly(){return wp.apply(this,arguments)}function wp(){return(wp=(0,W.Z)(function*(){const n=ud();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const dC={error:"UNKNOWN_ERROR"};function hC(n){return B.US.encodeString(JSON.stringify(n),!1)}function Ep(n){return cy.apply(this,arguments)}function cy(){return(cy=(0,W.Z)(function*(n,e=!1){const t=n.app;ey(t);const r=or(t);let s,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&Dp(p)&&(i=p)}if(!e&&i&&Dp(i))return{token:i.token};let h,c=!1;if(ay()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ny(dc(t,yield ly()),n.heartbeatServiceProvider).then(m=>(r.exchangeTokenPromise=void 0,m)),c=!0);const p=yield r.exchangeTokenPromise;return yield cC(t,p),Zs(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),c=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?fd.warn(p.message):fd.error(p),s=p}return i?(h={token:i.token},Zs(t,Object.assign(Object.assign({},r),{token:i})),yield cC(t,i)):h=dy(s),c&&fc(t,h),h})).apply(this,arguments)}function uy(n,e){const t=or(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Zs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function fC(n){const{app:e}=n,t=or(e);let r=t.tokenRefresher;r||(r=function HN(n){const{app:e}=n;return new X_((0,W.Z)(function*(){let r;if(r=or(e).token?yield Ep(n,!0):yield Ep(n),r.error)throw r.error}),()=>!0,()=>{const t=or(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Zs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function fc(n,e){const t=or(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Dp(n){return n.expireTimeMillis-Date.now()>0}function dy(n){return{token:hC(dC),error:n}}class Qs{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=or(this.app);for(const t of e)uy(this.app,t.next);return Promise.resolve()}}const xp="app-check-internal";!function vC(){(0,sn._registerComponent)(new ld.wA("app-check",n=>function $N(n,e){return new Qs(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xp).initialize()})),(0,sn._registerComponent)(new ld.wA(xp,n=>function hy(n){return{getToken:e=>Ep(n,e),addTokenListener:e=>function Cp(n,e,t,r){const{app:i}=n,s=or(i),c={next:t,error:r,type:e};if(Zs(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&Dp(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),fC(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>fC(n))}(n,"INTERNAL",e),removeTokenListener:e=>uy(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,sn.registerVersion)("@firebase/app-check","0.5.8")}();class gd{constructor(){return(0,rn.vb)("app-check")}}"undefined"!=typeof window&&window;var vy=M(655);const CC=function Pp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},DC=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_d=new yi.Yd("@firebase/auth");function yd(n,...e){_d.logLevel<=yi.in.ERROR&&_d.error(`Auth (${sn.SDK_VERSION}): ${n}`,...e)}function vi(n,...e){throw wy(n,...e)}function ns(n,...e){return wy(n,...e)}function Fp(n,e,t){const r=Object.assign(Object.assign({},CC()),{[e]:t});return new B.LL("auth","Firebase",r).create(e,{appName:n.name})}function wy(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return DC.create(n,...e)}function Pe(n,e,...t){if(!n)throw wy(e,...t)}function bs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw yd(e),new Error(e)}function Ao(n,e){n||bs(e)}const TC=new Map;function Js(n){Ao(n instanceof Function,"Expected a class definition");let e=TC.get(n);return e?(Ao(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,TC.set(n,e),e)}function bd(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function SC(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class pc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ao(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function NC(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Lp(){return"http:"===SC()||"https:"===SC()}()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vp(n,e){Ao(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class MC{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},cL=new pc(3e4,6e4);function zn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function vr(n,e,t,r){return xC.apply(this,arguments)}function xC(){return(xC=(0,W.Z)(function*(n,e,t,r,i={}){return sA(n,i,(0,W.Z)(function*(){let s={},c={};r&&("GET"===e?c=r:s={body:JSON.stringify(r)});const h=(0,B.xO)(Object.assign({key:n.config.apiKey},c)).slice(1),p=yield n._getAdditionalHeaders();return p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode),MC.fetch()(oA(n,n.config.apiHost,t,h),Object.assign({method:e,headers:p,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function sA(n,e,t){return OC.apply(this,arguments)}function OC(){return(OC=(0,W.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},iA),e);try{const i=new uL(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=yield s.json();if("needConfirmation"in c)throw la(n,"account-exists-with-different-credential",c);if(s.ok&&!("errorMessage"in c))return c;{const h=s.ok?c.errorMessage:c.error.message,[p,m]=h.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===p)throw la(n,"credential-already-in-use",c);if("EMAIL_EXISTS"===p)throw la(n,"email-already-in-use",c);if("USER_DISABLED"===p)throw la(n,"user-disabled",c);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Fp(n,v,m);vi(n,v)}}catch(i){if(i instanceof B.ZR)throw i;vi(n,"network-request-failed")}})).apply(this,arguments)}function aa(n,e,t,r){return RC.apply(this,arguments)}function RC(){return(RC=(0,W.Z)(function*(n,e,t,r,i={}){const s=yield vr(n,e,t,r,i);return"mfaPendingCredential"in s&&vi(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function oA(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Vp(n.config,i):`${n.config.apiScheme}://${i}`}class uL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ns(this.auth,"network-request-failed")),cL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function la(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ns(n,e,r);return i.customData._tokenResponse=t,i}function Bp(){return(Bp=(0,W.Z)(function*(n,e){return vr(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function kC(n,e){return PC.apply(this,arguments)}function PC(){return(PC=(0,W.Z)(function*(n,e){return vr(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function il(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function jp(){return(jp=(0,W.Z)(function*(n,e=!1){const t=(0,B.m9)(n),r=yield t.getIdToken(e),i=Gp(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,c=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:il(FC(i.auth_time)),issuedAtTime:il(FC(i.iat)),expirationTime:il(FC(i.exp)),signInProvider:c||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}})).apply(this,arguments)}function FC(n){return 1e3*Number(n)}function Gp(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return yd("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,B.tV)(t);return i?JSON.parse(i):(yd("Failed to decode base64 JWT payload"),null)}catch(i){return yd("Caught error parsing JWT payload as JSON",i),null}}function ws(n,e){return Cy.apply(this,arguments)}function Cy(){return(Cy=(0,W.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof B.ZR&&hL(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}function hL({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class fL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,W.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,W.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class uA{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=il(this.lastLoginAt),this.creationTime=il(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wd(n){return Dy.apply(this,arguments)}function Dy(){return(Dy=(0,W.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield ws(n,kC(t,{idToken:r}));Pe(null==i?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const c=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?Ty(s.providerUserInfo):[],h=hA(n.providerData,c),v=!!n.isAnonymous&&!(n.email&&s.passwordHash||(null==h?void 0:h.length)),E={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:h,metadata:new uA(s.createdAt,s.lastLoginAt),isAnonymous:v};Object.assign(n,E)})).apply(this,arguments)}function LC(){return(LC=(0,W.Z)(function*(n){const e=(0,B.m9)(n);yield wd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function hA(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ty(n){return n.map(e=>{var{providerId:t}=e,r=(0,vy._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Li(){return(Li=(0,W.Z)(function*(n,e){const t=yield sA(n,{},(0,W.Z)(function*(){const r=(0,B.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,c=oA(n,i,"/v1/token",`key=${s}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",MC.fetch()(c,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class Ed{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(void 0!==e.idToken,"internal-error"),Pe(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function cA(n){const e=Gp(n);return Pe(e,"internal-error"),Pe(void 0!==e.exp,"internal-error"),Pe(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,W.Z)(function*(){return Pe(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,W.Z)(function*(){const{accessToken:i,refreshToken:s,expiresIn:c}=yield function fA(n,e){return Li.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(c))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,c=new Ed;return r&&(Pe("string"==typeof r,"internal-error",{appName:e}),c.refreshToken=r),i&&(Pe("string"==typeof i,"internal-error",{appName:e}),c.accessToken=i),s&&(Pe("number"==typeof s,"internal-error",{appName:e}),c.expirationTime=s),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ed,this.toJSON())}_performRefresh(){return bs("not implemented")}}function Xs(n,e){Pe("string"==typeof n||void 0===n,"internal-error",{appName:e})}class sl{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,vy._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new uA(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,W.Z)(function*(){const r=yield ws(t,t.stsTokenManager.getToken(t.auth,e));return Pe(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function lA(n){return jp.apply(this,arguments)}(this,e)}reload(){return function dA(n){return LC.apply(this,arguments)}(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new sl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,W.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield wd(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,W.Z)(function*(){const t=yield e.getIdToken();return yield ws(e,function dL(n,e){return Bp.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,c,h,p,m,v;const E=null!==(r=t.displayName)&&void 0!==r?r:void 0,T=null!==(i=t.email)&&void 0!==i?i:void 0,N=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,O=null!==(c=t.photoURL)&&void 0!==c?c:void 0,z=null!==(h=t.tenantId)&&void 0!==h?h:void 0,ae=null!==(p=t._redirectEventId)&&void 0!==p?p:void 0,Re=null!==(m=t.createdAt)&&void 0!==m?m:void 0,ke=null!==(v=t.lastLoginAt)&&void 0!==v?v:void 0,{uid:Ye,emailVerified:Qe,isAnonymous:nt,providerData:rt,stsTokenManager:yt}=t;Pe(Ye&&yt,e,"internal-error");const Vt=Ed.fromJSON(this.name,yt);Pe("string"==typeof Ye,e,"internal-error"),Xs(E,e.name),Xs(T,e.name),Pe("boolean"==typeof Qe,e,"internal-error"),Pe("boolean"==typeof nt,e,"internal-error"),Xs(N,e.name),Xs(O,e.name),Xs(z,e.name),Xs(ae,e.name),Xs(Re,e.name),Xs(ke,e.name);const Xn=new sl({uid:Ye,auth:e,email:T,emailVerified:Qe,displayName:E,isAnonymous:nt,photoURL:O,phoneNumber:N,tenantId:z,stsTokenManager:Vt,createdAt:Re,lastLoginAt:ke});return rt&&Array.isArray(rt)&&(Xn.providerData=rt.map(Cr=>Object.assign({},Cr))),ae&&(Xn._redirectEventId=ae),Xn}static _fromIdTokenResponse(e,t,r=!1){return(0,W.Z)(function*(){const i=new Ed;i.updateFromServerResponse(t);const s=new sl({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield wd(s),s})()}}const Hp=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,W.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,W.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,W.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,W.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Cd(n,e,t){return`firebase:${n}:${e}:${t}`}class ol{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Cd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Cd("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,W.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?sl._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,W.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,W.Z)(function*(){if(!t.length)return new ol(Js(Hp),e,r);const i=(yield Promise.all(t.map(function(){var m=(0,W.Z)(function*(v){if(yield v._isAvailable())return v});return function(v){return m.apply(this,arguments)}}()))).filter(m=>m);let s=i[0]||Js(Hp);const c=Cd(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const v=yield m._get(c);if(v){const E=sl._fromJSON(e,v);m!==s&&(h=E),s=m;break}}catch(v){}const p=i.filter(m=>m._shouldAllowMigration);return s._shouldAllowMigration&&p.length?(s=p[0],h&&(yield s._set(c,h.toJSON())),yield Promise.all(t.map(function(){var m=(0,W.Z)(function*(v){if(v!==s)try{yield v._remove(c)}catch(E){}});return function(v){return m.apply(this,arguments)}}())),new ol(s,e,r)):new ol(s,e,r)})()}}function VC(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Iy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ca(e))return"Blackberry";if(Ny(e))return"Webos";if(Sy(e))return"Safari";if((e.includes("chrome/")||BC(e))&&!e.includes("edge/"))return"Chrome";if($p(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function Iy(n=(0,B.z$)()){return/firefox\//i.test(n)}function Sy(n=(0,B.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BC(n=(0,B.z$)()){return/crios\//i.test(n)}function UC(n=(0,B.z$)()){return/iemobile/i.test(n)}function $p(n=(0,B.z$)()){return/android/i.test(n)}function ca(n=(0,B.z$)()){return/blackberry/i.test(n)}function Ny(n=(0,B.z$)()){return/webos/i.test(n)}function Dd(n=(0,B.z$)()){return/iphone|ipad|ipod/i.test(n)}function jC(n=(0,B.z$)()){return Dd(n)||$p(n)||Ny(n)||ca(n)||/windows phone/i.test(n)||UC(n)}function Ay(n,e=[]){let t;switch(n){case"Browser":t=VC((0,B.z$)());break;case"Worker":t=`${VC((0,B.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sn.SDK_VERSION}/${r}`}class mA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((c,h)=>{try{c(e(s))}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,W.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch(c){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i.message})}})()}}class _A{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wp(this),this.idTokenSubscription=new Wp(this),this.beforeStateQueue=new mA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DC,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Js(t)),this._initializationPromise=this.queue((0,W.Z)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield ol.create(r,e),!r._deleted)){if(null===(i=r._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch(c){}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,W.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,W.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,c=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const h=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,p=null==s?void 0:s._redirectEventId,m=yield t.tryRedirectSignIn(e);(!h||h===p)&&(null==m?void 0:m.user)&&(s=m.user,c=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(c)try{yield t.beforeStateQueue.runMiddleware(s)}catch(h){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(h))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return Pe(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,W.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(i){yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,W.Z)(function*(){try{yield wd(e)}catch(r){if("auth/network-request-failed"!==r.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function AC(){if("undefined"==typeof navigator)return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,W.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,W.Z)(function*(){const r=e?(0,B.m9)(e):null;return r&&Pe(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,W.Z)(function*(){if(!r._deleted)return e&&Pe(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,W.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,W.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,W.Z)(function*(){yield t.assertedPersistence.setPersistence(Js(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new B.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,W.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,W.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&Js(e)||t._popupRedirectResolver;Pe(r,t,"argument-error"),t.redirectPersistenceManager=yield ol.create(t,[Js(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,W.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,W.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,W.Z)(function*(){if(e===t.currentUser)return t.queue((0,W.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),c=this._isInitialized?Promise.resolve():this._initializationPromise;return Pe(c,this,"internal-error"),c.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,W.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ay(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,W.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function Vi(n){return(0,B.m9)(n)}class Wp{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,B.ne)(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function eo(n,e){return Id.apply(this,arguments)}function Id(){return(Id=(0,W.Z)(function*(n,e){return aa(n,"POST","/v1/accounts:signInWithIdp",zn(n,e))})).apply(this,arguments)}class ua{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class IA extends ua{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,W.Z)(function*(){const s=yield sl._fromIdTokenResponse(e,r,i),c=AA(r);return new Es({user:s,providerId:c,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,W.Z)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=AA(r);return new Es({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function AA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class qy extends B.ZR{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,qy.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new qy(e,t,r,i)}}function XC(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?qy._fromErrorAndOperation(n,s,e,r):s})}function tD(n,e){return o.apply(this,arguments)}function o(){return(o=(0,W.Z)(function*(n,e,t=!1){const r=yield ws(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Es._forOperation(n,"link",r)})).apply(this,arguments)}function f(){return(f=(0,W.Z)(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=yield ws(n,XC(r,i,e,n),t);Pe(s.idToken,r,"internal-error");const c=Gp(s.idToken);Pe(c,r,"internal-error");const{sub:h}=c;return Pe(n.uid===h,r,"user-mismatch"),Es._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&vi(r,"user-mismatch"),s}})).apply(this,arguments)}function _(){return(_=(0,W.Z)(function*(n,e,t=!1){const r="signIn",i=yield XC(n,r,e),s=yield Es._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}const oD="__sak";class DL{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oD,"1"),this.storage.removeItem(oD),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const l3=(()=>{class n extends DL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function s3(){const n=(0,B.z$)();return Sy(n)||Dd(n)}()&&function gA(){try{return!(!window||window===window.top)}catch(n){return!1}}(),this.fallbackToPolling=jC(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const h=this.storage.getItem(i);if(t.newValue!==h)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const h=this.storage.getItem(i);!r&&this.localCache[i]===h||this.notifyListeners(i,h)},c=this.storage.getItem(i);!function pA(){return(0,B.w1)()&&10===document.documentMode}()||c===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,W.Z)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,W.Z)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,W.Z)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),TL=(()=>{class n extends DL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let u3=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,W.Z)(function*(){const i=t,{eventId:s,eventType:c,data:h}=i.data,p=r.handlersMap[c];if(!(null==p?void 0:p.size))return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:c});const m=Array.from(p).map(function(){var E=(0,W.Z)(function*(T){return T(i.origin,h)});return function(T){return E.apply(this,arguments)}}()),v=yield function c3(n){return Promise.all(n.map(function(){var e=(0,W.Z)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(m);i.ports[0].postMessage({status:"done",eventId:s,eventType:c,response:v})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function WA(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class d3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,W.Z)(function*(){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let c,h;return new Promise((p,m)=>{const v=WA("",20);s.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},r);h={messageChannel:s,onMessage(T){const N=T;if(N.data.eventId===v)switch(N.data.status){case"ack":clearTimeout(E),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(N.data.response);break;default:clearTimeout(E),clearTimeout(c),m(new Error("invalid_response"))}}},i.handlers.add(h),s.port1.addEventListener("message",h.onMessage),i.target.postMessage({eventType:e,eventId:v,data:t},[s.port2])}).finally(()=>{h&&i.removeMessageHandler(h)})})()}}function br(){return window}function zA(){return void 0!==br().WorkerGlobalScope&&"function"==typeof br().importScripts}function qA(){return(qA=(0,W.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})).apply(this,arguments)}const IL="firebaseLocalStorageDb",aD="firebaseLocalStorage",SL="fbase_key";class Yy{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lD(n,e){return n.transaction([aD],e?"readwrite":"readonly").objectStore(aD)}function KA(){const n=indexedDB.open(IL,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(aD,{keyPath:SL})}catch(i){t(i)}}),n.addEventListener("success",(0,W.Z)(function*(){const r=n.result;r.objectStoreNames.contains(aD)?e(r):(r.close(),yield function _3(){const n=indexedDB.deleteDatabase(IL);return new Yy(n).toPromise()}(),e(yield KA()))}))})}function NL(n,e,t){return YA.apply(this,arguments)}function YA(){return(YA=(0,W.Z)(function*(n,e,t){const r=lD(n,!0).put({[SL]:e,value:t});return new Yy(r).toPromise()})).apply(this,arguments)}function ZA(){return(ZA=(0,W.Z)(function*(n,e){const t=lD(n,!1).get(e),r=yield new Yy(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function AL(n,e){const t=lD(n,!0).delete(e);return new Yy(t).toPromise()}const w3=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,W.Z)(function*(){return t.db||(t.db=yield KA()),t.db})()}_withRetries(t){var r=this;return(0,W.Z)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,W.Z)(function*(){return zA()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,W.Z)(function*(){t.receiver=u3._getInstance(function g3(){return zA()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,W.Z)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,W.Z)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,W.Z)(function*(){var r,i;if(t.activeServiceWorker=yield function f3(){return qA.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new d3(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);!s||(null===(r=s[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=s[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,W.Z)(function*(){if(r.sender&&r.activeServiceWorker&&function p3(){var n;return(null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch(i){}})()}_isAvailable(){return(0,W.Z)(function*(){try{if(!indexedDB)return!1;const t=yield KA();return yield NL(t,oD,"1"),yield AL(t,oD),!0}catch(t){}return!1})()}_withPendingWrite(t){var r=this;return(0,W.Z)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,W.Z)(function*(){return i._withPendingWrite((0,W.Z)(function*(){return yield i._withRetries(s=>NL(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,W.Z)(function*(){const i=yield r._withRetries(s=>function y3(n,e){return ZA.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,W.Z)(function*(){return r._withPendingWrite((0,W.Z)(function*(){return yield r._withRetries(i=>AL(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,W.Z)(function*(){const r=yield t._withRetries(c=>{const h=lD(c,!1).getAll();return new Yy(h).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:c,value:h}of r)s.add(c),JSON.stringify(t.localCache[c])!==JSON.stringify(h)&&(t.notifyListeners(c,h),i.push(c));for(const c of Object.keys(t.localCache))t.localCache[c]&&!s.has(c)&&(t.notifyListeners(c,null),i.push(c));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,W.Z)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function xL(n){return`__${n}${Math.floor(1e6*Math.random())}`}function Vd(n,e){return e?Js(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}xL("rcb"),new pc(3e4,6e4);class oM extends class Oy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bs("not implemented")}_getIdTokenResponse(e){return bs("not implemented")}_linkToIdToken(e,t){return bs("not implemented")}_getReauthenticationResolver(e){return bs("not implemented")}}{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return eo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function V3(n){return function g(n,e){return _.apply(this,arguments)}(n.auth,new oM(n),n.bypassAuthState)}function B3(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),function u(n,e){return f.apply(this,arguments)}(t,new oM(n),n.bypassAuthState)}function U3(n){return aM.apply(this,arguments)}function aM(){return(aM=(0,W.Z)(function*(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),tD(t,new oM(n),n.bypassAuthState)})).apply(this,arguments)}new pc(2e3,1e4);const Zy=new Map;class H3 extends class j3{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,W.Z)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,W.Z)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:c,error:h,type:p}=e;if(h)return void t.reject(h);const m={auth:t.auth,requestUri:r,sessionId:i,tenantId:c||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(p)(m))}catch(v){t.reject(v)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return V3;case"linkViaPopup":case"linkViaRedirect":return U3;case"reauthViaPopup":case"reauthViaRedirect":return B3;default:vi(this.auth,"internal-error")}}resolve(e){Ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,W.Z)(function*(){let r=Zy.get(t.auth._key());if(!r){try{const s=(yield function $3(n,e){return hM.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}Zy.set(t.auth._key(),r)}return t.bypassAuthState||Zy.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,W.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,W.Z)(function*(){})()}cleanUp(){}}function hM(){return(hM=(0,W.Z)(function*(n,e){const t=kL(e),r=RL(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function W3(n,e){Zy.set(n._key(),e)}function RL(n){return Js(n._redirectPersistence)}function kL(n){return Cd("pendingRedirect",n.config.apiKey,n.name)}function PL(n,e){return vM.apply(this,arguments)}function vM(){return(vM=(0,W.Z)(function*(n,e,t=!1){const r=Vi(n),i=Vd(r,e),c=yield new H3(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,yield r._persistUserIfCurrent(c.user),yield r._setRedirectUser(null,e)),c})).apply(this,arguments)}class Z3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Q3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VL(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!VL(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(ns(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(LL(e))}saveEventToCache(e){this.cachedEventUids.add(LL(e)),this.lastProcessedEventTime=Date.now()}}function LL(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function VL({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===(null==e?void 0:e.code)}function J3(n){return wM.apply(this,arguments)}function wM(){return(wM=(0,W.Z)(function*(n,e={}){return vr(n,"GET","/v1/projects",e)})).apply(this,arguments)}const X3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eW=/^https?/;function EM(){return(EM=(0,W.Z)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield J3(n);for(const t of e)try{if(nW(t))return}catch(r){}vi(n,"unauthorized-domain")})).apply(this,arguments)}function nW(n){const e=bd(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return""===c.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&c.hostname===r}if(!eW.test(t))return!1;if(X3.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const rW=new pc(3e4,6e4);function BL(){const n=br().___jsl;if(null==n?void 0:n.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let uD=null;function sW(n){return uD=uD||function iW(n){return new Promise((e,t)=>{var r,i,s;function c(){BL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BL(),t(ns(n,"network-request-failed"))},timeout:rW.get()})}if(null===(i=null===(r=br().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=br().gapi)||void 0===s?void 0:s.load)){const h=xL("iframefcb");return br()[h]=()=>{gapi.load?c():t(ns(n,"network-request-failed"))},function ML(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ns("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function T3(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${h}`).catch(p=>t(p))}c()}}).catch(e=>{throw uD=null,e})}(n),uD}const oW=new pc(5e3,15e3),cW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dW(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Vp(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:sn.SDK_VERSION},i=uW.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${(0,B.xO)(r).slice(1)}`}function CM(){return CM=(0,W.Z)(function*(n){const e=yield sW(n),t=br().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:dW(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cW,dontclear:!0},r=>new Promise(function(){var i=(0,W.Z)(function*(s,c){yield r.restyle({setHideOnLeave:!1});const h=ns(n,"network-request-failed"),p=br().setTimeout(()=>{c(h)},oW.get());function m(){br().clearTimeout(p),s(r)}r.ping(m).then(m,()=>{c(h)})});return function(s,c){return i.apply(this,arguments)}}()))}),CM.apply(this,arguments)}const fW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class UL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function jL(n,e,t,r,i,s){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:sn.SDK_VERSION,eventId:i};if(e instanceof ua){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",(0,B.xb)(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries(s||{}))c[p]=m}if(e instanceof IA){const p=e.getScopes().filter(m=>""!==m);p.length>0&&(c.scopes=p.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const p of Object.keys(h))void 0===h[p]&&delete h[p];return`${function EW({config:n}){return n.emulator?Vp(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${(0,B.xO)(h).slice(1)}`}const DM="webStorageSupport",DW=class CW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TL,this._completeRedirectFn=PL,this._overrideRedirectResult=W3}_openPopup(e,t,r,i){var s=this;return(0,W.Z)(function*(){var c;Ao(null===(c=s.eventManagers[e._key()])||void 0===c?void 0:c.manager,"_initialize() not called before _openPopup()");const h=jL(e,t,r,bd(),i);return function yW(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const p=Object.assign(Object.assign({},fW),{width:r.toString(),height:i.toString(),top:s,left:c}),m=(0,B.z$)().toLowerCase();t&&(h=BC(m)?"_blank":t),Iy(m)&&(e=e||"http://localhost",p.scrollbars="yes");const v=Object.entries(p).reduce((T,[N,O])=>`${T}${N}=${O},`,"");if(function mL(n=(0,B.z$)()){var e;return Dd(n)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(m)&&"_self"!==h)return function vW(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",h),new UL(null);const E=window.open(e||"",h,v);Pe(E,n,"popup-blocked");try{E.focus()}catch(T){}return new UL(E)}(e,h,WA())})()}_openRedirect(e,t,r,i){var s=this;return(0,W.Z)(function*(){return yield s._originValidation(e),function h3(n){br().location.href=n}(jL(e,t,r,bd(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ao(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,W.Z)(function*(){const r=yield function hW(n){return CM.apply(this,arguments)}(e),i=new Z3(e);return r.register("authEvent",s=>(Pe(null==s?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(DM,{type:DM},i=>{var s;const c=null===(s=null==i?void 0:i[0])||void 0===s?void 0:s[DM];void 0!==c&&t(!!c),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function tW(n){return EM.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jC()||Sy()||Dd()}};var HL="@firebase/auth";class TW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,W.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{var i;e((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function NW(n=(0,sn.getApp)()){const e=(0,sn._getProvider)(n,"auth");return e.isInitialized()?e.getImmediate():function IC(n,e){const t=(0,sn._getProvider)(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if((0,B.vZ)(s,null!=e?e:{}))return i;vi(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:DW,persistence:[w3,l3,TL]})}!function SW(n){(0,sn._registerComponent)(new ld.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:c}=r.options;return((h,p)=>{Pe(s&&!s.includes(":"),"invalid-api-key",{appName:h.name}),Pe(!(null==c?void 0:c.includes(":")),"argument-error",{appName:h.name});const m={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ay(n)},v=new _A(h,p,m);return function rA(n,e){const t=(null==e?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Js);(null==e?void 0:e.errorMap)&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(v,t),v})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,sn._registerComponent)(new ld.wA("auth-internal",e=>{const t=Vi(e.getProvider("auth").getImmediate());return new TW(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,sn.registerVersion)(HL,"0.20.2",function IW(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,sn.registerVersion)(HL,"0.20.2","esm2017")}("Browser");class Qy{constructor(e){return e}}class TM{constructor(){return(0,rn.vb)("auth")}}const IM=new d.OlP("angularfire2.auth-instances");function MW(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Qy(r)}}const xW={provide:TM,deps:[[new d.FiY,IM]]},OW={provide:Qy,useFactory:function AW(n,e){const t=(0,rn.JM)("auth",n,e);return t&&new Qy(t)},deps:[[new d.FiY,IM],nl]};let RW=(()=>{class n{constructor(){(0,Ys.KN)("angularfire",rn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[OW,xW]}),n})();function kW(n,...e){return{ngModule:RW,providers:[{provide:IM,useFactory:MW(n),multi:!0,deps:[d.R0b,d.zs3,rn.HU,lc,[new d.FiY,gd],...e]}]}}const PW=(0,rn.u3)(NW,!0);var Ke,FW="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},al={},SM=SM||{},Ct=FW||self;function dD(){}function NM(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Jy(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var AM="closure_uid_"+(1e9*Math.random()>>>0),VW=0;function BW(n,e,t){return n.call.apply(n.bind,arguments)}function UW(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ni(n,e,t){return(ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?BW:UW).apply(null,arguments)}function hD(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ri(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function gc(){this.s=this.s,this.o=this.o}var GW={};gc.prototype.s=!1,gc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function LW(n){return Object.prototype.hasOwnProperty.call(n,AM)&&n[AM]||(n[AM]=++VW)}(this);delete GW[n]}},gc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zL=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},qL=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function KL(n){return Array.prototype.concat.apply([],arguments)}function MM(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function fD(n){return/^[\s\xa0]*$/.test(n)}var Ui,YL=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Bi(n,e){return-1!=n.indexOf(e)}function xM(n,e){return n<e?-1:n>e?1:0}e:{var ZL=Ct.navigator;if(ZL){var QL=ZL.userAgent;if(QL){Ui=QL;break e}}Ui=""}function OM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function JL(n){const e={};for(const t in n)e[t]=n[t];return e}var XL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function e2(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<XL.length;s++)t=XL[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function RM(n){return RM[" "](n),n}RM[" "]=dD;var pD,n,WW=Bi(Ui,"Opera"),Zp=Bi(Ui,"Trident")||Bi(Ui,"MSIE"),t2=Bi(Ui,"Edge"),kM=t2||Zp,n2=Bi(Ui,"Gecko")&&!(Bi(Ui.toLowerCase(),"webkit")&&!Bi(Ui,"Edge"))&&!(Bi(Ui,"Trident")||Bi(Ui,"MSIE"))&&!Bi(Ui,"Edge"),zW=Bi(Ui.toLowerCase(),"webkit")&&!Bi(Ui,"Edge");function r2(){var n=Ct.document;return n?n.documentMode:void 0}e:{var PM="",FM=(n=Ui,n2?/rv:([^\);]+)(\)|;)/.exec(n):t2?/Edge\/([\d\.]+)/.exec(n):Zp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):zW?/WebKit\/(\S+)/.exec(n):WW?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(FM&&(PM=FM?FM[1]:""),Zp){var LM=r2();if(null!=LM&&LM>parseFloat(PM)){pD=String(LM);break e}}pD=PM}var qW={};var YW=Ct.document&&Zp&&(r2()||parseInt(pD,10))||void 0,ZW=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",dD,e),Ct.removeEventListener("test",dD,e)}catch(t){}return n}();function bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Xy(n,e){if(bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(n2){e:{try{RM(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:QW[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xy.Z.h.call(this)}}bi.prototype.h=function(){this.defaultPrevented=!0},ri(Xy,bi);var QW={2:"touch",3:"pen",4:"mouse"};Xy.prototype.h=function(){Xy.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ev="closure_listenable_"+(1e6*Math.random()|0),JW=0;function XW(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++JW,this.ca=this.fa=!1}function gD(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function mD(n){this.src=n,this.g={},this.h=0}function BM(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=zL(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(gD(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function UM(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}mD.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=UM(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new XW(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var jM="closure_lm_"+(1e6*Math.random()|0),GM={};function o2(n,e,t,r,i){if(r&&r.once)return l2(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)o2(n,e[s],t,r,i);return null}return t=zM(t),n&&n[ev]?n.N(e,t,Jy(r)?!!r.capture:!!r,i):a2(n,e,t,!1,r,i)}function a2(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var c=Jy(i)?!!i.capture:!!i,h=$M(n);if(h||(n[jM]=h=new mD(n)),(t=h.add(e,t,r,c,s)).proxy)return t;if(r=function e6(){var e=t6;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ZW||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(u2(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function l2(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)l2(n,e[s],t,r,i);return null}return t=zM(t),n&&n[ev]?n.O(e,t,Jy(r)?!!r.capture:!!r,i):a2(n,e,t,!0,r,i)}function c2(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)c2(n,e[s],t,r,i);else r=Jy(r)?!!r.capture:!!r,t=zM(t),n&&n[ev]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=UM(s=n.g[e],t,r,i))&&(gD(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=$M(n))&&(e=n.g[e.toString()],n=-1,e&&(n=UM(e,t,r,i)),(t=-1<n?e[n]:null)&&HM(t))}function HM(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ev])BM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(u2(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=$M(e))?(BM(t,n),0==t.h&&(t.src=null,e[jM]=null)):gD(n)}}}function u2(n){return n in GM?GM[n]:GM[n]="on"+n}function t6(n,e){if(n.ca)n=!0;else{e=new Xy(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&HM(n),n=t.call(r,e)}return n}function $M(n){return(n=n[jM])instanceof mD?n:null}var WM="__closure_events_fn_"+(1e9*Math.random()>>>0);function zM(n){return"function"==typeof n?n:(n[WM]||(n[WM]=function(e){return n.handleEvent(e)}),n[WM])}function xr(){gc.call(this),this.i=new mD(this),this.P=this,this.I=null}function ii(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new bi(e,n);else if(e instanceof bi)e.target=e.target||n;else{var i=e;e2(e=new bi(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];i=_D(c,r,!0,e)&&i}if(i=_D(c=e.g=n,r,!0,e)&&i,i=_D(c,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=_D(c=e.g=t[s],r,!1,e)&&i}function _D(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.ca&&c.capture==t){var h=c.listener,p=c.ia||c.src;c.fa&&BM(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}ri(xr,gc),xr.prototype[ev]=!0,xr.prototype.removeEventListener=function(n,e,t,r){c2(this,n,e,t,r)},xr.prototype.M=function(){if(xr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)gD(t[r]);delete n.g[e],n.h--}}this.I=null},xr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qM=Ct.JSON.stringify;function n6(){var n=h2;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var YM,d2=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new i6,n=>n.reset());class i6{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function s6(n){Ct.setTimeout(()=>{throw n},0)}function KM(n,e){YM||function o6(){var n=Ct.Promise.resolve(void 0);YM=function(){n.then(a6)}}(),ZM||(YM(),ZM=!0),h2.add(n,e)}var ZM=!1,h2=new class r6{constructor(){this.h=this.g=null}add(e,t){const r=d2.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function a6(){for(var n;n=n6();){try{n.h.call(n.g)}catch(t){s6(t)}var e=d2;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ZM=!1}function yD(n,e){xr.call(this),this.h=n||1,this.g=e||Ct,this.j=ni(this.kb,this),this.l=Date.now()}function QM(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function JM(n,e,t){if("function"==typeof n)t&&(n=ni(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ni(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function f2(n){n.g=JM(()=>{n.g=null,n.i&&(n.i=!1,f2(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ri(yD,xr),(Ke=yD.prototype).da=!1,Ke.S=null,Ke.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ii(this,"tick"),this.da&&(QM(this),this.start()))}},Ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.M=function(){yD.Z.M.call(this),QM(this),delete this.g};class l6 extends gc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:f2(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tv(n){gc.call(this),this.h=n,this.g={}}ri(tv,gc);var p2=[];function g2(n,e,t,r){Array.isArray(t)||(t&&(p2[0]=t.toString()),t=p2);for(var i=0;i<t.length;i++){var s=o2(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function m2(n){OM(n.g,function(e,t){this.g.hasOwnProperty(t)&&HM(e)},n),n.g={}}function vD(){this.g=!0}function Qp(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function h6(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<i.length;c++)i[c]=""}}}return qM(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}tv.prototype.M=function(){tv.Z.M.call(this),m2(this)},tv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vD.prototype.Aa=function(){this.g=!1},vD.prototype.info=function(){};var Bd={},_2=null;function bD(){return _2=_2||new xr}function y2(n){bi.call(this,Bd.Ma,n)}function nv(n){const e=bD();ii(e,new y2(e,n))}function v2(n,e){bi.call(this,Bd.STAT_EVENT,n),this.stat=e}function ji(n){const e=bD();ii(e,new v2(e,n))}function b2(n,e){bi.call(this,Bd.Na,n),this.size=e}function rv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}Bd.Ma="serverreachability",ri(y2,bi),Bd.STAT_EVENT="statevent",ri(v2,bi),Bd.Na="timingevent",ri(b2,bi);var wD={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},w2={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function XM(){}function C2(){}XM.prototype.h=null;var nx,iv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ex(){bi.call(this,"d")}function tx(){bi.call(this,"c")}function ED(){}function sv(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new tv(this),this.P=f6,this.W=new yD(n=kM?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new D2}function D2(){this.i=null,this.g="",this.h=!1}ri(ex,bi),ri(tx,bi),ri(ED,XM),ED.prototype.g=function(){return new XMLHttpRequest},ED.prototype.i=function(){return{}},nx=new ED;var f6=45e3,rx={},CD={};function ix(n,e,t){n.K=1,n.v=ND(ll(e)),n.s=t,n.U=!0,T2(n,null)}function T2(n,e){n.F=Date.now(),ov(n),n.A=ll(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),k2(t.h,"t",r),n.C=0,t=n.l.H,n.h=new D2,n.g=rV(n.l,t?e:null,!n.s),0<n.O&&(n.L=new l6(ni(n.Ia,n,n.g),n.O)),g2(n.V,n.g,"readystatechange",n.gb),e=n.H?JL(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),nv(1),function c6(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),p=0;p<h.length;p++){var m=h[p].split("=");if(1<m.length){var v=m[0];m=m[1];var E=v.split("_");c=2<=E.length&&"type"==E[1]?c+(v+"=")+m+"&":c+(v+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function I2(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function S2(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=p6(n,t),i==CD){4==e&&(n.o=4,ji(14),r=!1),Qp(n.j,n.m,null,"[Incomplete Response]");break}if(i==rx){n.o=4,ji(15),Qp(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Qp(n.j,n.m,i,null),sx(n,i)}I2(n)&&i!=CD&&i!=rx&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ji(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),mx(e),e.L=!0,ji(11))):(Qp(n.j,n.m,t,"[Invalid Chunked Response]"),Ud(n),av(n))}function p6(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?CD:(t=Number(e.substring(t,r)),isNaN(t)?rx:(r+=1)+t>e.length?CD:(e=e.substr(r,t),n.C=r+t,e))}function ov(n){n.Y=Date.now()+n.P,N2(n,n.P)}function N2(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=rv(ni(n.eb,n),e)}function DD(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function av(n){0==n.l.G||n.I||X2(n.l,n)}function Ud(n){DD(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,QM(n.W),m2(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function sx(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||lx(t.i,n)))if(t.I=n.N,!n.J&&lx(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(m){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=rv(ni(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;kD(t),OD(t)}gx(t),ji(18)}if(1>=L2(t.i)&&t.ka){try{t.ka()}catch(m){}t.ka=void 0}}else Hd(t,11)}else if((n.J||t.g==n)&&kD(t),!fD(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let m=i[e];if(t.U=m[0],m=m[1],2==t.G)if("c"==m[0]){t.J=m[1],t.la=m[2];const v=m[3];null!=v&&(t.ma=v,t.h.info("VER="+t.ma));const E=m[4];null!=E&&(t.za=E,t.h.info("SVER="+t.za));const T=m[5];null!=T&&"number"==typeof T&&0<T&&(t.K=r=1.5*T,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const O=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(O){var s=r.i;!s.g&&(Bi(O,"spdy")||Bi(O,"quic")||Bi(O,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(cx(s,s.h),s.h=null))}if(r.D){const z=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;z&&(r.sa=z,On(r.F,r.D,z))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=nV(r,r.H?r.la:null,r.W),c.J){V2(r.i,c);var h=c,p=r.K;p&&h.setTimeout(p),h.B&&(DD(h),ov(h)),r.g=c}else Q2(r);0<t.l.length&&RD(t)}else"stop"!=m[0]&&"close"!=m[0]||Hd(t,7);else 3==t.G&&("stop"==m[0]||"close"==m[0]?"stop"==m[0]?Hd(t,7):fx(t):"noop"!=m[0]&&t.j&&t.j.wa(m),t.A=0)}nv(4)}catch(m){}}function ox(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(NM(n)||"string"==typeof n)qL(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(NM(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function g6(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(NM(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function Jp(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Jp)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function ax(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];jd(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)jd(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function jd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ke=sv.prototype).setTimeout=function(n){this.P=n},Ke.gb=function(n){n=n.target;const e=this.L;e&&3==cl(n)?e.l():this.Ia(n)},Ke.Ia=function(n){try{if(n==this.g)e:{const v=cl(this.g);var e=this.g.Da();const E=this.g.ba();if(!(3>v)&&(3!=v||kM||this.g&&(this.h.h||this.g.ga()||z2(this.g)))){this.I||4!=v||7==e||nv(8==e||0>=E?3:2),DD(this);var t=this.g.ba();this.N=t;t:if(I2(this)){var r=z2(this.g);n="";var i=r.length,s=4==cl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ud(this),av(this);var c="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function u6(n,e,t,r,i,s,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,v,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fD(h)){var m=h;break t}}m=null}if(!(t=m)){this.i=!1,this.o=3,ji(12),Ud(this),av(this);break e}Qp(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sx(this,t)}this.U?(S2(this,v,c),kM&&this.i&&3==v&&(g2(this.V,this.W,"tick",this.fb),this.W.start())):(Qp(this.j,this.m,c,null),sx(this,c)),4==v&&Ud(this),this.i&&!this.I&&(4==v?X2(this.l,this):(this.i=!1,ov(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ji(12)):(this.o=0,ji(13)),Ud(this),av(this)}}}catch(v){}},Ke.fb=function(){if(this.g){var n=cl(this.g),e=this.g.ga();this.C<e.length&&(DD(this),S2(this,n,e),this.i&&4!=n&&ov(this))}},Ke.cancel=function(){this.I=!0,Ud(this)},Ke.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function d6(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(nv(3),ji(17)),Ud(this),this.o=2,av(this)):N2(this,this.Y-n)},(Ke=Jp.prototype).R=function(){ax(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ke.T=function(){return ax(this),this.g.concat()},Ke.get=function(n,e){return jd(this.h,n)?this.h[n]:e},Ke.set=function(n,e){jd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ke.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var A2=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gd(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Gd){this.g=void 0!==e?e:n.g,TD(this,n.j),this.s=n.s,ID(this,n.i),SD(this,n.m),this.l=n.l,e=n.h;var t=new uv;t.i=e.i,e.g&&(t.g=new Jp(e.g),t.h=e.h),M2(this,t),this.o=n.o}else n&&(t=String(n).match(A2))?(this.g=!!e,TD(this,t[1]||"",!0),this.s=lv(t[2]||""),ID(this,t[3]||"",!0),SD(this,t[4]),this.l=lv(t[5]||"",!0),M2(this,t[6]||"",!0),this.o=lv(t[7]||"")):(this.g=!!e,this.h=new uv(null,this.g))}function ll(n){return new Gd(n)}function TD(n,e,t){n.j=t?lv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ID(n,e,t){n.i=t?lv(e,!0):e}function SD(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function M2(n,e,t){e instanceof uv?(n.h=e,function D6(n,e){e&&!n.j&&(mc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(O2(this,r),k2(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=cv(e,E6)),n.h=new uv(e,n.g))}function On(n,e,t){n.h.set(e,t)}function ND(n){return On(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function lv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function cv(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,v6),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function v6(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Gd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(cv(e,x2,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(cv(e,x2,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(cv(t,"/"==t.charAt(0)?w6:b6,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",cv(t,C6)),n.join("")};var x2=/[#\/\?@]/g,b6=/[#\?:]/g,w6=/[#\?]/g,E6=/[#\?@]/g,C6=/#/g;function uv(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function mc(n){n.g||(n.g=new Jp,n.h=0,n.i&&function m6(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function O2(n,e){mc(n),e=Xp(n,e),jd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,jd((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ax(n)))}function R2(n,e){return mc(n),e=Xp(n,e),jd(n.g.h,e)}function k2(n,e,t){O2(n,e),0<t.length&&(n.i=null,n.g.set(Xp(n,e),MM(t)),n.h+=t.length)}function Xp(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function P2(n){this.l=n||I6,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ea&&Ct.g.Ea()&&Ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=uv.prototype).add=function(n,e){mc(this),this.i=null,n=Xp(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){mc(this),this.g.forEach(function(t,r){qL(t,function(i){n.call(e,i,r,this)},this)},this)},Ke.T=function(){mc(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},Ke.R=function(n){mc(this);var e=[];if("string"==typeof n)R2(this,n)&&(e=KL(e,this.g.get(Xp(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=KL(e,n[t])}return e},Ke.set=function(n,e){return mc(this),this.i=null,R2(this,n=Xp(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var c=i;""!==r[s]&&(c+="="+encodeURIComponent(String(r[s]))),n.push(c)}}return this.i=n.join("&")};var I6=10;function F2(n){return!!n.h||!!n.g&&n.g.size>=n.j}function L2(n){return n.h?1:n.g?n.g.size:0}function lx(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function cx(n,e){n.g?n.g.add(e):n.h=e}function V2(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function B2(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return MM(n.i)}function ux(){}function S6(){this.g=new ux}function N6(n,e,t){const r=t||"";try{ox(n,function(i,s){let c=i;Jy(i)&&(c=qM(i)),e.push(r+s+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function AD(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function dv(n){this.l=n.$b||null,this.j=n.ib||!1}function MD(n,e){xr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=dx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}P2.prototype.cancel=function(){if(this.i=B2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ux.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},ux.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},ri(dv,XM),dv.prototype.g=function(){return new MD(this.l,this.j)},dv.prototype.i=function(n){return function(){return n}}({}),ri(MD,xr);var dx=0;function U2(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function hv(n){n.readyState=4,n.l=null,n.j=null,n.A=null,fv(n)}function fv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=MD.prototype).open=function(n,e){if(this.readyState!=dx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,fv(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hv(this)),this.readyState=dx},Ke.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,fv(this)),this.g&&(this.readyState=3,fv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;U2(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ke.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?hv(this):fv(this),3==this.readyState&&U2(this)}},Ke.Ua=function(n){this.g&&(this.response=this.responseText=n,hv(this))},Ke.Ta=function(n){this.g&&(this.response=n,hv(this))},Ke.ha=function(){this.g&&hv(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(MD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var M6=Ct.JSON.parse;function ar(n){xr.call(this),this.headers=new Jp,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=j2,this.K=this.L=!1}ri(ar,xr);var j2="",x6=/^https?$/i,O6=["POST","PUT"];function k6(n){return"content-type"==n.toLowerCase()}function G2(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,H2(n),xD(n)}function H2(n){n.D||(n.D=!0,ii(n,"complete"),ii(n,"error"))}function $2(n){if(n.h&&void 0!==SM&&(!n.C[1]||4!=cl(n)||2!=n.ba()))if(n.v&&4==cl(n))JM(n.Fa,0,n);else if(ii(n,"readystatechange"),4==cl(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(A2)[1]||null;if(!i&&Ct.self&&Ct.self.location){var s=Ct.self.location.protocol;i=s.substr(0,s.length-1)}r=!x6.test(i?i.toLowerCase():"")}t=r}if(t)ii(n,"complete"),ii(n,"success");else{n.m=6;try{var c=2<cl(n)?n.g.statusText:""}catch(p){c=""}n.j=c+" ["+n.ba()+"]",H2(n)}}finally{xD(n)}}}function xD(n,e){if(n.g){W2(n);const t=n.g,r=n.C[0]?dD:null;n.g=null,n.C=null,e||ii(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function W2(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function cl(n){return n.g?n.g.readyState:0}function z2(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case j2:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function hx(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function P6(n){let e="";return OM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):On(n,e,t))}function pv(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function q2(n){this.za=0,this.l=[],this.h=new vD,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=pv("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=pv("baseRetryDelayMs",5e3,n),this.$a=pv("retryDelaySeedMs",1e4,n),this.Ya=pv("forwardChannelMaxRetries",2,n),this.ra=pv("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new P2(n&&n.concurrentRequestLimit),this.Ca=new S6,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function fx(n){if(K2(n),3==n.G){var e=n.V++,t=ll(n.F);On(t,"SID",n.J),On(t,"RID",e),On(t,"TYPE","terminate"),gv(n,t),(e=new sv(n,n.h,e,void 0)).K=2,e.v=ND(ll(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=rV(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ov(e)}tV(n)}function OD(n){n.g&&(mx(n),n.g.cancel(),n.g=null)}function K2(n){OD(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),kD(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function px(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&RD(n)}function RD(n){F2(n.i)||n.m||(n.m=!0,KM(n.Ha,n),n.C=0)}function Y2(n,e){var t;t=e?e.m:n.V++;const r=ll(n.F);On(r,"SID",n.J),On(r,"RID",t),On(r,"AID",n.U),gv(n,r),n.o&&n.s&&hx(r,n.o,n.s),t=new sv(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Z2(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),cx(n.i,t),ix(t,r,e)}function gv(n,e){n.j&&ox({},function(t,r){On(e,r,t)})}function Z2(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ni(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=i[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let m=i[p].h;const v=i[p].g;if(m-=s,0>m)s=Math.max(0,i[p].h-100),h=!1;else try{N6(v,c,"req"+m+"_")}catch(E){r&&r(v)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Q2(n){n.g||n.u||(n.Y=1,KM(n.Ga,n),n.A=0)}function gx(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=rv(ni(n.Ga,n),eV(n,n.A)),n.A++,0))}function mx(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function J2(n){n.g=new sv(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ll(n.oa);On(e,"RID","rpc"),On(e,"SID",n.J),On(e,"CI",n.N?"0":"1"),On(e,"AID",n.U),gv(n,e),On(e,"TYPE","xmlhttp"),n.o&&n.s&&hx(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=ND(ll(e)),t.s=null,t.U=!0,T2(t,n)}function kD(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function X2(n,e){var t=null;if(n.g==e){kD(n),mx(n),n.g=null;var r=2}else{if(!lx(n.i,e))return;t=e.D,V2(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ii(r=bD(),new b2(r,t,e,i)),RD(n)}else Q2(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function F6(n,e){return!(L2(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=rv(ni(n.Ha,n,e),eV(n,n.C)),n.C++,0)))}(n,e)||2==r&&gx(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Hd(n,5);break;case 4:Hd(n,10);break;case 3:Hd(n,6);break;default:Hd(n,2)}}function eV(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Hd(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ni(n.jb,n);t||(t=new Gd("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||TD(t,"https"),ND(t)),function A6(n,e){const t=new vD;if(Ct.Image){const r=new Image;r.onload=hD(AD,t,r,"TestLoadImage: loaded",!0,e),r.onerror=hD(AD,t,r,"TestLoadImage: error",!1,e),r.onabort=hD(AD,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=hD(AD,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ji(2);n.G=0,n.j&&n.j.va(e),tV(n),K2(n)}function tV(n){n.G=0,n.I=-1,n.j&&((0!=B2(n.i).length||0!=n.l.length)&&(n.i.i.length=0,MM(n.l),n.l.length=0),n.j.ua())}function nV(n,e,t){let r=function _6(n){return n instanceof Gd?ll(n):new Gd(n,void 0)}(t);if(""!=r.i)e&&ID(r,e+"."+r.i),SD(r,r.m);else{const i=Ct.location;r=function y6(n,e,t,r){var i=new Gd(null,void 0);return n&&TD(i,n),e&&ID(i,e),t&&SD(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&OM(n.aa,function(i,s){On(r,s,i)}),t=n.sa,(e=n.D)&&t&&On(r,e,t),On(r,"VER",n.ma),gv(n,r),r}function rV(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Ba&&!n.qa?new dv({ib:!0}):n.qa)).L=n.H,e}function iV(){}function PD(){if(Zp&&!(10<=Number(YW)))throw Error("Environmental error: no available transport.")}function Cs(n,e){xr.call(this),this.g=new q2(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!fD(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fD(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new eg(this)}function sV(n){ex.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function oV(){tx.call(this),this.status=1}function eg(n){this.g=n}(Ke=ar.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nx.g(),this.C=function E2(n){return n.h||(n.h=n.i())}(this.u?this.u:nx),this.g.onreadystatechange=ni(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void G2(this,s)}n=t||"";const i=new Jp(this.headers);r&&ox(r,function(s,c){i.set(c,s)}),r=function HW(n){e:{var e=k6;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ct.FormData&&n instanceof Ct.FormData,!(0<=zL(O6,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{W2(this),0<this.B&&((this.K=function R6(n){return Zp&&function KW(){return function $W(n){var e=qW;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=YL(String(pD)).split("."),t=YL("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",s=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=xM(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||xM(0==i[2].length,0==s[2].length)||xM(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ni(this.pa,this)):this.A=JM(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){G2(this,s)}},Ke.pa=function(){void 0!==SM&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ii(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ii(this,"complete"),ii(this,"abort"),xD(this))},Ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xD(this,!0)),ar.Z.M.call(this)},Ke.Fa=function(){this.s||(this.F||this.v||this.l?$2(this):this.cb())},Ke.cb=function(){$2(this)},Ke.ba=function(){try{return 2<cl(this)?this.g.status:-1}catch(n){return-1}},Ke.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ke.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),M6(e)}},Ke.Da=function(){return this.m},Ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=q2.prototype).ma=8,Ke.G=1,Ke.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ke.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new sv(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=JL(s),e2(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Z2(this,i,e),On(t=ll(this.F),"RID",n),On(t,"CVER",22),this.D&&On(t,"X-HTTP-Session-Id",this.D),gv(this,t),this.o&&s&&hx(t,this.o,s),cx(this.i,i),this.Ra&&On(t,"TYPE","init"),this.ja?(On(t,"$req",e),On(t,"SID","null"),i.$=!0,ix(i,t,null)):ix(i,t,e),this.G=2}}else 3==this.G&&(n?Y2(this,n):0==this.l.length||F2(this.i)||Y2(this))},Ke.Ga=function(){if(this.u=null,J2(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=rv(ni(this.bb,this),n)}},Ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ji(10),OD(this),J2(this))},Ke.ab=function(){null!=this.v&&(this.v=null,OD(this),gx(this),ji(19))},Ke.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ji(2)):(this.h.info("Failed to ping google.com"),ji(1))},(Ke=iV.prototype).xa=function(){},Ke.wa=function(){},Ke.va=function(){},Ke.ua=function(){},Ke.Oa=function(){},PD.prototype.g=function(n,e){return new Cs(n,e)},ri(Cs,xr),Cs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),KM(ni(n.hb,n,e))),ji(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=nV(n,null,n.W),RD(n)},Cs.prototype.close=function(){fx(this.g)},Cs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,px(this.g,e)}else this.v?((e={}).__data__=qM(n),px(this.g,e)):px(this.g,n)},Cs.prototype.M=function(){this.g.j=null,delete this.j,fx(this.g),delete this.g,Cs.Z.M.call(this)},ri(sV,ex),ri(oV,tx),ri(eg,iV),eg.prototype.xa=function(){ii(this.g,"a")},eg.prototype.wa=function(n){ii(this.g,new sV(n))},eg.prototype.va=function(n){ii(this.g,new oV(n))},eg.prototype.ua=function(){ii(this.g,"b")},PD.prototype.createWebChannel=PD.prototype.g,Cs.prototype.send=Cs.prototype.u,Cs.prototype.open=Cs.prototype.m,Cs.prototype.close=Cs.prototype.close,wD.NO_ERROR=0,wD.TIMEOUT=8,wD.HTTP_ERROR=6,w2.COMPLETE="complete",C2.EventType=iv,iv.OPEN="a",iv.CLOSE="b",iv.ERROR="c",iv.MESSAGE="d",xr.prototype.listen=xr.prototype.N,ar.prototype.listenOnce=ar.prototype.O,ar.prototype.getLastError=ar.prototype.La,ar.prototype.getLastErrorCode=ar.prototype.Da,ar.prototype.getStatus=ar.prototype.ba,ar.prototype.getResponseJson=ar.prototype.Qa,ar.prototype.getResponseText=ar.prototype.ga,ar.prototype.send=ar.prototype.ea;var L6=al.createWebChannelTransport=function(){return new PD},V6=al.getStatEventTarget=function(){return bD()},_x=al.ErrorCode=wD,B6=al.EventType=w2,U6=al.Event=Bd,aV=al.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},j6=al.FetchXmlHttpFactory=dv,FD=al.WebChannel=C2,G6=al.XhrIo=ar;const lV="@firebase/firestore";class si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");let tg="9.8.0";const _c=new yi.Yd("@firebase/firestore");function yx(){return _c.logLevel}function Se(n,...e){if(_c.logLevel<=yi.in.DEBUG){const t=e.map(vx);_c.debug(`Firestore (${tg}): ${n}`,...t)}}function lr(n,...e){if(_c.logLevel<=yi.in.ERROR){const t=e.map(vx);_c.error(`Firestore (${tg}): ${n}`,...t)}}function LD(n,...e){if(_c.logLevel<=yi.in.WARN){const t=e.map(vx);_c.warn(`Firestore (${tg}): ${n}`,...t)}}function vx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Ze(n="Unexpected state"){const e=`FIRESTORE (${tg}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function _t(n,e){n||Ze()}function Ue(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends B.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class H6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(si.UNAUTHENTICATED))}shutdown(){}}class W6{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let c=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Or,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const m=c;e.enqueueRetryable((0,W.Z)(function*(){yield m.promise,yield s(r.currentUser)}))},p=m=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(m=>p(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Or)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t("string"==typeof r.accessToken),new cV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _t(null===e||"string"==typeof e),new si(e)}}class z6{constructor(e,t,r){this.type="FirstParty",this.user=si.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class q6{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new z6(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K6{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,Se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_t("string"==typeof t.token),this.p=t.token,new uV(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ds{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Y6(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ds.A=-1;class dV{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Y6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function St(n,e){return n<e?-1:n>e?1:0}function ng(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class cr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new we(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return cr.fromMillis(Date.now())}static fromDate(e){return cr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new cr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ht(e)}static min(){return new ht(new cr(0,0))}static max(){return new ht(new cr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function fV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $d(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mv{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ze(),void 0===r?r=e.length-t:r>e.length-t&&Ze(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mv?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),c=t.get(i);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wt extends mv{construct(e,t,r){return new Wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Wt(t)}static emptyPath(){return new Wt([])}}const Z6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rr extends mv{construct(e,t,r){return new Rr(e,t,r)}static isValidIdentifier(e){return Z6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new we(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new we(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new we(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(s(),i++)}if(s(),c)throw new we(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rr(t)}static emptyPath(){return new Rr([])}}class rg{constructor(e){this.fields=e,e.sort(Rr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ng(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const Q6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yc(n){if(_t(!!n),"string"==typeof n){let e=0;const t=Q6.exec(n);if(_t(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Wd(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function bx(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function gV(n){const e=n.mapValue.fields.__previous_value__;return bx(e)?gV(e):e}function _v(n){const e=yc(n.mapValue.fields.__local_write_time__.timestampValue);return new cr(e.seconds,e.nanos)}class J6{constructor(e,t,r,i,s,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class vc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vc&&e.projectId===this.projectId&&e.database===this.database}}function yv(n){return null==n}function vv(n){return 0===n&&1/n==-1/0}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Wt.fromString(e))}static fromName(e){return new Le(Wt.fromString(e).popFirst(5))}static empty(){return new Le(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Wt(e.slice()))}}const bc_mapValue={fields:{__type__:{stringValue:"__max__"}}};function zd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bx(n)?4:bV(n)?9007199254740991:10:Ze()}function da(n,e){if(n===e)return!0;const t=zd(n);if(t!==zd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _v(n).isEqual(_v(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=yc(r.timestampValue),c=yc(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Wd(n.bytesValue).isEqual(Wd(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return qn(r.geoPointValue.latitude)===qn(i.geoPointValue.latitude)&&qn(r.geoPointValue.longitude)===qn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return qn(r.integerValue)===qn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=qn(r.doubleValue),c=qn(i.doubleValue);return s===c?vv(s)===vv(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return ng(n.arrayValue.values||[],e.arrayValue.values||[],da);case 10:return function(r,i){const s=r.mapValue.fields||{},c=i.mapValue.fields||{};if(fV(s)!==fV(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!da(s[h],c[h])))return!1;return!0}(n,e);default:return Ze()}var i}function bv(n,e){return void 0!==(n.values||[]).find(t=>da(t,e))}function wc(n,e){if(n===e)return 0;const t=zd(n),r=zd(e);if(t!==r)return St(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return St(n.booleanValue,e.booleanValue);case 2:return function(i,s){const c=qn(i.integerValue||i.doubleValue),h=qn(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return _V(n.timestampValue,e.timestampValue);case 4:return _V(_v(n),_v(e));case 5:return St(n.stringValue,e.stringValue);case 6:return function(i,s){const c=Wd(i),h=Wd(s);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const c=i.split("/"),h=s.split("/");for(let p=0;p<c.length&&p<h.length;p++){const m=St(c[p],h[p]);if(0!==m)return m}return St(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const c=St(qn(i.latitude),qn(s.latitude));return 0!==c?c:St(qn(i.longitude),qn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const c=i.values||[],h=s.values||[];for(let p=0;p<c.length&&p<h.length;++p){const m=wc(c[p],h[p]);if(m)return m}return St(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===bc_mapValue&&s===bc_mapValue)return 0;if(i===bc_mapValue)return 1;if(s===bc_mapValue)return-1;const c=i.fields||{},h=Object.keys(c),p=s.fields||{},m=Object.keys(p);h.sort(),m.sort();for(let v=0;v<h.length&&v<m.length;++v){const E=St(h[v],m[v]);if(0!==E)return E;const T=wc(c[h[v]],p[m[v]]);if(0!==T)return T}return St(h.length,m.length)}(n.mapValue,e.mapValue);default:throw Ze()}}function _V(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return St(n,e);const t=yc(n),r=yc(e),i=St(t.seconds,r.seconds);return 0!==i?i:St(t.nanos,r.nanos)}function ig(n){return wx(n)}function wx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=yc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Wd(n.bytesValue).toBase64():"referenceValue"in n?Le.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const c of r.values||[])s?s=!1:i+=",",i+=wx(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",c=!0;for(const h of i)c?c=!1:s+=",",s+=`${h}:${wx(r.fields[h])}`;return s+"}"}(n.mapValue):Ze();var e}function Ex(n){return!!n&&"integerValue"in n}function wv(n){return!!n&&"arrayValue"in n}function yV(n){return!!n&&"nullValue"in n}function vV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function BD(n){return!!n&&"mapValue"in n}function Ev(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $d(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ev(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ev(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class wi{constructor(e){this.value=e}static empty(){return new wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!BD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ev(t)}setAll(e){let t=Rr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Ev(c):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());BD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return da(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];BD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$d(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wi(Ev(this.value))}}function CV(n){const e=[];return $d(n.fields,(t,r)=>{const i=new Rr([t]);if(BD(r)){const s=CV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const c of s)e.push(i.child(c))}else e.push(i)}),new rg(e)}class In{constructor(e,t,r,i,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=c}static newInvalidDocument(e){return new In(e,0,ht.min(),ht.min(),wi.empty(),0)}static newFoundDocument(e,t,r){return new In(e,1,t,ht.min(),r,0)}static newNoDocument(e,t){return new In(e,2,t,ht.min(),wi.empty(),0)}static newUnknownDocument(e,t){return new In(e,3,t,ht.min(),wi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function tz(n){return new Oo(n.readTime,n.key,-1)}class Oo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Oo(ht.min(),Le.empty(),-1)}static max(){return new Oo(ht.max(),Le.empty(),-1)}}function TV(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Le.comparator(n.documentKey,e.documentKey),0!==t?t:St(n.largestBatchId,e.largestBatchId))}class Qn{constructor(e,t){this.comparator=e,this.root=t||oi.EMPTY}insert(e,t){return new Qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oi.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new GD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new GD(this.root,e,this.comparator,!1)}getReverseIterator(){return new GD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new GD(this.root,e,this.comparator,!0)}}class GD{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class oi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:oi.RED,this.left=null!=i?i:oi.EMPTY,this.right=null!=s?s:oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new oi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return oi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ze();const e=this.left.check();if(e!==this.right.check())throw Ze();return e+(this.isRed()?0:1)}}oi.EMPTY=null,oi.RED=!0,oi.BLACK=!1,oi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze()}get value(){throw Ze()}get color(){throw Ze()}get left(){throw Ze()}get right(){throw Ze()}copy(n,e,t,r,i){return this}insert(n,e,t){return new oi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IV(this.data.getIterator())}getIteratorFrom(e){return new IV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class IV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class nz{constructor(e,t=null,r=[],i=[],s=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=c,this.endAt=h,this.P=null}}function SV(n,e=null,t=[],r=[],i=null,s=null,c=null){return new nz(n,e,t,r,i,s,c)}function Yd(n){const e=Ue(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+ig(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),yv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ig(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ig(r)).join(",")),e.P=t}return e.P}function Dv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!dz(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!da(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OV(n.startAt,e.startAt)&&OV(n.endAt,e.endAt)}function HD(n){return Le.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class ai extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new iz(e,t,r):"array-contains"===t?new az(e,r):"in"===t?new lz(e,r):"not-in"===t?new cz(e,r):"array-contains-any"===t?new uz(e,r):new ai(e,t,r)}static V(e,t,r){return"in"===t?new sz(e,r):new oz(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(wc(t,this.value)):null!==t&&zd(this.value)===zd(t)&&this.v(wc(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ze()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class iz extends ai{constructor(e,t,r){super(e,t,r),this.key=Le.fromName(r.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.v(t)}}class sz extends ai{constructor(e,t){super(e,"in",t),this.keys=MV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oz extends ai{constructor(e,t){super(e,"not-in",t),this.keys=MV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Le.fromName(r.referenceValue))}class az extends ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wv(t)&&bv(t.arrayValue,this.value)}}class lz extends ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&bv(this.value.arrayValue,t)}}class cz extends ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(bv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!bv(this.value.arrayValue,t)}}class uz extends ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>bv(this.value.arrayValue,r))}}class Ec{constructor(e,t){this.position=e,this.inclusive=t}}class og{constructor(e,t="asc"){this.field=e,this.dir=t}}function dz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function xV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],c=n.position[i];if(r=s.field.isKeyField()?Le.comparator(Le.fromName(c.referenceValue),t.key):wc(c,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function OV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!da(n.position[t],e.position[t]))return!1;return!0}class ul{constructor(e,t=null,r=[],i=[],s=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=p,this.D=null,this.C=null}}function ag(n){return new ul(n)}function lg(n){const e=Ue(n);if(null===e.D){e.D=[];const t=function Tx(n){for(const e of n.filters)if(e.S())return e.field;return null}(e),r=function Dx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new og(t)),e.D.push(new og(Rr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new og(Rr.keyField(),s))}}}return e.D}function to(n){const e=Ue(n);if(!e.C)if("F"===e.limitType)e.C=SV(e.path,e.collectionGroup,lg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of lg(e))t.push(new og(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Ec(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ec(e.startAt.position,e.startAt.inclusive):null;e.C=SV(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function Tv(n,e){return Dv(to(n),to(e))&&n.limitType===e.limitType}function PV(n){return`${Yd(to(n))}|lt:${n.limitType}`}function Sx(n){return`Query(target=${function rz(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ig(r.value)}`;var r}).join(", ")}]`),yv(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ig(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ig(t)).join(",")),`Target(${e})`}(to(n))}; limitType=${n.limitType})`}function Nx(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Le.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,c){const h=xV(i,s,c);return i.inclusive?h<=0:h<0}(t.startAt,lg(t),r)||t.endAt&&!function(i,s,c){const h=xV(i,s,c);return i.inclusive?h>=0:h>0}(t.endAt,lg(t),r)));var t,r}function LV(n){return(e,t)=>{let r=!1;for(const i of lg(n)){const s=fz(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function fz(n,e,t){const r=n.field.isKeyField()?Le.comparator(e.key,t.key):function(i,s,c){const h=s.data.field(i),p=c.data.field(i);return null!==h&&null!==p?wc(h,p):Ze()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ze()}}function VV(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vv(e)?"-0":e}}function BV(n){return{integerValue:""+n}}function UV(n,e){return function mV(n){return"number"==typeof n&&Number.isInteger(n)&&!vv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?BV(e):VV(n,e)}class WD{constructor(){this._=void 0}}function pz(n,e,t){return n instanceof cg?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Zd?GV(n,e):n instanceof Qd?HV(n,e):function(r,i){const s=jV(r,i),c=$V(s)+$V(r.k);return Ex(s)&&Ex(r.k)?BV(c):VV(r.M,c)}(n,e)}function gz(n,e,t){return n instanceof Zd?GV(n,e):n instanceof Qd?HV(n,e):t}function jV(n,e){return n instanceof ug?Ex(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class cg extends WD{}class Zd extends WD{constructor(e){super(),this.elements=e}}function GV(n,e){const t=WV(e);for(const r of n.elements)t.some(i=>da(i,r))||t.push(r);return{arrayValue:{values:t}}}class Qd extends WD{constructor(e){super(),this.elements=e}}function HV(n,e){let t=WV(e);for(const r of n.elements)t=t.filter(i=>!da(i,r));return{arrayValue:{values:t}}}class ug extends WD{constructor(e,t){super(),this.M=e,this.k=t}}function $V(n){return qn(n.integerValue||n.doubleValue)}function WV(n){return wv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Iv{constructor(e,t){this.field=e,this.transform=t}}class _z{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class qD{}function yz(n,e,t){n instanceof Sv?function(r,i,s){const c=r.value.clone(),h=YV(r.fieldTransforms,i,s.transformResults);c.setAll(h),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Jd?function(r,i,s){if(!zD(r.precondition,i))return void i.convertToUnknownDocument(s.version);const c=YV(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(KV(r)),h.setAll(c),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ax(n,e,t){var i;n instanceof Sv?function(r,i,s){if(!zD(r.precondition,i))return;const c=r.value.clone(),h=ZV(r.fieldTransforms,s,i);c.setAll(h),i.convertToFoundDocument(qV(i),c).setHasLocalMutations()}(n,e,t):n instanceof Jd?function(r,i,s){if(!zD(r.precondition,i))return;const c=ZV(r.fieldTransforms,s,i),h=i.data;h.setAll(KV(r)),h.setAll(c),i.convertToFoundDocument(qV(i),h).setHasLocalMutations()}(n,e,t):zD(n.precondition,i=e)&&i.convertToNoDocument(ht.min())}function vz(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=jV(r.transform,i||null);null!=s&&(null==t&&(t=wi.empty()),t.set(r.field,s))}return t||null}function zV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ng(t,r,(i,s)=>function mz(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Zd&&r instanceof Zd||t instanceof Qd&&r instanceof Qd?ng(t.elements,r.elements,da):t instanceof ug&&r instanceof ug?da(t.k,r.k):t instanceof cg&&r instanceof cg);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function qV(n){return n.isFoundDocument()?n.version:ht.min()}class Sv extends qD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Jd extends qD{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}}function KV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function YV(n,e,t){const r=new Map;_t(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],c=s.transform,h=e.data.field(s.field);r.set(s.field,gz(c,h,t[i]))}return r}function ZV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,c=t.data.field(i.field);r.set(i.field,pz(s,c,e))}return r}class Nv extends qD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Mx extends qD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class bz{constructor(e){this.count=e}}var dr,zt;function QV(n){switch(n){default:return Ze();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function JV(n){if(void 0===n)return lr("GRPC error has no .code"),ne.UNKNOWN;switch(n){case dr.OK:return ne.OK;case dr.CANCELLED:return ne.CANCELLED;case dr.UNKNOWN:return ne.UNKNOWN;case dr.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case dr.INTERNAL:return ne.INTERNAL;case dr.UNAVAILABLE:return ne.UNAVAILABLE;case dr.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case dr.NOT_FOUND:return ne.NOT_FOUND;case dr.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case dr.ABORTED:return ne.ABORTED;case dr.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case dr.DATA_LOSS:return ne.DATA_LOSS;default:return Ze()}}(zt=dr||(dr={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";class Cc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$d(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pV(this.inner)}size(){return this.innerSize}}const wz=new Qn(Le.comparator);function no(){return wz}const Ez=new Qn(Le.comparator);function xx(...n){let e=Ez;for(const t of n)e=e.insert(t.key,t);return e}function Av(){return new Cc(n=>n.toString(),(n,e)=>n.isEqual(e))}const Cz=new Qn(Le.comparator),Dz=new _n(Le.comparator);function Xt(...n){let e=Dz;for(const t of n)e=e.add(t);return e}const Tz=new _n(St);function KD(){return Tz}class Mv{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,xv.createSynthesizedTargetChangeForCurrentChange(e,t)),new Mv(ht.min(),r,KD(),no(),Xt())}}class xv{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new xv(wr.EMPTY_BYTE_STRING,t,Xt(),Xt(),Xt())}}class YD{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class XV{constructor(e,t){this.targetId=e,this.$=t}}class eB{constructor(e,t,r=wr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class tB{constructor(){this.B=0,this.L=rB(),this.U=wr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Xt(),t=Xt(),r=Xt();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ze()}}),new xv(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=rB()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Iz{constructor(e){this.nt=e,this.st=new Map,this.it=no(),this.rt=nB(),this.ot=new _n(St)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Ze()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const s=i.target;if(HD(s))if(0===r){const c=new Le(s.path);this.ct(t,c,In.newNoDocument(c,ht.min()))}else _t(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,c)=>{const h=this.wt(c);if(h){if(s.current&&HD(h.target)){const p=new Le(h.target.path);null!==this.it.get(p)||this.It(c,p)||this.ct(c,p,In.newNoDocument(p,e))}s.j&&(t.set(c,s.H()),s.J())}});let r=Xt();this.rt.forEach((s,c)=>{let h=!0;c.forEachWhile(p=>{const m=this.wt(p);return!m||2===m.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.it.forEach((s,c)=>c.setReadTime(e));const i=new Mv(e,t,this.ot,this.it,r);return this.it=no(),this.rt=nB(),this.ot=new _n(St),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new tB,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new _n(St),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Se("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new tB),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function nB(){return new Qn(Le.comparator)}function rB(){return new Qn(Le.comparator)}const Sz={asc:"ASCENDING",desc:"DESCENDING"},Nz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Az{constructor(e,t){this.databaseId=e,this.N=t}}function Ov(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iB(n,e){return n.N?e.toBase64():e.toUint8Array()}function Mz(n,e){return Ov(n,e.toTimestamp())}function kr(n){return _t(!!n),ht.fromTimestamp(function(e){const t=yc(e);return new cr(t.seconds,t.nanos)}(n))}function Ox(n,e){return(t=n,new Wt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function sB(n){const e=Wt.fromString(n);return _t(pB(e)),e}function Rv(n,e){return Ox(n.databaseId,e.path)}function ha(n,e){const t=sB(e);if(t.get(1)!==n.databaseId.projectId)throw new we(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(aB(t))}function Rx(n,e){return Ox(n.databaseId,e)}function kv(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aB(n){return _t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lB(n,e,t){return{name:Rv(n,e),fields:t.value.mapValue.fields}}function uB(n,e){return{documents:[Rx(n,e.path)]}}function dB(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Rx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Rx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const m=p.map(v=>function(E){if("=="===E.op){if(vV(E.value))return{unaryFilter:{field:dg(E.field),op:"IS_NAN"}};if(yV(E.value))return{unaryFilter:{field:dg(E.field),op:"IS_NULL"}}}else if("!="===E.op){if(vV(E.value))return{unaryFilter:{field:dg(E.field),op:"IS_NOT_NAN"}};if(yV(E.value))return{unaryFilter:{field:dg(E.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dg(E.field),op:Fz(E.op),value:E.value}}}(v));return 1===m.length?m[0]:{compositeFilter:{op:"AND",filters:m}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(m=>{return{field:dg((v=m).field),direction:Pz(v.dir)};var v})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=(m=e.limit,n.N||yv(m)?m:{value:m});var m,h,p;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function hB(n){let e=function oB(n){const e=sB(n);return 4===e.length?Wt.emptyPath():aB(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){_t(1===r);const v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let s=[];t.where&&(s=fB(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(v=>{return new og(hg((E=v).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let h=null;t.limit&&(h=function(v){let E;return E="object"==typeof v?v.value:v,yv(E)?null:E}(t.limit));let p=null;var v;t.startAt&&(p=new Ec((v=t.startAt).values||[],!!v.before));let m=null;return t.endAt&&(m=function(v){return new Ec(v.values||[],!v.before)}(t.endAt)),function RV(n,e,t,r,i,s,c,h){return new ul(n,e,t,r,i,s,c,h)}(e,i,c,s,h,"F",p,m)}function fB(n){return n?void 0!==n.unaryFilter?[Vz(n)]:void 0!==n.fieldFilter?[Lz(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>fB(e)).reduce((e,t)=>e.concat(t)):Ze():[]}function Pz(n){return Sz[n]}function Fz(n){return Nz[n]}function dg(n){return{fieldPath:n.canonicalString()}}function hg(n){return Rr.fromServerFormat(n.fieldPath)}function Lz(n){return ai.create(hg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ze()}}(n.fieldFilter.op),n.fieldFilter.value)}function Vz(n){switch(n.unaryFilter.op){case"IS_NAN":const e=hg(n.unaryFilter.field);return ai.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=hg(n.unaryFilter.field);return ai.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hg(n.unaryFilter.field);return ai.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=hg(n.unaryFilter.field);return ai.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ze()}}function Bz(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}const bB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let i=0,s=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++s,c&&s===i&&t()},p=>r(p))}),c=!0,s===i&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(i=>i?re.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}}function Xd(n){return"IndexedDbTransactionError"===n.name}class Fx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&yz(s,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Ax(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Ax(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ht.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xt())}isEqual(e){return this.batchId===e.batchId&&ng(this.mutations,e.mutations,(t,r)=>zV(t,r))&&ng(this.baseMutations,e.baseMutations,(t,r)=>zV(t,r))}}class Lx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){_t(e.mutations.length===r.length);let i=Cz;const s=e.mutations;for(let c=0;c<s.length;c++)i=i.insert(s[c].key,r[c].version);return new Lx(e,t,r,i)}}class Vx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Dc{constructor(e,t,r,i,s=ht.min(),c=ht.min(),h=wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new Dc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Dc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Dc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class CB{constructor(e){this.Jt=e}}function Bx(n){const e=hB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?function kV(n,e,t){return new ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}(e,e.limit,"L"):e}class rh{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(qn(e.integerValue));else if("doubleValue"in e){const r=qn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),vv(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Wd(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?bV(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Ze()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Le.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}rh.fe=new rh;class p8{constructor(){this.qe=new Gx}addToCollectionParentIndex(e,t){return this.qe.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Oo.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class Gx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(Wt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(Wt.comparator)).toArray()}}new Uint8Array(0);class is{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new is(e,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}is.DEFAULT_COLLECTION_PERCENTILE=10,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,is.DEFAULT=new is(41943040,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),is.DISABLED=new is(-1,0,0);class oh{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new oh(0)}static yn(){return new oh(-1)}}function ah(n){return $x.apply(this,arguments)}function $x(){return $x=(0,W.Z)(function*(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==bB)throw n;Se("LocalStore","Unexpectedly lost primary lease")}),$x.apply(this,arguments)}class T8{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const s of r)s.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const s of t)s.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Le.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):function Ix(n){return null!==n.collectionGroup}(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new Le(t)).next(r=>{let i=xx();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let s=xx();return this.indexManager.getCollectionParents(e,i).next(c=>re.forEach(c,h=>{const p=(m=t,v=h.child(i),new ul(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,v;return this.zs(e,p,r).next(m=>{m.forEach((v,E)=>{s=s.insert(v,E)})})}).next(()=>s))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const c of s)for(const h of c.mutations){const p=h.key;let m=i.get(p);null==m&&(m=In.newInvalidDocument(p),i=i.insert(p,m)),Ax(h,m,c.localWriteTime),m.isFoundDocument()||(i=i.remove(p))}}).next(()=>(i.forEach((s,c)=>{Nx(t,c)||(i=i.remove(s))}),i))}}class Kx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=Xt(),i=Xt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Kx(e,t.fromCache,r,i)}}class GB{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(s=>s||this.ei(e,t,i,r)).next(s=>s||this.ni(e,t))}ti(e,t){return re.resolve(null)}ei(e,t,r,i){return function hz(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(ht.min())?this.ni(e,t):this.Zs.Ks(e,r).next(s=>{const c=this.si(t,s);return this.ii(t,c,r,i)?this.ni(e,t):(yx()<=yi.in.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sx(t)),this.ri(e,c,t,function DV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ht.fromTimestamp(1e9===r?new cr(t+1,0):new cr(t,r));return new Oo(i,Le.empty(),e)}(i,-1)))})}si(e,t){let r=new _n(LV(e));return t.forEach((i,s)=>{Nx(e,s)&&(r=r.add(s))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ni(e,t){return yx()<=yi.in.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Sx(t)),this.Zs.Qs(e,t,Oo.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(s=>(t.forEach(c=>{s=s.insert(c.key,c)}),s))}}class I8{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Qn(St),this.ai=new Cc(s=>Yd(s),Dv),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new T8(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function $B(n,e){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,W.Z)(function*(n,e){const t=Ue(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(s=>(i=s,t.li(e),t.Bs.getAllMutationBatches(r))).next(s=>{const c=[],h=[];let p=Xt();for(const m of i){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of s){h.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.fi.Ks(r,p).next(m=>({di:m,removedBatchIds:c,addedBatchIds:h}))})})}),Yx.apply(this,arguments)}function S8(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,h,p,m){const v=p.batch,E=v.keys();let T=re.resolve();return E.forEach(N=>{T=T.next(()=>m.getEntry(h,N)).next(O=>{const z=p.docVersions.get(N);_t(null!==z),O.version.compareTo(z)<0&&(v.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),m.addEntry(O)))})}),T.next(()=>c.Bs.removeMutationBatch(h,v))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function WB(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function N8(n,e){const t=Ue(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const h=[];e.targetChanges.forEach((m,v)=>{const E=i.get(v);if(!E)return;h.push(t.fs.removeMatchingKeys(s,m.removedDocuments,v).next(()=>t.fs.addMatchingKeys(s,m.addedDocuments,v)));let T=E.withSequenceNumber(s.currentSequenceNumber);var N,O,z;e.targetMismatches.has(v)?T=T.withResumeToken(wr.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),i=i.insert(v,T),O=T,z=m,(0===(N=E).resumeToken.approximateByteSize()||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(s,T))});let p=no();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))}),h.push(function zB(n,e,t){let r=Xt();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let s=no();return t.forEach((c,h)=>{const p=i.get(c);h.isNoDocument()&&h.version.isEqual(ht.min())?(e.removeEntry(c,h.readTime),s=s.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(h),s=s.insert(c,h)):Se("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),s})}(s,c,e.documentUpdates).next(m=>{p=m})),!r.isEqual(ht.min())){const m=t.fs.getLastRemoteSnapshotVersion(s).next(v=>t.fs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(m)}return re.waitFor(h).next(()=>c.apply(s)).next(()=>t.fi.Gs(s,p)).next(()=>p)}).then(s=>(t.ui=i,s))}function A8(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function mg(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(s=>s?(i=s,re.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new Dc(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function _g(n,e,t){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,W.Z)(function*(n,e,t){const r=Ue(n),i=r.ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Xd(c))throw c;Se("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),Zx.apply(this,arguments)}function s1(n,e,t){const r=Ue(n);let i=ht.min(),s=Xt();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,m){const v=Ue(h),E=v.ai.get(m);return void 0!==E?re.resolve(v.ui.get(E)):v.fs.getTargetData(p,m)}(r,c,to(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{s=p})}).next(()=>r.oi.Qs(c,e,t?i:ht.min(),t?s:Xt())).next(h=>(function YB(n,e,t){let r=ht.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ci.set(e,r)}(r,function FV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),h),{documents:h,_i:s})))}class O8{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return re.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Bx(r.bundledQuery),readTime:kr(r.readTime)}),re.resolve();var r}}class R8{constructor(){this.overlays=new Qn(Le.comparator),this.Ii=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Xt(e,t,s)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const i=Av(),s=t.length+1,c=new Le(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return re.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Qn((m,v)=>m-v);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=s.get(m.largestBatchId);null===v&&(v=Av(),s=s.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=Av(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,v)=>h.set(m,v)),!(h.size()>=i)););return re.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Vx(t,r));let s=this.Ii.get(t);void 0===s&&(s=Xt(),this.Ii.set(t,s)),this.Ii.set(t,s.add(r.key))}}class Xx{constructor(){this.Ti=new _n(Fr.Ei),this.Ai=new _n(Fr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Fr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Fr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Le(new Wt([])),r=new Fr(t,e),i=new Fr(t,e+1),s=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),s.push(c.key)}),s}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Le(new Wt([])),r=new Fr(t,e),i=new Fr(t,e+1);let s=Xt();return this.Ai.forEachInRange([r,i],c=>{s=s.add(c.key)}),s}containsKey(e){const t=new Fr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Fr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Le.comparator(e.key,t.key)||St(e.Ci,t.Ci)}static Ri(e,t){return St(e.Ci,t.Ci)||Le.comparator(e.key,t.key)}}class k8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new _n(Fr.Ei)}checkEmpty(e){return re.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const s=this.xi;this.xi++;const c=new Fx(s,t,r,i);this.Bs.push(c);for(const h of i)this.Ni=this.Ni.add(new Fr(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),s=i<0?0:i;return re.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return re.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fr(t,0),i=new Fr(t,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([r,i],c=>{const h=this.ki(c.Ci);s.push(h)}),re.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(St);return t.forEach(i=>{const s=new Fr(i,0),c=new Fr(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,c],h=>{r=r.add(h.Ci)})}),re.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Le.isDocumentKey(s)||(s=s.child(""));const c=new Fr(new Le(s),0);let h=new _n(St);return this.Ni.forEachWhile(p=>{const m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(p.Ci)),!0)},c),re.resolve(this.Oi(h))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){_t(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return re.forEach(t.mutations,i=>{const s=new Fr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Fr(t,0),i=this.Ni.firstAfterOrEqual(r);return re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return re.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class P8{constructor(e){this.$i=e,this.docs=new Qn(Le.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let r=no();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():In.newInvalidDocument(i))}),re.resolve(r)}getAllFromCollection(e,t,r){let i=no();const s=new Le(t.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||TV(tz(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return re.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Ze()}Bi(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new F8(this)}getSize(e){return re.resolve(this.size)}}class F8 extends class w8{constructor(){this.changes=new Cc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class L8{constructor(e){this.persistence=e,this.Li=new Cc(t=>Yd(t),Dv),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Xx,this.targetCount=0,this.Ki=oh.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),re.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new oh(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Tn(t),re.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Li.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Li.delete(c),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),re.waitFor(s).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(c=>{s.push(i.markPotentiallyOrphaned(e,c))}),re.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.qi.containsKey(t))}}class V8{constructor(e,t){this.Gi={},this.overlays={},this.es=new Ds(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new L8(this),this.indexManager=new p8,this.ds=new P8(r=>this.referenceDelegate.Qi(r)),this.M=new CB(t),this._s=new O8(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new k8(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Se("MemoryPersistence","Starting transaction:",e);const i=new B8(this.es.next());return this.referenceDelegate.ji(),r(i).next(s=>this.referenceDelegate.Wi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zi(e,t){return re.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class B8 extends class i8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}{constructor(e){super(),this.currentSequenceNumber=e}}class eO{constructor(e){this.persistence=e,this.Hi=new Xx,this.Ji=null}static Yi(e){return new eO(e)}get Xi(){if(this.Ji)return this.Ji;throw Ze()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Xi,r=>{const i=Le.fromPath(r);return this.Zi(e,i).next(s=>{s||t.removeEntry(i,ht.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return re.or([()=>re.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}class rO{constructor(){this.activeTargetIds=KD()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JB{constructor(){this.Ur=new rO,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new rO,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class U8{Kr(e){}shutdown(){}}class XB{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const j8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class G8{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class H8 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,s){const c=this.ho(e,t);Se("RestConnection","Sending: ",c,r);const h={};return this.lo(h,i,s),this.fo(e,c,h,r).then(p=>(Se("RestConnection","Received: ",p),p),p=>{throw LD("RestConnection",`${e} failed with error: `,p,"url: ",c,"request:",r),p})}_o(e,t,r,i,s){return this.co(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+tg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.uo}/v1/${t}:${j8[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,c)=>{const h=new G6;h.listenOnce(B6.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case _x.NO_ERROR:const m=h.getResponseJson();Se("Connection","XHR received:",JSON.stringify(m)),s(m);break;case _x.TIMEOUT:Se("Connection",'RPC "'+e+'" timed out'),c(new we(ne.DEADLINE_EXCEEDED,"Request time out"));break;case _x.HTTP_ERROR:const v=h.getStatus();if(Se("Connection",'RPC "'+e+'" failed with status:',v,"response text:",h.getResponseText()),v>0){const E=h.getResponseJson().error;if(E&&E.status&&E.message){const T=function(N){const O=N.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(O)>=0?O:ne.UNKNOWN}(E.status);c(new we(T,E.message))}else c(new we(ne.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new we(ne.UNAVAILABLE,"Connection failed."));break;default:Ze()}}finally{Se("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=L6(),c=V6(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new j6({})),this.lo(h.initMessageHeaders,t,r),(0,B.uI)()||(0,B.b$)()||(0,B.d)()||(0,B.w1)()||(0,B.Mn)()||(0,B.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");Se("Connection","Creating WebChannel: "+p,h);const m=s.createWebChannel(p,h);let v=!1,E=!1;const T=new G8({Jr:O=>{E?Se("Connection","Not sending because WebChannel is closed:",O):(v||(Se("Connection","Opening WebChannel transport."),m.open(),v=!0),Se("Connection","WebChannel sending:",O),m.send(O))},Yr:()=>m.close()}),N=(O,z,ae)=>{O.listen(z,Re=>{try{ae(Re)}catch(ke){setTimeout(()=>{throw ke},0)}})};return N(m,FD.EventType.OPEN,()=>{E||Se("Connection","WebChannel transport opened.")}),N(m,FD.EventType.CLOSE,()=>{E||(E=!0,Se("Connection","WebChannel transport closed"),T.ro())}),N(m,FD.EventType.ERROR,O=>{E||(E=!0,LD("Connection","WebChannel transport errored:",O),T.ro(new we(ne.UNAVAILABLE,"The operation could not be completed")))}),N(m,FD.EventType.MESSAGE,O=>{var z;if(!E){const ae=O.data[0];_t(!!ae);const Re=ae,ke=Re.error||(null===(z=Re[0])||void 0===z?void 0:z.error);if(ke){Se("Connection","WebChannel received error:",ke);const Ye=ke.status;let Qe=function(rt){const yt=dr[rt];if(void 0!==yt)return JV(yt)}(Ye),nt=ke.message;void 0===Qe&&(Qe=ne.INTERNAL,nt="Unknown error status: "+Ye+" with message "+ke.message),E=!0,T.ro(new we(Qe,nt)),m.close()}else Se("Connection","WebChannel received:",ae),T.oo(ae)}}),N(c,U6.STAT_EVENT,O=>{O.stat===aV.PROXY?Se("Connection","Detected buffering proxy"):O.stat===aV.NOPROXY&&Se("Connection","Detected no buffering proxy")}),setTimeout(()=>{T.io()},0),T}}function l1(){return"undefined"!=typeof document?document:null}function $v(n){return new Az(n,!0)}class sO{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class tU{constructor(e,t,r,i,s,c,h,p){this.Yn=e,this.Vo=r,this.vo=i,this.So=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new sO(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,W.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,W.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,W.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ne.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new we(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,W.Z)(function*(){e.state=0,e.start()}))}jo(e){return Se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $8 extends tU{constructor(e,t,r,i,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=s}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Oz(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:Ze(),i=e.targetChange.targetIds||[],s=function(p,m){return p.N?(_t(void 0===m||"string"==typeof m),wr.fromBase64String(m||"")):(_t(void 0===m||m instanceof Uint8Array),wr.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const m=void 0===p.code?ne.UNKNOWN:JV(p.code);return new we(m,p.message||"")}(c);t=new eB(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=ha(n,r.document.name),s=kr(r.document.updateTime),c=new wi({mapValue:{fields:r.document.fields}}),h=In.newFoundDocument(i,s,c);t=new YD(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=ha(n,r.document),s=r.readTime?kr(r.readTime):ht.min(),c=In.newNoDocument(i,s);t=new YD([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=ha(n,r.document);t=new YD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ze();{const r=e.filter,s=new bz(r.count||0);t=new XV(r.targetId,s)}}var p;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return ht.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?ht.min():s.readTime?kr(s.readTime):ht.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=kv(this.M),t.addTarget=function(i,s){let c;const h=s.target;return c=HD(h)?{documents:uB(i,h)}:{query:dB(i,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=iB(i,s.resumeToken):s.snapshotVersion.compareTo(ht.min())>0&&(c.readTime=Ov(i,s.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function kz(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ze()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=kv(this.M),t.removeTarget=e,this.Lo(t)}}class W8 extends tU{constructor(e,t,r,i,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Rz(n,e){return n&&n.length>0?(_t(void 0!==e),n.map(t=>function(r,i){let s=kr(r.updateTime?r.updateTime:i);return s.isEqual(ht.min())&&(s=kr(i)),new _z(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.tu(r,t)}return _t(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=kv(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function Pv(n,e){let t;if(e instanceof Sv)t={update:lB(n,e.key,e.value)};else if(e instanceof Nv)t={delete:Rv(n,e.key)};else if(e instanceof Jd)t={update:lB(n,e.key,e.data),updateMask:Bz(e.fieldMask)};else{if(!(e instanceof Mx))return Ze();t={verify:Rv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const c=s.transform;if(c instanceof cg)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Zd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Qd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ug)return{fieldPath:s.field.canonicalString(),increment:c.k};throw Ze()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Mz(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Ze()),t;var i}(this.M,r))};this.Lo(t)}}class z8 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new we(ne.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new we(ne.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So._o(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new we(ne.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class q8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(lr(t),this.uu=!1):Se("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class K8{constructor(e,t,r,i,s){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(h=>{r.enqueueAndForget((0,W.Z)(function*(){var p;Sc(c)&&(Se("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,W.Z)(function*(m){const v=Ue(m);v.wu.add(4),yield yg(v),v.yu.set("Unknown"),v.wu.delete(4),yield Wv(v)}),function(m){return p.apply(this,arguments)})(c))}))}),this.yu=new q8(r,i)}}function Wv(n){return oO.apply(this,arguments)}function oO(){return oO=(0,W.Z)(function*(n){if(Sc(n))for(const e of n.mu)yield e(!0)}),oO.apply(this,arguments)}function yg(n){return aO.apply(this,arguments)}function aO(){return aO=(0,W.Z)(function*(n){for(const e of n.mu)yield e(!1)}),aO.apply(this,arguments)}function c1(n,e){const t=Ue(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),uO(t)?cO(t):bg(t).Mo()&&lO(t,e))}function zv(n,e){const t=Ue(n),r=bg(t);t._u.delete(e),r.Mo()&&nU(t,e),0===t._u.size&&(r.Mo()?r.$o():Sc(t)&&t.yu.set("Unknown"))}function lO(n,e){n.pu.Z(e.targetId),bg(n).Ho(e)}function nU(n,e){n.pu.Z(e),bg(n).Jo(e)}function cO(n){n.pu=new Iz({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),bg(n).start(),n.yu.au()}function uO(n){return Sc(n)&&!bg(n).ko()&&n._u.size>0}function Sc(n){return 0===Ue(n).wu.size}function rU(n){n.pu=void 0}function Y8(n){return dO.apply(this,arguments)}function dO(){return dO=(0,W.Z)(function*(n){n._u.forEach((e,t)=>{lO(n,e)})}),dO.apply(this,arguments)}function Z8(n,e){return hO.apply(this,arguments)}function hO(){return hO=(0,W.Z)(function*(n,e){rU(n),uO(n)?(n.yu.lu(e),cO(n)):n.yu.set("Unknown")}),hO.apply(this,arguments)}function Q8(n,e,t){return fO.apply(this,arguments)}function fO(){return fO=(0,W.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof eB&&2===e.state&&e.cause)try{yield(r=(0,W.Z)(function*(i,s){const c=s.cause;for(const h of s.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i._u.delete(h),i.pu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield u1(n,r)}else if(e instanceof YD?n.pu.ut(e):e instanceof XV?n.pu._t(e):n.pu.ht(e),!t.isEqual(ht.min()))try{const r=yield WB(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const c=i.pu.yt(s);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const m=i._u.get(p);m&&i._u.set(p,m.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach(h=>{const p=i._u.get(h);if(!p)return;i._u.set(h,p.withResumeToken(wr.EMPTY_BYTE_STRING,p.snapshotVersion)),nU(i,h);const m=new Dc(p.target,h,1,p.sequenceNumber);lO(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Se("RemoteStore","Failed to raise snapshot:",r),yield u1(n,r)}var r}),fO.apply(this,arguments)}function u1(n,e,t){return pO.apply(this,arguments)}function pO(){return pO=(0,W.Z)(function*(n,e,t){if(!Xd(e))throw e;n.wu.add(1),yield yg(n),n.yu.set("Offline"),t||(t=()=>WB(n.localStore)),n.asyncQueue.enqueueRetryable((0,W.Z)(function*(){Se("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Wv(n)}))}),pO.apply(this,arguments)}function iU(n,e){return e().catch(t=>u1(n,t,e))}function vg(n){return gO.apply(this,arguments)}function gO(){return gO=(0,W.Z)(function*(n){const e=Ue(n),t=Nc(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;J8(e);)try{const i=yield A8(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,X8(e,i)}catch(i){yield u1(e,i)}sU(e)&&oU(e)}),gO.apply(this,arguments)}function J8(n){return Sc(n)&&n.du.length<10}function X8(n,e){n.du.push(e);const t=Nc(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function sU(n){return Sc(n)&&!Nc(n).ko()&&n.du.length>0}function oU(n){Nc(n).start()}function eq(n){return mO.apply(this,arguments)}function mO(){return mO=(0,W.Z)(function*(n){Nc(n).nu()}),mO.apply(this,arguments)}function tq(n){return _O.apply(this,arguments)}function _O(){return _O=(0,W.Z)(function*(n){const e=Nc(n);for(const t of n.du)e.Zo(t.mutations)}),_O.apply(this,arguments)}function nq(n,e,t){return yO.apply(this,arguments)}function yO(){return yO=(0,W.Z)(function*(n,e,t){const r=n.du.shift(),i=Lx.from(r,e,t);yield iU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield vg(n)}),yO.apply(this,arguments)}function rq(n,e){return vO.apply(this,arguments)}function vO(){return vO=(0,W.Z)(function*(n,e){var t;e&&Nc(n).Xo&&(yield(t=(0,W.Z)(function*(r,i){if(QV(s=i.code)&&s!==ne.ABORTED){const c=r.du.shift();Nc(r).Fo(),yield iU(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield vg(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),sU(n)&&oU(n)}),vO.apply(this,arguments)}function aU(n,e){return bO.apply(this,arguments)}function bO(){return bO=(0,W.Z)(function*(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),Se("RemoteStore","RemoteStore received new credentials");const r=Sc(t);t.wu.add(3),yield yg(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Wv(t)}),bO.apply(this,arguments)}function EO(){return EO=(0,W.Z)(function*(n,e){const t=Ue(n);e?(t.wu.delete(2),yield Wv(t)):e||(t.wu.add(2),yield yg(t),t.yu.set("Unknown"))}),EO.apply(this,arguments)}function bg(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ue(e);return i.iu(),new $8(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Y8.bind(null,n),eo:Z8.bind(null,n),zo:Q8.bind(null,n)}),n.mu.push(function(){var e=(0,W.Z)(function*(t){t?(n.Iu.Fo(),uO(n)?cO(n):n.yu.set("Unknown")):(yield n.Iu.stop(),rU(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Nc(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ue(e);return i.iu(),new W8(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:eq.bind(null,n),eo:rq.bind(null,n),eu:tq.bind(null,n),tu:nq.bind(null,n)}),n.mu.push(function(){var e=(0,W.Z)(function*(t){t?(n.Tu.Fo(),yield vg(n)):(yield n.Tu.stop(),n.du.length>0&&(Se("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class CO{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,s){const c=Date.now()+r,h=new CO(e,t,c,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new we(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wg(n,e){if(lr("AsyncQueue",`${e}: ${n}`),Xd(n))return new we(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class Eg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Le.comparator(t.key,r.key):(t,r)=>Le.comparator(t.key,r.key),this.keyedMap=xx(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new Eg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Eg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lU{constructor(){this.Eu=new Qn(Le.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Ze():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Cg{constructor(e,t,r,i,s,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new Cg(e,t,Eg.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class iq{constructor(){this.Ru=void 0,this.listeners=[]}}class sq{constructor(){this.queries=new Cc(e=>PV(e),Tv),this.onlineState="Unknown",this.bu=new Set}}function TO(){return TO=(0,W.Z)(function*(n,e){const t=Ue(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new iq),i)try{s.Ru=yield t.onListen(r)}catch(c){const h=wg(c,`Initialization of query '${Sx(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Pu(t.onlineState),s.Ru&&e.Vu(s.Ru)&&NO(t)}),TO.apply(this,arguments)}function SO(){return SO=(0,W.Z)(function*(n,e){const t=Ue(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),SO.apply(this,arguments)}function oq(n,e){const t=Ue(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Vu(i)&&(r=!0);c.Ru=i}}r&&NO(t)}function aq(n,e,t){const r=Ue(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function NO(n){n.bu.forEach(e=>{e.next()})}class AO{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Cg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Cg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class dU{constructor(e){this.key=e}}class hU{constructor(e){this.key=e}}class fU{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Xt(),this.mutatedKeys=Xt(),this.Gu=LV(e),this.Qu=new Eg(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new lU,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,m="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((v,E)=>{const T=i.get(v),N=Nx(this.query,E)?E:null,O=!!T&&this.mutatedKeys.has(T.key),z=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let ae=!1;T&&N?T.data.isEqual(N.data)?O!==z&&(r.track({type:3,doc:N}),ae=!0):this.Hu(T,N)||(r.track({type:2,doc:N}),ae=!0,(p&&this.Gu(N,p)>0||m&&this.Gu(N,m)<0)&&(h=!0)):!T&&N?(r.track({type:0,doc:N}),ae=!0):T&&!N&&(r.track({type:1,doc:T}),ae=!0,(p||m)&&(h=!0)),ae&&(N?(c=c.add(N),s=z?s.add(v):s.delete(v)):(c=c.delete(v),s=s.delete(v)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const v="F"===this.query.limitType?c.last():c.first();c=c.delete(v.key),s=s.delete(v.key),r.track({type:1,doc:v})}return{Qu:c,zu:r,ii:h,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Au();s.sort((m,v)=>function(E,T){const N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze()}};return N(E)-N(T)}(m.type,v.type)||this.Gu(m.doc,v.doc)),this.Ju(r);const c=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,p=h!==this.qu;return this.qu=h,0!==s.length||p?{snapshot:new Cg(this.query,e.Qu,i,s,e.mutatedKeys,0===h,p,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new lU,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Xt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new hU(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new dU(r))}),t}ta(e){this.Uu=e._i,this.Ku=Xt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Cg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class uq{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dq{constructor(e){this.key=e,this.na=!1}}class hq{constructor(e,t,r,i,s,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Cc(h=>PV(h),Tv),this.ra=new Map,this.oa=new Set,this.ua=new Qn(Le.comparator),this.aa=new Map,this.ca=new Xx,this.ha={},this.la=new Map,this.fa=oh.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function fq(n,e){return MO.apply(this,arguments)}function MO(){return MO=(0,W.Z)(function*(n,e){const t=XO(n);let r,i;const s=t.ia.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ea();else{const c=yield mg(t.localStore,to(e));t.isPrimaryClient&&c1(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield xO(t,e,r,"current"===h)}return i}),MO.apply(this,arguments)}function xO(n,e,t,r){return OO.apply(this,arguments)}function OO(){return OO=(0,W.Z)(function*(n,e,t,r){n._a=(v,E,T)=>{return(N=(0,W.Z)(function*(O,z,ae,Re){let ke=z.view.Wu(ae);ke.ii&&(ke=yield s1(O.localStore,z.query,!1).then(({documents:nt})=>z.view.Wu(nt,ke)));const Ye=Re&&Re.targetChanges.get(z.targetId),Qe=z.view.applyChanges(ke,O.isPrimaryClient,Ye);return GO(O,z.targetId,Qe.Xu),Qe.snapshot}),function(O,z,ae,Re){return N.apply(this,arguments)})(n,v,E,T);var N};const i=yield s1(n.localStore,e,!0),s=new fU(e,i._i),c=s.Wu(i.documents),h=xv.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=s.applyChanges(c,n.isPrimaryClient,h);GO(n,t,p.Xu);const m=new uq(e,t,s);return n.ia.set(e,m),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),p.snapshot}),OO.apply(this,arguments)}function pq(n,e){return RO.apply(this,arguments)}function RO(){return RO=(0,W.Z)(function*(n,e){const t=Ue(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(s=>!Tv(s,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield _g(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),zv(t.remoteStore,r.targetId),Dg(t,r.targetId)}).catch(ah))):(Dg(t,r.targetId),yield _g(t.localStore,r.targetId,!0))}),RO.apply(this,arguments)}function kO(){return kO=(0,W.Z)(function*(n,e,t){const r=eR(n);try{const i=yield function(s,c){const h=Ue(s),p=cr.now(),m=c.reduce((E,T)=>E.add(T.key),Xt());let v;return h.persistence.runTransaction("Locally write mutations","readwrite",E=>h.fi.Ks(E,m).next(T=>{v=T;const N=[];for(const O of c){const z=vz(O,v.get(O.key));null!=z&&N.push(new Jd(O.key,z,CV(z.value.mapValue),ur.exists(!0)))}return h.Bs.addMutationBatch(E,p,N,c)})).then(E=>(E.applyToLocalDocumentSet(v),{batchId:E.batchId,changes:v}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,h){let p=s.ha[s.currentUser.toKey()];p||(p=new Qn(St)),p=p.insert(c,h),s.ha[s.currentUser.toKey()]=p}(r,i.batchId,t),yield dl(r,i.changes),yield vg(r.remoteStore)}catch(i){const s=wg(i,"Failed to persist write");t.reject(s)}}),kO.apply(this,arguments)}function pU(n,e){return PO.apply(this,arguments)}function PO(){return PO=(0,W.Z)(function*(n,e){const t=Ue(n);try{const r=yield N8(t.localStore,e);e.targetChanges.forEach((i,s)=>{const c=t.aa.get(s);c&&(_t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?_t(c.na):i.removedDocuments.size>0&&(_t(c.na),c.na=!1))}),yield dl(t,r,e)}catch(r){yield ah(r)}}),PO.apply(this,arguments)}function gU(n,e,t){const r=Ue(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((s,c)=>{const h=c.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(s,c){const h=Ue(s);h.onlineState=c;let p=!1;h.queries.forEach((m,v)=>{for(const E of v.listeners)E.Pu(c)&&(p=!0)}),p&&NO(h)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mq(n,e,t){return FO.apply(this,arguments)}function FO(){return FO=(0,W.Z)(function*(n,e,t){const r=Ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),s=i&&i.key;if(s){let c=new Qn(Le.comparator);c=c.insert(s,In.newNoDocument(s,ht.min()));const h=Xt().add(s),p=new Mv(ht.min(),new Map,new _n(St),c,h);yield pU(r,p),r.ua=r.ua.remove(s),r.aa.delete(e),HO(r)}else yield _g(r.localStore,e,!1).then(()=>Dg(r,e,t)).catch(ah)}),FO.apply(this,arguments)}function _q(n,e){return LO.apply(this,arguments)}function LO(){return LO=(0,W.Z)(function*(n,e){const t=Ue(n),r=e.batch.batchId;try{const i=yield S8(t.localStore,e);jO(t,r,null),UO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dl(t,i)}catch(i){yield ah(i)}}),LO.apply(this,arguments)}function yq(n,e,t){return VO.apply(this,arguments)}function VO(){return VO=(0,W.Z)(function*(n,e,t){const r=Ue(n);try{const i=yield function(s,c){const h=Ue(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let m;return h.Bs.lookupMutationBatch(p,c).next(v=>(_t(null!==v),m=v.keys(),h.Bs.removeMutationBatch(p,v))).next(()=>h.Bs.performConsistencyCheck(p)).next(()=>h.fi.Ks(p,m))})}(r.localStore,e);jO(r,e,t),UO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dl(r,i)}catch(i){yield ah(i)}}),VO.apply(this,arguments)}function UO(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function jO(n,e,t){const r=Ue(n);let i=r.ha[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function Dg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||mU(n,r)})}function mU(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(zv(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),HO(n))}function GO(n,e,t){for(const r of t)r instanceof dU?(n.ca.addReference(r.key,e),bq(n,r)):r instanceof hU?(Se("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||mU(n,r.key)):Ze()}function bq(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Se("SyncEngine","New document in limbo: "+t),n.oa.add(r),HO(n))}function HO(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Le(Wt.fromString(e)),r=n.fa.next();n.aa.set(r,new dq(t)),n.ua=n.ua.insert(t,r),c1(n.remoteStore,new Dc(to(ag(t.path)),r,2,Ds.A))}}function dl(n,e,t){return $O.apply(this,arguments)}function $O(){return $O=(0,W.Z)(function*(n,e,t){const r=Ue(n),i=[],s=[],c=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,p)=>{c.push(r._a(p,e,t).then(m=>{if(m){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,m.fromCache?"not-current":"current"),i.push(m);const v=Kx.Ys(p.targetId,m);s.push(v)}}))}),yield Promise.all(c),r.sa.zo(i),yield(h=(0,W.Z)(function*(p,m){const v=Ue(p);try{yield v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>re.forEach(m,T=>re.forEach(T.Hs,N=>v.persistence.referenceDelegate.addReference(E,T.targetId,N)).next(()=>re.forEach(T.Js,N=>v.persistence.referenceDelegate.removeReference(E,T.targetId,N)))))}catch(E){if(!Xd(E))throw E;Se("LocalStore","Failed to update sequence numbers: "+E)}for(const E of m){const T=E.targetId;if(!E.fromCache){const N=v.ui.get(T),z=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);v.ui=v.ui.insert(T,z)}}}),function(p,m){return h.apply(this,arguments)})(r.localStore,s))}),$O.apply(this,arguments)}function wq(n,e){return WO.apply(this,arguments)}function WO(){return WO=(0,W.Z)(function*(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){Se("SyncEngine","User change. New user:",e.toKey());const r=yield $B(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(h=>{h.reject(new we(ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dl(t,r.di)}var i}),WO.apply(this,arguments)}function Eq(n,e){const t=Ue(n),r=t.aa.get(e);if(r&&r.na)return Xt().add(r.key);{let i=Xt();const s=t.ra.get(e);if(!s)return i;for(const c of s){const h=t.ia.get(c);i=i.unionWith(h.view.ju)}return i}}function XO(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Eq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mq.bind(null,e),e.sa.zo=oq.bind(null,e.eventManager),e.sa.wa=aq.bind(null,e.eventManager),e}function eR(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_q.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yq.bind(null,e),e}class xq{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,W.Z)(function*(){t.M=$v(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return function HB(n,e,t,r){return new I8(n,e,t,r)}(this.persistence,new GB,e.initialUser,this.M)}ya(e){return new V8(eO.Yi,this.M)}ga(e){return new JB}terminate(){var e=this;return(0,W.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class tR{initialize(e,t){var r=this;return(0,W.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>gU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=wq.bind(null,r.syncEngine),yield function wO(n,e){return EO.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new sq}createDatastore(e){const t=$v(e.databaseInfo.databaseId),r=new H8(e.databaseInfo);return new z8(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>gU(this.syncEngine,h,0),c=XB.vt()?new XB:new U8,new K8(t,r,i,s,c);var t,r,i,s,c}createSyncEngine(e,t){return function(r,i,s,c,h,p,m){const v=new hq(r,i,s,c,h,p);return m&&(v.da=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,W.Z)(function*(t){const r=Ue(t);Se("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield yg(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class d1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Lq{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=si.UNAUTHENTICATED,this.clientId=dV.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,W.Z)(function*(h){Se("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Se("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,W.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new we(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=wg(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function bU(n,e){return nR.apply(this,arguments)}function nR(){return nR=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Se("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,W.Z)(function*(s){r.isEqual(s)||(yield $B(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),nR.apply(this,arguments)}function wU(n,e){return rR.apply(this,arguments)}function rR(){return rR=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield iR(n);Se("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>aU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>aU(e.remoteStore,s)),n.onlineComponents=e}),rR.apply(this,arguments)}function iR(n){return sR.apply(this,arguments)}function sR(){return sR=(0,W.Z)(function*(n){return n.offlineComponents||(Se("FirestoreClient","Using default OfflineComponentProvider"),yield bU(n,new xq)),n.offlineComponents}),sR.apply(this,arguments)}function h1(n){return oR.apply(this,arguments)}function oR(){return oR=(0,W.Z)(function*(n){return n.onlineComponents||(Se("FirestoreClient","Using default OnlineComponentProvider"),yield wU(n,new tR)),n.onlineComponents}),oR.apply(this,arguments)}function cR(){return cR=(0,W.Z)(function*(n){const e=yield h1(n),t=e.eventManager;return t.onListen=fq.bind(null,e.syncEngine),t.onUnlisten=pq.bind(null,e.syncEngine),t}),cR.apply(this,arguments)}function TU(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(i,s,c,h,p){const m=new d1({next:E=>{s.enqueueAndForget(()=>function IO(n,e){return SO.apply(this,arguments)}(i,v)),E.fromCache&&"server"===h.source?p.reject(new we(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new AO(c,m,{includeMetadataChanges:!0,ku:!0});return function DO(n,e){return TO.apply(this,arguments)}(i,v)}(yield function Tg(n){return cR.apply(this,arguments)}(n),n.asyncQueue,e,t,r)})),r.promise}const IU=new Map;function uR(n,e,t){if(!t)throw new we(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SU(n){if(!Le.isDocumentKey(n))throw new we(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function NU(n){if(Le.isDocumentKey(n))throw new we(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function f1(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ze()}function qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=f1(n);throw new we(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class MU{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new we(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new we(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function zq(n,e,t,r){if(!0===e&&!0===r)throw new we(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MU({}),this._settingsFrozen=!1,e instanceof vc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new we(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vc(i.options.projectId)}(e))}get app(){if(!this._app)throw new we(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new we(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new H6;switch(t.type){case"gapi":const r=t.client;return _t(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new q6(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new we(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=IU.get(e);t&&(Se("ComponentProvider","Removing Datastore"),IU.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class Ei{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ei(this.firestore,e,this._query)}}class pa extends Ei{constructor(e,t,r){super(e,t,ag(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new Le(e))}withConverter(e){return new pa(this.firestore,e,this._path)}}function qq(n,e,...t){if(n=(0,B.m9)(n),uR("collection","path",e),n instanceof qv){const r=Wt.fromString(e,...t);return NU(r),new pa(n,null,r)}{if(!(n instanceof Jn||n instanceof pa))throw new we(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return NU(r),new pa(n.firestore,null,r)}}function xU(n,e,...t){if(n=(0,B.m9)(n),1===arguments.length&&(e=dV.R()),uR("doc","path",e),n instanceof qv){const r=Wt.fromString(e,...t);return SU(r),new Jn(n,null,new Le(r))}{if(!(n instanceof Jn||n instanceof pa))throw new we(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return SU(r),new Jn(n.firestore,n instanceof pa?n.converter:null,new Le(r))}}class Yq{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new sO(this,"async_queue_retry"),this.Qa=()=>{const t=l1();t&&Se("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=l1();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=l1();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Or;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,W.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Xd(t))throw t;Se("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,lr("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=CO.createAndSchedule(this,e,t,r,s=>this.Ha(s));return this.La.push(i),i}ja(){this.Ua&&Ze()}verifyOperationInProgress(){}Ja(){var e=this;return(0,W.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}class Rn extends qv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Yq,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||OU(this),this._firestoreClient.terminate()}}function Qq(n=(0,sn.getApp)()){return(0,sn._getProvider)(n,"firestore").getImmediate()}function Er(n){return n._firestoreClient||OU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function OU(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new J6(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new Lq(n._authCredentials,n._appCheckCredentials,n._queue,r)}class Ig{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new we(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ch{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ch(wr.fromBase64String(e))}catch(t){throw new we(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ch(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class p1{constructor(e){this._methodName=e}}class hR{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}const Jq=/^__.*__$/;class Xq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Jd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sv(e,this.data,t,this.fieldTransforms)}}class PU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze()}}class g1{constructor(e,t,r,i,s,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new g1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return _1(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(FU(this.ec)&&Jq.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class e4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||$v(e)}lc(e,t,r,i=!1){return new g1({ec:e,methodName:t,hc:r,path:Rr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Sg(n){const e=n._freezeSettings(),t=$v(n._databaseId);return new e4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fR(n,e,t,r,i,s={}){const c=n.lc(s.merge||s.mergeFields?2:0,e,t,i);gR("Data must be an object, but it was:",c,r);const h=jU(r,c);let p,m;if(s.merge)p=new rg(c.fieldMask),m=c.fieldTransforms;else if(s.mergeFields){const v=[];for(const E of s.mergeFields){const T=mR(e,E,t);if(!c.contains(T))throw new we(ne.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);HU(v,T)||v.push(T)}p=new rg(v),m=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,m=c.fieldTransforms;return new Xq(new wi(h),p,m)}class Kv extends p1{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kv}}class t4 extends p1{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=function LU(n,e,t){return new g1({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}(this,e,!0),r=this.fc.map(s=>uh(s,t)),i=new Zd(r);return new Iv(e.path,i)}isEqual(e){return this===e}}function uh(n,e){if(GU(n=(0,B.m9)(n)))return gR("Unsupported field value:",e,n),jU(n,e);if(n instanceof p1)return function(t,r){if(!FU(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const c of t){let h=uh(c,r.uc(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,B.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return UV(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=cr.fromDate(t);return{timestampValue:Ov(r.M,i)}}if(t instanceof cr){const i=new cr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ov(r.M,i)}}if(t instanceof hR)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ch)return{bytesValue:iB(r.M,t._byteString)};if(t instanceof Jn){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ox(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${f1(t)}`)}(n,e)}function jU(n,e){const t={};return pV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$d(n,(r,i)=>{const s=uh(i,e.sc(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function GU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof cr||n instanceof hR||n instanceof ch||n instanceof Jn||n instanceof p1)}function gR(n,e,t){if(!GU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=f1(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function mR(n,e,t){if((e=(0,B.m9)(e))instanceof Ig)return e._internalPath;if("string"==typeof e)return m1(n,e);throw _1("Field path arguments must be of type string or ",n,!1,void 0,t)}const i4=new RegExp("[~\\*/\\[\\]]");function m1(n,e,t){if(e.search(i4)>=0)throw _1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ig(...e.split("."))._internalPath}catch(r){throw _1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _1(n,e,t,r,i){const s=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new we(ne.INVALID_ARGUMENT,h+n+p)}function HU(n,e){return n.some(t=>t.isEqual(e))}class _R{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new s4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(y1("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class s4 extends _R{data(){return super.data()}}function y1(n,e){return"string"==typeof e?m1(n,e):e instanceof Ig?e._internalPath:e._delegate._internalPath}class dh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ng extends _R{constructor(e,t,r,i,s,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new v1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(y1("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class v1 extends Ng{data(e={}){return super.data(e)}}class Ag{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new v1(this._firestore,this._userDataWriter,r.key,r,new dh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new v1(r._firestore,r._userDataWriter,c.doc.key,c.doc,new dh(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new v1(r._firestore,r._userDataWriter,c.doc.key,c.doc,new dh(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,m=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),m=s.indexOf(c.doc.key)),{type:o4(c.type),doc:h,oldIndex:p,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function o4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze()}}class hh extends class u4{convertValue(e,t="none"){switch(zd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ze()}}convertObject(e,t){const r={};return $d(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new hR(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gV(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_v(e));default:return null}}convertTimestamp(e){const t=yc(e);return new cr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Wt.fromString(e);_t(pB(r));const i=new vc(r.get(1),r.get(3)),s=new Le(r.popFirst(5));return i.isEqual(t)||lr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new ch(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function h4(n){n=qt(n,Ei);const e=qt(n.firestore,Rn),t=Er(e),r=new hh(e);return function $U(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new we(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query),TU(t,n._query).then(i=>new Ag(e,r,n,i))}function f4(n,e,t){n=qt(n,Jn);const r=qt(n.firestore,Rn),i=function yR(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e,t);return Yv(r,[fR(Sg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ur.none())])}function p4(n,e,t,...r){n=qt(n,Jn);const i=qt(n.firestore,Rn),s=Sg(i);let c;return c="string"==typeof(e=(0,B.m9)(e))||e instanceof Ig?function BU(n,e,t,r,i,s){const c=n.lc(1,e,t),h=[mR(e,r,t)],p=[i];if(s.length%2!=0)throw new we(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<s.length;T+=2)h.push(mR(e,s[T])),p.push(s[T+1]);const m=[],v=wi.empty();for(let T=h.length-1;T>=0;--T)if(!HU(m,h[T])){const N=h[T];let O=p[T];O=(0,B.m9)(O);const z=c.oc(N);if(O instanceof Kv)m.push(N);else{const ae=uh(O,z);null!=ae&&(m.push(N),v.set(N,ae))}}const E=new rg(m);return new PU(v,E,c.fieldTransforms)}(s,"updateDoc",n._key,e,t,r):function VU(n,e,t,r){const i=n.lc(1,e,t);gR("Data must be an object, but it was:",i,r);const s=[],c=wi.empty();$d(r,(p,m)=>{const v=m1(e,p,t);m=(0,B.m9)(m);const E=i.oc(v);if(m instanceof Kv)s.push(v);else{const T=uh(m,E);null!=T&&(s.push(v),c.set(v,T))}});const h=new rg(s);return new PU(c,h,i.fieldTransforms)}(s,"updateDoc",n._key,e),Yv(i,[c.toMutation(n._key,ur.exists(!0))])}function Yv(n,e){return function(t,r){const i=new Or;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function gq(n,e,t){return kO.apply(this,arguments)}(yield function lR(n){return h1(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(Er(n),e)}function m4(...n){return new t4("arrayUnion",n)}!function(n,e=!0){tg=sn.SDK_VERSION,(0,sn._registerComponent)(new ld.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Rn(i,new W6(t.getProvider("auth-internal")),new K6(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,sn.registerVersion)(lV,"3.4.9",n),(0,sn.registerVersion)(lV,"3.4.9","esm2017")}();class bR{constructor(e){return e}}const XU="firestore",wR=new d.OlP("angularfire2.firestore-instances");function v4(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new bR(r)}}const b4={provide:class _4{constructor(){return(0,rn.vb)(XU)}},deps:[[new d.FiY,wR]]},w4={provide:bR,useFactory:function y4(n,e){const t=(0,rn.JM)(XU,n,e);return t&&new bR(t)},deps:[[new d.FiY,wR],nl]};let E4=(()=>{class n{constructor(){(0,Ys.KN)("angularfire",rn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[w4,b4]}),n})();function C4(n,...e){return{ngModule:E4,providers:[{provide:wR,useFactory:v4(n),multi:!0,deps:[d.R0b,d.zs3,rn.HU,lc,[new d.FiY,TM],[new d.FiY,gd],...e]}]}}const Zv=(0,rn.u3)(qq,!0),ej=(0,rn.u3)(xU,!0),Qv=(0,rn.u3)(h4,!0),fh=(0,rn.u3)(Qq,!0),D4=(0,rn.u3)(f4,!0),T4=(0,rn.u3)(p4,!0);function w1(n,e){const t=(0,xi.m)(n)?n:()=>n,r=i=>i.error(t());return new Sr.y(e?i=>e.schedule(r,0,i):r)}const E1=(0,M(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function tj(n){return new Sr.y(e=>{(0,gr.Xf)(n()).subscribe(e)})}var nj=M(727);function rj(){return(0,Yn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Qt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class S4 extends Sr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Yn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nj.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Qt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nj.w0.EMPTY)}return e}refCount(){return rj()(this)}}function N4(n,e,t,r,i){return(s,c)=>{let h=t,p=e,m=0;s.subscribe((0,Qt.x)(c,v=>{const E=m++;p=h?n(p,v,E):(h=!0,v),r&&c.next(p)},i&&(()=>{h&&c.next(p),c.complete()})))}}function ij(n,e){return(0,Yn.e)(N4(n,e,arguments.length>=2,!0))}function Ac(n){return(0,Yn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,Qt.x)(t,void 0,void 0,c=>{s=(0,gr.Xf)(n(c,Ac(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function ER(n){return n<=0?()=>Ps.E:(0,Yn.e)((e,t)=>{let r=[];e.subscribe((0,Qt.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function sj(n=A4){return(0,Yn.e)((e,t)=>{let r=!1;e.subscribe((0,Qt.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function A4(){return new E1}function oj(n){return(0,Yn.e)((e,t)=>{let r=!1;e.subscribe((0,Qt.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Mg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fn((i,s)=>n(i,s,r)):Ls.y,(0,Nr.q)(1),t?oj(e):sj(()=>new E1))}class hl{constructor(e,t){this.id=e,this.url=t}}class CR extends hl{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jv extends hl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class aj extends hl{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class O4 extends hl{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class R4 extends hl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class k4 extends hl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class P4 extends hl{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class F4 extends hl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class L4 extends hl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lj{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cj{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class V4{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class B4{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class U4{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class j4{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uj{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ft="primary";class G4{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xg(n){return new G4(n)}const dj="ngNavigationCancelingError";function DR(n){const e=Error("NavigationCancelingError: "+n);return e[dj]=!0,e}function $4(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const c=r[s],h=n[s];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ga(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!hj(n[i],e[i]))return!1;return!0}function hj(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function fj(n){return Array.prototype.concat.apply([],n)}function pj(n){return n.length>0?n[n.length-1]:null}function li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ma(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,An.D)(Promise.resolve(n)):ft(n)}const q4={exact:function _j(n,e,t){if(!gh(n.segments,e.segments)||!C1(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_j(n.children[r],e.children[r],t))return!1;return!0},subset:yj},gj={exact:function K4(n,e){return ga(n,e)},subset:function Y4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hj(n[t],e[t]))},ignored:()=>!0};function mj(n,e,t){return q4[t.paths](n.root,e.root,t.matrixParams)&&gj[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function yj(n,e,t){return vj(n,e,e.segments,t)}function vj(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!gh(i,t)||e.hasChildren()||!C1(i,t,r))}if(n.segments.length===t.length){if(!gh(n.segments,t)||!C1(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!yj(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(gh(n.segments,i)&&C1(n.segments,i,r)&&n.children[Ft])&&vj(n.children[Ft],e,s,r)}}function C1(n,e,t){return e.every((r,i)=>gj[t](n[i].parameters,r.parameters))}class ph{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xg(this.queryParams)),this._queryParamMap}toString(){return J4.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,li(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return D1(this)}}class Xv{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xg(this.parameters)),this._parameterMap}toString(){return Dj(this)}}function gh(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class bj{}class wj{parse(e){const t=new a5(e);return new ph(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${e0(e.root,!0)}`,r=function t5(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${T1(t)}=${T1(i)}`).join("&"):`${T1(t)}=${T1(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function X4(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const J4=new wj;function D1(n){return n.segments.map(e=>Dj(e)).join("/")}function e0(n,e){if(!n.hasChildren())return D1(n);if(e){const t=n.children[Ft]?e0(n.children[Ft],!1):"",r=[];return li(n.children,(i,s)=>{s!==Ft&&r.push(`${s}:${e0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Q4(n,e){let t=[];return li(n.children,(r,i)=>{i===Ft&&(t=t.concat(e(r,i)))}),li(n.children,(r,i)=>{i!==Ft&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ft?[e0(n.children[Ft],!1)]:[`${i}:${e0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ft]?`${D1(n)}/${t[0]}`:`${D1(n)}/(${t.join("//")})`}}function Ej(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function T1(n){return Ej(n).replace(/%3B/gi,";")}function TR(n){return Ej(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function I1(n){return decodeURIComponent(n)}function Cj(n){return I1(n.replace(/\+/g,"%20"))}function Dj(n){return`${TR(n.path)}${function e5(n){return Object.keys(n).map(e=>`;${TR(e)}=${TR(n[e])}`).join("")}(n.parameters)}`}const n5=/^[^\/()?;=#]+/;function S1(n){const e=n.match(n5);return e?e[0]:""}const r5=/^[^=?&#]+/,s5=/^[^&#]+/;class a5{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ft]=new Gt(e,t)),r}parseSegment(){const e=S1(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Xv(I1(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=S1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=S1(this.remaining);i&&(r=i,this.capture(r))}e[I1(t)]=I1(r)}parseQueryParam(e){const t=function i5(n){const e=n.match(r5);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function o5(n){const e=n.match(s5);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Cj(t),s=Cj(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=S1(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ft);const c=this.parseChildren();t[s]=1===Object.keys(c).length?c[Ft]:new Gt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Tj{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=IR(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=IR(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=SR(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return SR(e,this._root).map(t=>t.value)}}function IR(n,e){if(n===e.value)return e;for(const t of e.children){const r=IR(n,t);if(r)return r}return null}function SR(n,e){if(n===e.value)return[e];for(const t of e.children){const r=SR(n,t);if(r.length)return r.unshift(e),r}return[]}class fl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Og(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ij extends Tj{constructor(e,t){super(e),this.snapshot=t,NR(this,e)}toString(){return this.snapshot.toString()}}function Sj(n,e){const t=function l5(n,e){const c=new N1([],{},{},"",{},Ft,e,null,n.root,-1,{});return new Aj("",new fl(c,[]))}(n,e),r=new Cn([new Xv("",{})]),i=new Cn({}),s=new Cn({}),c=new Cn({}),h=new Cn(""),p=new Mc(r,i,c,h,s,Ft,e,t.root);return p.snapshot=t.root,new Ij(new fl(p,[]),t)}class Mc{constructor(e,t,r,i,s,c,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(e=>xg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(e=>xg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Nj(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function c5(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class N1{constructor(e,t,r,i,s,c,h,p,m,v,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this.routeConfig=p,this._urlSegment=m,this._lastPathIndex=v,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Aj extends Tj{constructor(e,t){super(t),this.url=e,NR(this,t)}toString(){return Mj(this._root)}}function NR(n,e){e.value._routerState=n,e.children.forEach(t=>NR(n,t))}function Mj(n){const e=n.children.length>0?` { ${n.children.map(Mj).join(", ")} } `:"";return`${n.value}${e}`}function AR(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ga(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ga(e.params,t.params)||n.params.next(t.params),function W4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ga(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ga(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function MR(n,e){const t=ga(n.params,e.params)&&function Z4(n,e){return gh(n,e)&&n.every((t,r)=>ga(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||MR(n.parent,e.parent))}function t0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function d5(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return t0(n,r,i);return t0(n,r)})}(n,e,t);return new fl(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>t0(n,h)),c}}const r=function h5(n){return new Mc(new Cn(n.url),new Cn(n.params),new Cn(n.queryParams),new Cn(n.fragment),new Cn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>t0(n,s));return new fl(r,i)}}function A1(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function n0(n){return"object"==typeof n&&null!=n&&n.outlets}function xR(n,e,t,r,i){let s={};if(r&&li(r,(h,p)=>{s[p]=Array.isArray(h)?h.map(m=>`${m}`):`${h}`}),n===e)return new ph(t,s,i);const c=xj(n,e,t);return new ph(c,s,i)}function xj(n,e,t){const r={};return li(n.children,(i,s)=>{r[s]=i===e?t:xj(i,e,t)}),new Gt(n.segments,r)}class Oj{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&A1(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(n0);if(i&&i!==pj(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class OR{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Rj(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return M1(n,e,t);const r=function y5(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const c=n.segments[i],h=t[r];if(n0(h))break;const p=`${h}`,m=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&m&&"object"==typeof m&&void 0===m.outlets){if(!Pj(p,m,c))return s;r+=2}else{if(!Pj(p,{},c))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Gt(n.segments.slice(0,r.pathIndex),{});return s.children[Ft]=new Gt(n.segments.slice(r.pathIndex),n.children),M1(s,0,i)}return r.match&&0===i.length?new Gt(n.segments,{}):r.match&&!n.hasChildren()?RR(n,e,t):r.match?M1(n,0,i):RR(n,e,t)}function M1(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const r=function _5(n){return n0(n[0])?n[0].outlets:{[Ft]:n}}(t),i={};return li(r,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[c]=Rj(n.children[c],e,s))}),li(n.children,(s,c)=>{void 0===r[c]&&(i[c]=s)}),new Gt(n.segments,i)}}function RR(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(n0(s)){const p=v5(s.outlets);return new Gt(r,p)}if(0===i&&A1(t[0])){r.push(new Xv(n.segments[e].path,kj(t[0]))),i++;continue}const c=n0(s)?s.outlets[Ft]:`${s}`,h=i<t.length-1?t[i+1]:null;c&&h&&A1(h)?(r.push(new Xv(c,kj(h))),i+=2):(r.push(new Xv(c,{})),i++)}return new Gt(r,{})}function v5(n){const e={};return li(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=RR(new Gt([],{}),0,t))}),e}function kj(n){const e={};return li(n,(t,r)=>e[r]=`${t}`),e}function Pj(n,e,t){return n==t.path&&ga(e,t.parameters)}class w5{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),AR(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Og(t);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,i[c],r),delete i[c]}),li(i,(s,c)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Og(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Og(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Og(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new j4(s.value.snapshot))}),e.children.length&&this.forwardEvent(new B4(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(AR(i),i===s)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),AR(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=function E5(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),p=h?h.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=p,c.outlet&&c.outlet.activateWith(i,p),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class kR{constructor(e,t){this.routes=e,this.module=t}}function xc(n){return"function"==typeof n}function mh(n){return n instanceof ph}const r0=Symbol("INITIAL_VALUE");function s0(){return Vs(n=>function bo(...n){const e=(0,Zt.yG)(n),t=(0,Zt.jO)(n),{args:r,keys:i}=Va(n);if(0===r.length)return(0,An.D)([],e);const s=new Sr.y(function pu(n,e,t=Ls.y){return r=>{sf(e,()=>{const{length:i}=n,s=new Array(i);let c=i,h=i;for(let p=0;p<i;p++)sf(e,()=>{const m=(0,An.D)(n[p],e);let v=!1;m.subscribe((0,Qt.x)(r,E=>{s[p]=E,v||(v=!0,h--),h||r.next(t(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>rf(i,c):Ls.y));return t?s.pipe(Ko(t)):s}(n.map(e=>e.pipe((0,Nr.q)(1),function Rl(...n){const e=(0,Zt.yG)(n);return(0,Yn.e)((t,r)=>{(e?us(n,t,e):us(n,t)).subscribe(r)})}(r0)))).pipe(ij((e,t)=>{let r=!1;return t.reduce((i,s,c)=>i!==r0?i:(s===r0&&(r=!0),r||!1!==s&&c!==t.length-1&&!mh(s)?i:s),e)},r0),Fn(e=>e!==r0),(0,At.U)(e=>mh(e)?e:!0===e),(0,Nr.q)(1)))}class N5{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new o0,this.attachRef=null}}class o0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new N5,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let PR=(()=>{class n{constructor(t,r,i,s,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=s||Ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,p=new A5(t,h,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(o0),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class A5{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Mc?this.route:e===o0?this.childContexts:this.parent.get(e,t)}}let Fj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[PR],encapsulation:2}),n})();function Lj(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];M5(r,x5(e,r))}}function M5(n,e){n.children&&Lj(n.children,e)}function x5(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function FR(n){const e=n.children&&n.children.map(FR),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ft&&(t.component=Fj),t}function ro(n){return n.outlet||Ft}function Vj(n,e){const t=n.filter(r=>ro(r)===e);return t.push(...n.filter(r=>ro(r)!==e)),t}const Bj={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function x1(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Bj):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||$4)(t,n,e);if(!s)return Object.assign({},Bj);const c={};li(s.posParams,(p,m)=>{c[m]=p.path});const h=s.consumed.length>0?Object.assign(Object.assign({},c),s.consumed[s.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:h,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function O1(n,e,t,r,i="corrected"){if(t.length>0&&function k5(n,e,t){return t.some(r=>R1(n,e,r)&&ro(r)!==Ft)}(n,t,r)){const c=new Gt(e,function R5(n,e,t,r){const i={};i[Ft]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ro(s)!==Ft){const c=new Gt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ro(s)]=c}return i}(n,e,r,new Gt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function P5(n,e,t){return t.some(r=>R1(n,e,r))}(n,t,r)){const c=new Gt(n.segments,function O5(n,e,t,r,i,s){const c={};for(const h of r)if(R1(n,t,h)&&!i[ro(h)]){const p=new Gt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,c[ro(h)]=p}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const s=new Gt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function R1(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Uj(n,e,t,r){return!!(ro(n)===r||r!==Ft&&R1(e,t,n))&&("**"===n.path||x1(e,n,t).matched)}function jj(n,e,t){return 0===e.length&&!n.children[t]}class k1{constructor(e){this.segmentGroup=e||null}}class Gj{constructor(e){this.urlTree=e}}function a0(n){return w1(new k1(n))}function Hj(n){return w1(new Gj(n))}function F5(n){return w1(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class B5{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=O1(this.urlTree.root,[],[],this.config).segmentGroup,t=new Gt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ft).pipe((0,At.U)(s=>this.createUrlTree(LR(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ac(s=>{if(s instanceof Gj)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof k1?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ft).pipe((0,At.U)(i=>this.createUrlTree(LR(i),e.queryParams,e.fragment))).pipe(Ac(i=>{throw i instanceof k1?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Gt([],{[Ft]:e}):e;return new ph(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,At.U)(s=>new Gt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,An.D)(i).pipe(ac(s=>{const c=r.children[s],h=Vj(t,s);return this.expandSegmentGroup(e,h,c,s).pipe((0,At.U)(p=>({segment:p,outlet:s})))}),ij((s,c)=>(s[c.outlet]=c.segment,s),{}),function M4(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fn((i,s)=>n(i,s,r)):Ls.y,ER(1),t?oj(e):sj(()=>new E1))}())}expandSegment(e,t,r,i,s,c){return(0,An.D)(r).pipe(ac(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,c).pipe(Ac(m=>{if(m instanceof k1)return ft(null);throw m}))),Mg(h=>!!h),Ac((h,p)=>{if(h instanceof E1||"EmptyError"===h.name)return jj(t,i,s)?ft(new Gt([],{})):a0(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,c,h){return Uj(i,t,s,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c):a0(t):a0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Hj(s):this.lineralizeSegments(r,s).pipe((0,Mn.z)(c=>{const h=new Gt(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){const{matched:h,consumedSegments:p,remainingSegments:m,positionalParamSegments:v}=x1(t,i,s);if(!h)return a0(t);const E=this.applyRedirectCommands(p,i.redirectTo,v);return i.redirectTo.startsWith("/")?Hj(E):this.lineralizeSegments(i,E).pipe((0,Mn.z)(T=>this.expandSegment(e,t,r,T.concat(m),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ft(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,At.U)(E=>(r._loadedConfig=E,new Gt(i,{})))):ft(new Gt(i,{}));const{matched:c,consumedSegments:h,remainingSegments:p}=x1(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,Mn.z)(v=>{const E=v.module,T=v.routes,{segmentGroup:N,slicedSegments:O}=O1(t,h,p,T),z=new Gt(N.segments,N.children);if(0===O.length&&z.hasChildren())return this.expandChildren(E,T,z).pipe((0,At.U)(Ye=>new Gt(h,Ye)));if(0===T.length&&0===O.length)return ft(new Gt(h,{}));const ae=ro(r)===s;return this.expandSegment(E,z,T,O,ae?Ft:s,!0).pipe((0,At.U)(ke=>new Gt(h.concat(ke.segments),ke.children)))})):a0(t)}getChildConfig(e,t,r){return t.children?ft(new kR(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ft(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Mn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,At.U)(s=>(t._loadedConfig=s,s))):function L5(n){return w1(DR(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ft(new kR([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return ft(!0);const s=i.map(c=>{const h=e.get(c);let p;if(function D5(n){return n&&xc(n.canLoad)}(h))p=h.canLoad(t,r);else{if(!xc(h))throw new Error("Invalid CanLoad guard");p=h(t,r)}return ma(p)});return ft(s).pipe(s0(),(0,qr.b)(c=>{if(!mh(c))return;const h=DR(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw h.url=c,h}),(0,At.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ft(r);if(i.numberOfChildren>1||!i.children[Ft])return F5(e.redirectTo);i=i.children[Ft]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new ph(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return li(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let c={};return li(t.children,(h,p)=>{c[p]=this.createSegmentGroup(e,h,r,i)}),new Gt(s,c)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function LR(n){const e={};for(const r of Object.keys(n.children)){const s=LR(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function U5(n){if(1===n.numberOfChildren&&n.children[Ft]){const e=n.children[Ft];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}class $j{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class P1{constructor(e,t){this.component=e,this.route=t}}function G5(n,e,t){const r=n._root;return l0(r,e?e._root:null,t,[r.value])}function F1(n,e,t){const r=function $5(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function l0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Og(e);return n.children.forEach(c=>{(function W5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function z5(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gh(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gh(n.url,e.url)||!ga(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MR(n,e)||!ga(n.queryParams,e.queryParams);default:return!MR(n,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new $j(r)):(s.data=c.data,s._resolvedData=c._resolvedData),l0(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new P1(h.outlet.component,c))}else c&&c0(e,h,i),i.canActivateChecks.push(new $j(r)),l0(n,null,s.component?h?h.children:null:t,r,i)})(c,s[c.value.outlet],t,r.concat([c.value]),i),delete s[c.value.outlet]}),li(s,(c,h)=>c0(c,t.getContext(h),i)),i}function c0(n,e,t){const r=Og(n),i=n.value;li(r,(s,c)=>{c0(s,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new P1(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class t7{}function Wj(n){return new Sr.y(e=>e.error(n))}class r7{constructor(e,t,r,i,s,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=c}recognize(){const e=O1(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ft);if(null===t)return null;const r=new N1([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ft,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new fl(r,t),s=new Aj(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=Nj(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const c=t.children[s],h=Vj(e,s),p=this.processSegmentGroup(h,c,s);if(null===p)return null;r.push(...p)}const i=zj(r);return function i7(n){n.sort((e,t)=>e.value.outlet===Ft?-1:t.value.outlet===Ft?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const c=this.processSegmentAgainstRoute(s,t,r,i);if(null!==c)return c}return jj(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Uj(e,t,r,i))return null;let s,c=[],h=[];if("**"===e.path){const N=r.length>0?pj(r).parameters:{};s=new N1(r,N,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yj(e),ro(e),e.component,e,qj(t),Kj(t)+r.length,Zj(e))}else{const N=x1(t,e,r);if(!N.matched)return null;c=N.consumedSegments,h=N.remainingSegments,s=new N1(c,N.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yj(e),ro(e),e.component,e,qj(t),Kj(t)+c.length,Zj(e))}const p=function s7(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:m,slicedSegments:v}=O1(t,c,h,p.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);if(0===v.length&&m.hasChildren()){const N=this.processChildren(p,m);return null===N?null:[new fl(s,N)]}if(0===p.length&&0===v.length)return[new fl(s,[])];const E=ro(e)===i,T=this.processSegment(p,m,v,E?Ft:i);return null===T?null:[new fl(s,T)]}}function o7(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function zj(n){const e=[],t=new Set;for(const r of n){if(!o7(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=zj(r.children);e.push(new fl(r.value,i))}return e.filter(r=>!t.has(r))}function qj(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Kj(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Yj(n){return n.data||{}}function Zj(n){return n.resolve||{}}function Qj(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function VR(n){return Vs(e=>{const t=n(e);return t?(0,An.D)(t).pipe((0,At.U)(()=>e)):ft(e)})}class p7 extends class f7{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const BR=new d.OlP("ROUTES");class Jj{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,At.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=s.create(e);return new kR(fj(c.injector.get(BR,void 0,d.XFs.Self|d.XFs.Optional)).map(FR),c)}),Ac(s=>{throw t._loader$=void 0,s}));return t._loader$=new S4(i,()=>new Pn.x).pipe(rj()),t._loader$}loadModuleFactory(e){return ma(e()).pipe((0,Mn.z)(t=>t instanceof d.YKP?ft(t):(0,An.D)(this.compiler.compileModuleAsync(t))))}}class m7{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function _7(n){throw n}function y7(n,e,t){return e.parse("/")}function Xj(n,e){return ft(null)}const v7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},b7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Lr=(()=>{class n{constructor(t,r,i,s,c,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Pn.x,this.errorHandler=_7,this.malformedUriErrorHandler=y7,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Xj,afterPreactivation:Xj},this.urlHandlingStrategy=new m7,this.routeReuseStrategy=new p7,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const E=c.get(d.R0b);this.isNgZoneEnabled=E instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function z4(){return new ph(new Gt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Jj(c,h,T=>this.triggerEvent(new lj(T)),T=>this.triggerEvent(new cj(T))),this.routerState=Sj(this.currentUrlTree,this.rootComponentType),this.transitions=new Cn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Fn(i=>0!==i.id),(0,At.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Vs(i=>{let s=!1,c=!1;return ft(i).pipe((0,qr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Vs(h=>{const p=this.browserUrlTree.toString(),m=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||m)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return eG(h.source)&&(this.browserUrlTree=h.extractedUrl),ft(h).pipe(Vs(E=>{const T=this.transitions.getValue();return r.next(new CR(E.id,this.serializeUrl(E.extractedUrl),E.source,E.restoredState)),T!==this.transitions.getValue()?Ps.E:Promise.resolve(E)}),function j5(n,e,t,r){return Vs(i=>function V5(n,e,t,r,i){return new B5(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,At.U)(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,qr.b)(E=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:E.urlAfterRedirects})}),function a7(n,e,t,r,i){return(0,Mn.z)(s=>function n7(n,e,t,r,i="emptyOnly",s="legacy"){try{const c=new r7(n,e,t,r,i,s).recognize();return null===c?Wj(new t7):ft(c)}catch(c){return Wj(c)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,At.U)(c=>Object.assign(Object.assign({},s),{targetSnapshot:c}))))}(this.rootComponentType,this.config,E=>this.serializeUrl(E),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,qr.b)(E=>{if("eager"===this.urlUpdateStrategy){if(!E.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl);this.setBrowserUrl(N,E)}this.browserUrlTree=E.urlAfterRedirects}const T=new R4(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);r.next(T)}));if(m&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:T,extractedUrl:N,source:O,restoredState:z,extras:ae}=h,Re=new CR(T,this.serializeUrl(N),O,z);r.next(Re);const ke=Sj(N,this.rootComponentType).snapshot;return ft(Object.assign(Object.assign({},h),{targetSnapshot:ke,urlAfterRedirects:N,extras:Object.assign(Object.assign({},ae),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Ps.E}),VR(h=>{const{targetSnapshot:p,id:m,extractedUrl:v,rawUrl:E,extras:{skipLocationChange:T,replaceUrl:N}}=h;return this.hooks.beforePreactivation(p,{navigationId:m,appliedUrlTree:v,rawUrlTree:E,skipLocationChange:!!T,replaceUrl:!!N})}),(0,qr.b)(h=>{const p=new k4(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,At.U)(h=>Object.assign(Object.assign({},h),{guards:G5(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function q5(n,e){return(0,Mn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:c}}=t;return 0===c.length&&0===s.length?ft(Object.assign(Object.assign({},t),{guardsResult:!0})):function K5(n,e,t,r){return(0,An.D)(n).pipe((0,Mn.z)(i=>function e7(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ft(s.map(h=>{const p=F1(h,e,i);let m;if(function S5(n){return n&&xc(n.canDeactivate)}(p))m=ma(p.canDeactivate(n,e,t,r));else{if(!xc(p))throw new Error("Invalid CanDeactivate guard");m=ma(p(n,e,t,r))}return m.pipe(Mg())})).pipe(s0()):ft(!0)}(i.component,i.route,t,e,r)),Mg(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Mn.z)(h=>h&&function C5(n){return"boolean"==typeof n}(h)?function Y5(n,e,t,r){return(0,An.D)(e).pipe(ac(i=>us(function Q5(n,e){return null!==n&&e&&e(new V4(n)),ft(!0)}(i.route.parent,r),function Z5(n,e){return null!==n&&e&&e(new U4(n)),ft(!0)}(i.route,r),function X5(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function H5(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>tj(()=>ft(c.guards.map(p=>{const m=F1(p,c.node,t);let v;if(function I5(n){return n&&xc(n.canActivateChild)}(m))v=ma(m.canActivateChild(r,n));else{if(!xc(m))throw new Error("Invalid CanActivateChild guard");v=ma(m(r,n))}return v.pipe(Mg())})).pipe(s0())));return ft(s).pipe(s0())}(n,i.path,t),function J5(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ft(!0);const i=r.map(s=>tj(()=>{const c=F1(s,e,t);let h;if(function T5(n){return n&&xc(n.canActivate)}(c))h=ma(c.canActivate(e,n));else{if(!xc(c))throw new Error("Invalid CanActivate guard");h=ma(c(e,n))}return h.pipe(Mg())}));return ft(i).pipe(s0())}(n,i.route,t))),Mg(i=>!0!==i,!0))}(r,s,n,e):ft(h)),(0,At.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,qr.b)(h=>{if(mh(h.guardsResult)){const m=DR(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw m.url=h.guardsResult,m}const p=new P4(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),Fn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),VR(h=>{if(h.guards.canActivateChecks.length)return ft(h).pipe((0,qr.b)(p=>{const m=new F4(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(m)}),Vs(p=>{let m=!1;return ft(p).pipe(function l7(n,e){return(0,Mn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ft(t);let s=0;return(0,An.D)(i).pipe(ac(c=>function c7(n,e,t,r){return function u7(n,e,t,r){const i=Qj(n);if(0===i.length)return ft({});const s={};return(0,An.D)(i).pipe((0,Mn.z)(c=>function d7(n,e,t,r){const i=F1(n,e,r);return ma(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,qr.b)(h=>{s[c]=h}))),ER(1),(0,Mn.z)(()=>Qj(s).length===i.length?ft(s):Ps.E))}(n._resolve,n,e,r).pipe((0,At.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),Nj(n,t).resolve),null)))}(c.route,r,n,e)),(0,qr.b)(()=>s++),ER(1),(0,Mn.z)(c=>s===i.length?ft(t):Ps.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,qr.b)({next:()=>m=!0,complete:()=>{m||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,qr.b)(p=>{const m=new L4(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(m)}))}),VR(h=>{const{targetSnapshot:p,id:m,extractedUrl:v,rawUrl:E,extras:{skipLocationChange:T,replaceUrl:N}}=h;return this.hooks.afterPreactivation(p,{navigationId:m,appliedUrlTree:v,rawUrlTree:E,skipLocationChange:!!T,replaceUrl:!!N})}),(0,At.U)(h=>{const p=function u5(n,e,t){const r=t0(n,e._root,t?t._root:void 0);return new Ij(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:p})}),(0,qr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,At.U)(r=>(new w5(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,qr.b)({next(){s=!0},complete(){s=!0}}),function x4(n){return(0,Yn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;s||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Ac(h=>{if(c=!0,function H4(n){return n&&n[dj]}(h)){const p=mh(h.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const m=new aj(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(m),p?setTimeout(()=>{const v=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),E={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||eG(i.source)};this.scheduleNavigation(v,"imperative",null,E,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new O4(i.id,this.serializeUrl(i.extractedUrl),h);r.next(p);try{i.resolve(this.errorHandler(h))}catch(m){i.reject(m)}}return Ps.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const p=Object.assign({},c);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,c,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Lj(t),this.config=t.map(FR),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,m=i||this.routerState.root,v=p?this.currentUrlTree.fragment:c;let E=null;switch(h){case"merge":E=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=s||null}return null!==E&&(E=this.removeEmptyProps(E)),function f5(n,e,t,r,i){if(0===t.length)return xR(e.root,e.root,e.root,r,i);const s=function p5(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Oj(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return li(s.outlets,(p,m)=>{h[m]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===c?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new Oj(t,e,r)}(t);if(s.toRoot())return xR(e.root,e.root,new Gt([],{}),r,i);const c=function g5(n,e,t){if(n.isAbsolute)return new OR(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new OR(s,s===e.root,0)}const r=A1(n.commands[0])?0:1;return function m5(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new OR(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),h=c.processChildren?M1(c.segmentGroup,c.index,s.commands):Rj(c.segmentGroup,c.index,s.commands);return xR(e.root,c.segmentGroup,h,r,i)}(m,this.currentUrlTree,t,E,null!=v?v:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=mh(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function w7(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},v7):!1===r?Object.assign({},b7):r,mh(t))return mj(this.currentUrlTree,t,i);const s=this.parseUrl(t);return mj(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Jv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,c){var h,p;if(this.disposed)return Promise.resolve(!1);let m,v,E;c?(m=c.resolve,v=c.reject,E=c.promise):E=new Promise((O,z)=>{m=O,v=z});const T=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),N=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):N=0,this.setTransition({id:T,targetPageId:N,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:m,reject:v,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(O=>Promise.reject(O))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new aj(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function eG(n){return"imperative"!==n}let L1=(()=>{class n{constructor(t,r,i,s,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=c,this.commands=null,this.onChanges=new Pn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Rg(this.skipLocationChange),replaceUrl:Rg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rg(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Lr),d.Y36(Mc),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})(),V1=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Pn.x,this.subscription=t.events.subscribe(s=>{s instanceof Jv&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,c){if(0!==t||r||i||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:Rg(this.skipLocationChange),replaceUrl:Rg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rg(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Lr),d.Y36(Mc),d.Y36(xe))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function Rg(n){return""===n||!!n}class tG{}class nG{preload(e,t){return ft(null)}}let rG=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new Jj(i,r,p=>t.triggerEvent(new lj(p)),p=>t.triggerEvent(new cj(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(Fn(t=>t instanceof Jv),ac(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const c=s._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,An.D)(i).pipe((0,ja.J)(),(0,At.U)(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ft(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Mn.z)(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Lr),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(tG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),UR=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof CR?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jv&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof uj&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new uj(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const _h=new d.OlP("ROUTER_CONFIGURATION"),iG=new d.OlP("ROUTER_FORROOT_GUARD"),T7=[Ie,{provide:bj,useClass:wj},{provide:Lr,useFactory:function M7(n,e,t,r,i,s,c={},h,p){const m=new Lr(null,n,e,t,r,i,fj(s));return h&&(m.urlHandlingStrategy=h),p&&(m.routeReuseStrategy=p),function x7(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,m),c.enableTracing&&m.events.subscribe(v=>{var E,T;null===(E=console.group)||void 0===E||E.call(console,`Router Event: ${v.constructor.name}`),console.log(v.toString()),console.log(v),null===(T=console.groupEnd)||void 0===T||T.call(console)}),m},deps:[bj,o0,Ie,d.zs3,d.Sil,BR,_h,[class g7{},new d.FiY],[class h7{},new d.FiY]]},o0,{provide:Mc,useFactory:function O7(n){return n.routerState.root},deps:[Lr]},rG,nG,class D7{preload(e,t){return t().pipe(Ac(()=>ft(null)))}},{provide:_h,useValue:{enableTracing:!1}}];function I7(){return new d.PXZ("Router",Lr)}let sG=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[T7,oG(t),{provide:iG,useFactory:A7,deps:[[Lr,new d.FiY,new d.tp0]]},{provide:_h,useValue:r||{}},{provide:xe,useFactory:N7,deps:[pe,[new d.tBr(at),new d.FiY],_h]},{provide:UR,useFactory:S7,deps:[Lr,Lh,_h]},{provide:tG,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:nG},{provide:d.PXZ,multi:!0,useFactory:I7},[jR,{provide:d.ip1,multi:!0,useFactory:R7,deps:[jR]},{provide:aG,useFactory:k7,deps:[jR]},{provide:d.tb,multi:!0,useExisting:aG}]]}}static forChild(t){return{ngModule:n,providers:[oG(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(iG,8),d.LFG(Lr,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function S7(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new UR(n,e,t)}function N7(n,e,t={}){return t.useHash?new fe(n,e):new Mt(n,e)}function A7(n){return"guarded"}function oG(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:BR,multi:!0,useValue:n}]}let jR=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Pn.x}appInitializer(){return this.injector.get(L,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),s=this.injector.get(Lr),c=this.injector.get(_h);return"disabled"===c.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?ft(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(_h),i=this.injector.get(rG),s=this.injector.get(UR),c=this.injector.get(Lr),h=this.injector.get(d.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),s.init(),c.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function R7(n){return n.appInitializer.bind(n)}function k7(n){return n.bootstrapListener.bind(n)}const aG=new d.OlP("Router Initializer");let u0=(()=>{class n{constructor(t){this.auth=t,this.currentUser=null,this.login=function(){var r=(0,W.Z)(function*(i,s){const c=fh(),h=Zv(c,"users");return(yield Qv(h)).docs.forEach(m=>{m.data().username==i&&m.data().password==s&&localStorage.setItem("currentUser",m.data().username)}),!!localStorage.getItem("currentUser")});return function(i,s){return r.apply(this,arguments)}}(),this.signUp=function(){var r=(0,W.Z)(function*(i,s){let c=!1;const h=fh(),p=Zv(h,"users");if((yield Qv(p)).docs.forEach(v=>{v.data().username==i&&(c=!0)}),c)return[!1,c];try{return yield D4(ej(h,"users",i),{username:i,password:s}),[!0,c]}catch(v){return[!0,c]}});return function(i,s){return r.apply(this,arguments)}}(),this.logOut=()=>{localStorage.clear()}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Qy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lG=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.logOut=()=>{this.auth.logOut(),this.router.navigate([""])}}ngOnInit(){this.username=localStorage.getItem("currentUser")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Lr),d.Y36(u0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-header"]],decls:11,vars:1,consts:[[1,"navbar","navbar-expand-lg"],[1,"container"],["routerLink","/home",1,"navbar-brand"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdownMenuLink","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],[1,"dropdown-item",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),d._uU(3,"APPMOVIE"),d.qZA(),d.TgZ(4,"li",3)(5,"a",4),d._uU(6),d.qZA(),d.TgZ(7,"ul",5)(8,"li")(9,"a",6),d.NdJ("click",function(){return r.logOut()}),d._uU(10,"Log Out"),d.qZA()()()()()()),2&t&&(d.xp6(6),d.hij(" Welcome ",r.username," "))},directives:[V1],styles:[".navbar[_ngcontent-%COMP%]{background-color:#771721}.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:#fff;font-weight:800}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]{color:#fff!important;font-weight:800}"]}),n})();function F7(n,e){if(1&n&&(d.TgZ(0,"span",1),d._uU(1,"\u2605"),d.qZA()),2&n){const r=e.index;d.ekj("filled",100===e.fill)("bad",r<3)}}let cG=(()=>{class n{constructor(){this.rating=0,this.isReadOnly=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-star-rating"]],inputs:{rating:"rating",isReadOnly:"isReadOnly"},decls:2,vars:1,consts:[[3,"rate","rateChange"],[1,"star"]],template:function(t,r){1&t&&(d.TgZ(0,"ngb-rating",0),d.NdJ("rateChange",function(s){return r.rating=s}),d.YNc(1,F7,2,4,"ng-template"),d.qZA()),2&t&&d.Q6J("rate",r.rating)},directives:[FE],styles:[".star[_ngcontent-%COMP%]{font-size:1.5rem;color:#b0c4de}.filled[_ngcontent-%COMP%]{color:#1e90ff}.bad[_ngcontent-%COMP%]{color:#e7caca}.filled.bad[_ngcontent-%COMP%]{color:#ad202d}"]}),n})();const L7=["review"];function V7(n,e){if(1&n&&(d.TgZ(0,"p",9),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.hij("* ",t.errorMessage,"")}}function B7(n,e){1&n&&(d.TgZ(0,"div",10)(1,"div",11),d._UZ(2,"div")(3,"div")(4,"div"),d.qZA()())}function U7(n,e){1&n&&(d.TgZ(0,"button",12),d._uU(1,"SUBMIT YOU'RE REVIEW"),d.qZA())}let j7=(()=>{class n{constructor(t,r,i){var s=this;this.auth=t,this.route=r,this.router=i,this.id="",this.type="",this.errorMessage="",this.isLoading=!1,this.addReview=function(){var c=(0,W.Z)(function*(h){if(""!==h){let p=new Date,m=p.getFullYear()+"-"+p.getMonth()+"-"+p.getDay()+" "+p.getHours()+":"+p.getMinutes()+":"+p.getSeconds();const v=fh(),E=ej(v,s.type,s.id);s.isLoading=!0,yield T4(E,{reviews:m4({author:localStorage.getItem("currentUser"),published_on:m,review:h})}),s.isLoading=!1,alert("Review Added Successfully !"),s.textArea.nativeElement.value="",s.router.routeReuseStrategy.shouldReuseRoute=()=>!1,s.router.onSameUrlNavigation="reload",s.router.navigate(["./"],{relativeTo:s.route})}else s.errorMessage="Review field required."});return function(h){return c.apply(this,arguments)}}()}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(u0),d.Y36(Mc),d.Y36(Lr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-review"]],viewQuery:function(t,r){if(1&t&&d.Gf(L7,7),2&t){let i;d.iGM(i=d.CRH())&&(r.textArea=i.first)}},inputs:{id:"id",type:"type"},decls:10,vars:3,consts:[[3,"ngSubmit"],["form","ngForm"],[1,"mb-3"],["for","password",1,"form-label"],["type","password","id","password",1,"form-control"],["review",""],["class","errorMessage",4,"ngIf"],["class","loadingio-spinner-dual-ball-eg8vo25ctse",4,"ngIf"],["type","submit","class","btn btn-review",4,"ngIf"],[1,"errorMessage"],[1,"loadingio-spinner-dual-ball-eg8vo25ctse"],[1,"ldio-uvxi7bp66l"],["type","submit",1,"btn","btn-review"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"form",0,1),d.NdJ("ngSubmit",function(){d.CHM(i);const c=d.MAs(6);return r.addReview(c.value)}),d.TgZ(2,"div",2)(3,"label",3),d._uU(4,"You're Review :"),d.qZA(),d._UZ(5,"textarea",4,5),d.qZA(),d.YNc(7,V7,2,1,"p",6),d.YNc(8,B7,5,0,"div",7),d.YNc(9,U7,2,0,"button",8),d.qZA()}2&t&&(d.xp6(7),d.Q6J("ngIf",r.errorMessage),d.xp6(1),d.Q6J("ngIf",r.isLoading),d.xp6(1),d.Q6J("ngIf",!r.isLoading))},directives:[Ul,Vl,$a,nr],styles:[".btn-review[_ngcontent-%COMP%]{background-color:#6d0712;color:#fff;font-weight:800;display:inline-block;padding:10px 30px}.errorMessage[_ngcontent-%COMP%]{color:red;font-weight:700;font-size:14px}@keyframes ldio-uvxi7bp66l-o{0%{opacity:1;transform:translate(0 0)}49.99%{opacity:1;transform:translate(40px)}50%{opacity:0;transform:translate(40px)}to{opacity:0;transform:translate(0)}}@keyframes ldio-uvxi7bp66l{0%{transform:translate(0)}50%{transform:translate(40px)}to{transform:translate(0)}}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:40px;height:40px;border-radius:50%;top:30px;left:10px}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){background:#85a2b6;animation:ldio-uvxi7bp66l .8196721311s linear infinite;animation-delay:-.4098360656s}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){background:#bbcedd;animation:ldio-uvxi7bp66l .8196721311s linear infinite;animation-delay:0s}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){background:#85a2b6;animation:ldio-uvxi7bp66l-o .8196721311s linear infinite;animation-delay:-.4098360656s}.loadingio-spinner-dual-ball-eg8vo25ctse[_ngcontent-%COMP%]{width:64px;height:64px;display:inline-block;overflow:hidden}.ldio-uvxi7bp66l[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform:translateZ(0) scale(.64);-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-origin:0 0}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:content-box}"]}),n})();function G7(n,e){1&n&&(d.TgZ(0,"div",4)(1,"div",5),d._UZ(2,"div")(3,"div")(4,"div")(5,"div")(6,"div"),d.qZA()())}function H7(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",17),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).showReviewComponent()}),d._uU(1,"GIVE US YOUR OPINION ABOUT THIS MOVIE"),d.qZA()}}function $7(n,e){if(1&n&&d._UZ(0,"app-review",18),2&n){const t=d.oxw(2);d.Q6J("id",t.id)("type",t.type)}}function W7(n,e){if(1&n&&(d.TgZ(0,"div",20)(1,"div",21)(2,"div",22),d._uU(3),d.qZA(),d.TgZ(4,"div",23),d._uU(5),d.ALo(6,"date"),d.qZA(),d.TgZ(7,"div",24),d._uU(8),d.qZA()()()),2&n){const t=e.$implicit;d.xp6(3),d.Oqu(t.author),d.xp6(2),d.hij("Date : ",d.xi3(6,3,t.published_on,"dd-mm-yyyy"),""),d.xp6(3),d.hij("Review : ",t.review,"")}}function z7(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,W7,9,6,"div",19),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngForOf",null==t.movie[0]?null:t.movie[0].reviews)}}function q7(n,e){1&n&&(d.TgZ(0,"div",25),d._uU(1,"No review yet, be the first one and let poeple know you're oppinion about this movie"),d.qZA())}function K7(n,e){if(1&n&&(d.TgZ(0,"div")(1,"div",6)(2,"div",7),d._UZ(3,"img",8),d.qZA(),d.TgZ(4,"div",9)(5,"h1",10),d._uU(6),d.qZA(),d._UZ(7,"app-star-rating",11),d.TgZ(8,"p"),d._uU(9,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ullam quos, in similique quidem enim hic reiciendis! Modi provident ad consectetur ea assumenda, itaque beatae voluptas voluptate sit debitis ipsa quia."),d.qZA(),d.TgZ(10,"div"),d.YNc(11,H7,2,0,"button",12),d.YNc(12,$7,1,2,"app-review",13),d.qZA()()(),d.TgZ(13,"div",14)(14,"h3"),d._uU(15,"Reviews"),d.qZA(),d._UZ(16,"hr"),d.TgZ(17,"div",15),d.YNc(18,z7,2,1,"div",2),d.YNc(19,q7,2,0,"div",16),d.qZA()()()),2&n){const t=d.oxw();d.xp6(3),d.s9C("src",null==t.movie[0]?null:t.movie[0].cover,d.LSH),d.xp6(3),d.Oqu(null==t.movie[0]?null:t.movie[0].name),d.xp6(1),d.Q6J("rating",null==t.movie[0]?null:t.movie[0].rating)("isReadOnly",!0),d.xp6(4),d.Q6J("ngIf",!t.showReview),d.xp6(1),d.Q6J("ngIf",t.showReview),d.xp6(6),d.Q6J("ngIf",0!==(null==t.movie[0]||null==t.movie[0].reviews?null:t.movie[0].reviews.length)),d.xp6(1),d.Q6J("ngIf",0===(null==t.movie[0]||null==t.movie[0].reviews?null:t.movie[0].reviews.length))}}function Y7(n,e){1&n&&(d.TgZ(0,"h1",26),d._uU(1,"Error 404, Movie Not Found !"),d.qZA())}let Z7=(()=>{class n{constructor(t,r,i,s){var c=this;this.router=t,this.route=r,this.auth=i,this.http=s,this.movie=[],this.isEmpty=!1,this.errorMessage="",this.id="",this.type="",this.showReview=!1,this.isLoading=!1,this.getMovie=function(){var h=(0,W.Z)(function*(p,m){let v;const E=fh(),T=Zv(E,p);c.isLoading=!0,v=yield Qv(T),v.docs.forEach(N=>{N.id==m&&c.movie.push(Object.assign(Object.assign({},N.data()),{id:N.id}))}),c.isEmpty=0===c.movie.length,c.isLoading=!1});return function(p,m){return h.apply(this,arguments)}}(),this.showReviewComponent=()=>{this.showReview=!0}}ngOnInit(){localStorage.getItem("currentUser")?(this.type=this.route.snapshot.params.type,this.id=this.route.snapshot.params.id,this.getMovie(this.type,this.id)):this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Lr),d.Y36(Mc),d.Y36(u0),d.Y36($E))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-movie"]],decls:5,vars:3,consts:[[1,"container","mt-4"],["class","loadingio-spinner-ellipsis-huwkmw2d0fi",4,"ngIf"],[4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"loadingio-spinner-ellipsis-huwkmw2d0fi"],[1,"ldio-rp6qpts492h"],[1,"row"],[1,"col-md-6","d-flex","justify-content-center","align-items-start"],["alt","",1,"cover-img","mt-3",3,"src"],[1,"col-md-6","d-flex","flex-column","mt-5","mb-5"],[1,""],[3,"rating","isReadOnly"],["class","btn btn-review mt-3",3,"click",4,"ngIf"],[3,"id","type",4,"ngIf"],[1,"container","mt-5","mb-5"],[1,"reviews"],["class","no-review",4,"ngIf"],[1,"btn","btn-review","mt-3",3,"click"],[3,"id","type"],["class","review",4,"ngFor","ngForOf"],[1,"review"],[1,"review-details"],[1,"author"],[1,"date"],[1,"rev"],[1,"no-review"],[1,"mt-5"]],template:function(t,r){1&t&&(d._UZ(0,"app-header"),d.TgZ(1,"div",0),d.YNc(2,G7,7,0,"div",1),d.YNc(3,K7,20,8,"div",2),d.YNc(4,Y7,2,0,"h1",3),d.qZA()),2&t&&(d.xp6(2),d.Q6J("ngIf",r.isLoading),d.xp6(1),d.Q6J("ngIf",!r.isEmpty&&!r.isLoading),d.xp6(1),d.Q6J("ngIf",r.isEmpty&&!r.isLoading))},directives:[lG,nr,cG,j7,tr],pipes:[Jg],styles:[".cover-img[_ngcontent-%COMP%]{width:65%}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-weight:700}.reviews[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{font-weight:700;font-size:1.3em}.reviews[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]{margin-bottom:20px;padding:15px 20px;width:100%;background:rgba(109,7,18,.1);border-radius:5px;transition:all .2s ease}.reviews[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]:hover{background:rgba(109,7,18,.2)}.reviews[_ngcontent-%COMP%]   .no-review[_ngcontent-%COMP%]{font-weight:700}.btn-review[_ngcontent-%COMP%]{background-color:#6d0712;color:#fff;font-weight:800;display:inline-block;padding:10px 30px}.errorMessage[_ngcontent-%COMP%]{color:red;font-weight:700;font-size:14px}@keyframes ldio-uvxi7bp66l-o{0%{opacity:1;transform:translate(0 0)}49.99%{opacity:1;transform:translate(40px)}50%{opacity:0;transform:translate(40px)}to{opacity:0;transform:translate(0)}}@keyframes ldio-uvxi7bp66l{0%{transform:translate(0)}50%{transform:translate(40px)}to{transform:translate(0)}}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:40px;height:40px;border-radius:50%;top:30px;left:10px}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){background:#85a2b6;animation:ldio-uvxi7bp66l .8196721311s linear infinite;animation-delay:-.4098360656s}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){background:#bbcedd;animation:ldio-uvxi7bp66l .8196721311s linear infinite;animation-delay:0s}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){background:#85a2b6;animation:ldio-uvxi7bp66l-o .8196721311s linear infinite;animation-delay:-.4098360656s}.loadingio-spinner-dual-ball-eg8vo25ctse[_ngcontent-%COMP%]{width:64px;height:64px;display:inline-block;overflow:hidden}.ldio-uvxi7bp66l[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform:translateZ(0) scale(.64);-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-origin:0 0}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:content-box}"]}),n})();function Q7(n,e){1&n&&(d.TgZ(0,"div",9)(1,"div",10),d._UZ(2,"div")(3,"div")(4,"div")(5,"div")(6,"div"),d.qZA()())}function J7(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",13),d._UZ(1,"img",14),d.TgZ(2,"div",15)(3,"h5",16),d._uU(4),d.qZA(),d._UZ(5,"app-star-rating",17),d.TgZ(6,"p",18),d._uU(7,"Some quick example text to build on the card title and make up the bulk of the card's content."),d.qZA(),d.TgZ(8,"a",19),d.NdJ("click",function(){const s=d.CHM(t).$implicit;return d.oxw(2).goToMovieDetails("trending-movies",s.id)}),d._uU(9,"More Details"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(1),d.s9C("src",t.cover,d.LSH),d.xp6(3),d.Oqu(t.name),d.xp6(1),d.Q6J("rating",t.rating)("isReadOnly",!0)}}function X7(n,e){if(1&n&&(d.TgZ(0,"div",11),d.YNc(1,J7,10,4,"div",12),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.trandingMovies)}}function eK(n,e){1&n&&(d.TgZ(0,"div",9)(1,"div",10),d._UZ(2,"div")(3,"div")(4,"div")(5,"div")(6,"div"),d.qZA()())}function tK(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",21),d._UZ(1,"img",14),d.TgZ(2,"div",15)(3,"h5",16),d._uU(4),d.qZA(),d._UZ(5,"app-star-rating",17),d.TgZ(6,"p",18),d._uU(7,"Some quick example text to build on the card title and make up the bulk of the card's content."),d.qZA(),d.TgZ(8,"a",19),d.NdJ("click",function(){const s=d.CHM(t).$implicit;return d.oxw(2).goToMovieDetails("theatre-movies",s.id)}),d._uU(9,"More Details"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(1),d.s9C("src",t.cover,d.LSH),d.xp6(3),d.Oqu(t.name),d.xp6(1),d.Q6J("rating",t.rating)("isReadOnly",!0)}}function nK(n,e){if(1&n&&(d.TgZ(0,"div",11),d.YNc(1,tK,10,4,"div",20),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.theatreMovies)}}let rK=(()=>{class n{constructor(t,r,i){var s=this;this.router=t,this.auth=r,this.authe=i,this.trandingMovies=[],this.theatreMovies=[],this.isTrendingLoading=!1,this.isTheatreLoading=!1,this.getTrendingMovies=(0,W.Z)(function*(){let c;const h=fh(),p=Zv(h,"trending-movies");s.isTrendingLoading=!0,c=yield Qv(p),c.docs.forEach(m=>{s.trandingMovies.push(Object.assign(Object.assign({},m.data()),{id:m.id}))}),s.isTrendingLoading=!1}),this.getTheatreMovies=(0,W.Z)(function*(){let c;const h=fh(),p=Zv(h,"theatre-movies");s.isTheatreLoading=!0,c=yield Qv(p),c.docs.forEach(m=>{s.theatreMovies.push(Object.assign(Object.assign({},m.data()),{id:m.id}))}),s.isTheatreLoading=!1}),this.goToMovieDetails=(c,h)=>{this.router.navigate(["movie",c,h])}}ngOnInit(){localStorage.getItem("currentUser")?(this.getTrendingMovies(),this.getTheatreMovies()):this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Lr),d.Y36(u0),d.Y36(Qy))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:19,vars:4,consts:[[1,"home-container","container-fluid"],[1,"all-movies"],[1,"tranding-movies","navbar","navbar-expand-lg"],[1,"container-fluid"],["routerLink","",1,"navbar-brand"],[1,"btn"],["class","loadingio-spinner-ellipsis-huwkmw2d0fi",4,"ngIf"],["class","movies-thumbnail row gap-2 mt-3 d-flex justify-content-center",4,"ngIf"],[1,"theatre-movies","navbar","navbar-expand-lg","mt-5"],[1,"loadingio-spinner-ellipsis-huwkmw2d0fi"],[1,"ldio-rp6qpts492h"],[1,"movies-thumbnail","row","gap-2","mt-3","d-flex","justify-content-center"],["class","movie card col-md-3",4,"ngFor","ngForOf"],[1,"movie","card","col-md-3"],["alt","Card image cap",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[3,"rating","isReadOnly"],[1,"card-text"],[1,"btn","btn-primary",3,"click"],["class","movie card col-xm",4,"ngFor","ngForOf"],[1,"movie","card","col-xm"]],template:function(t,r){1&t&&(d._UZ(0,"app-header"),d.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h4",4),d._uU(6,"Trending Movies"),d.qZA(),d.TgZ(7,"button",5),d._uU(8,"View More"),d.qZA()()(),d.YNc(9,Q7,7,0,"div",6),d.YNc(10,X7,2,1,"div",7),d.TgZ(11,"div",8)(12,"div",3)(13,"h4",4),d._uU(14,"Popular In Theatres"),d.qZA(),d.TgZ(15,"button",5),d._uU(16,"View More"),d.qZA()()(),d.YNc(17,eK,7,0,"div",6),d.YNc(18,nK,2,1,"div",7),d.qZA()()),2&t&&(d.xp6(9),d.Q6J("ngIf",r.isTrendingLoading),d.xp6(1),d.Q6J("ngIf",!r.isTrendingLoading),d.xp6(7),d.Q6J("ngIf",r.isTheatreLoading),d.xp6(1),d.Q6J("ngIf",!r.isTheatreLoading))},directives:[lG,L1,nr,tr,cG],styles:[".home-container[_ngcontent-%COMP%]   .all-movies[_ngcontent-%COMP%]{min-height:calc(100vh - 60px);padding:20px 40px}.home-container[_ngcontent-%COMP%]   .all-movies[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{border-left:8px solid #AD202D;padding-left:8px}.home-container[_ngcontent-%COMP%]   .all-movies[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:800;color:#ad202d;box-shadow:none}.home-container[_ngcontent-%COMP%]   .all-movies[_ngcontent-%COMP%]   .movie[_ngcontent-%COMP%]{width:18rem}.home-container[_ngcontent-%COMP%]   .all-movies[_ngcontent-%COMP%]   .movie[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;object-fit:cover}.home-container[_ngcontent-%COMP%]   .popular-movies[_ngcontent-%COMP%]{min-height:calc(100vh - 60px);border:1px solid black;padding:20px 40px}"]}),n})();function iK(n,e){if(1&n&&(d.TgZ(0,"p",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("* ",t.errorMessage1,"")}}function sK(n,e){1&n&&(d.TgZ(0,"div",22)(1,"div",23),d._UZ(2,"div")(3,"div")(4,"div"),d.qZA()())}function oK(n,e){1&n&&(d.TgZ(0,"button",24),d._uU(1,"LOGIN"),d.qZA())}function aK(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",7)(1,"h1"),d._uU(2,"SIGN IN"),d.qZA(),d.TgZ(3,"form",8,9),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.MAs(9),s=d.MAs(14);return d.oxw().login(i.value,s.value)}),d.TgZ(5,"div",10)(6,"label",11),d._uU(7,"Username :"),d.qZA(),d._UZ(8,"input",12,13),d.qZA(),d.TgZ(10,"div",10)(11,"label",14),d._uU(12,"Password :"),d.qZA(),d._UZ(13,"input",15,16),d.qZA(),d.TgZ(15,"p",17),d.NdJ("click",function(){return d.CHM(t),d.oxw().showLoginForm=!1}),d._uU(16,"Need an account? Click Here."),d.qZA(),d.YNc(17,iK,2,1,"p",18),d.YNc(18,sK,5,0,"div",19),d.YNc(19,oK,2,0,"button",20),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(17),d.Q6J("ngIf",t.errorMessage1),d.xp6(1),d.Q6J("ngIf",t.isLoading),d.xp6(1),d.Q6J("ngIf",!t.isLoading)}}function lK(n,e){if(1&n&&(d.TgZ(0,"p",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("* ",t.errorMessage2,"")}}function cK(n,e){1&n&&(d.TgZ(0,"div",22)(1,"div",23),d._UZ(2,"div")(3,"div")(4,"div"),d.qZA()())}function uK(n,e){1&n&&(d.TgZ(0,"button",24),d._uU(1,"CREATE NEW ACCOUNT"),d.qZA())}function dK(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",7)(1,"h1"),d._uU(2,"SIGN UP"),d.qZA(),d.TgZ(3,"form",8,25),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.MAs(9),s=d.MAs(14);return d.oxw().signUp(i.value,s.value)}),d.TgZ(5,"div",10)(6,"label",11),d._uU(7,"Username :"),d.qZA(),d._UZ(8,"input",12,26),d.qZA(),d.TgZ(10,"div",10)(11,"label",14),d._uU(12,"Password :"),d.qZA(),d._UZ(13,"input",15,27),d.qZA(),d.TgZ(15,"p",17),d.NdJ("click",function(){return d.CHM(t),d.oxw().showLoginForm=!0}),d._uU(16,"Already a user? Login."),d.qZA(),d.YNc(17,lK,2,1,"p",18),d.YNc(18,cK,5,0,"div",19),d.YNc(19,uK,2,0,"button",20),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(17),d.Q6J("ngIf",t.errorMessage2),d.xp6(1),d.Q6J("ngIf",t.isLoading),d.xp6(1),d.Q6J("ngIf",!t.isLoading)}}let uG=(()=>{class n{constructor(t,r){var i=this;this.router=t,this.auth=r,this.errorMessage1="",this.errorMessage2="",this.showLoginForm=!0,this.isLoading=!1,this.login=function(){var s=(0,W.Z)(function*(c,h){0!==c.trim().length?0!==h.trim().length?(i.errorMessage1="",i.isLoading=!0,(yield i.auth.login(c,h))?(i.errorMessage1="",i.router.navigate(["home"])):i.errorMessage1="Invalid credentials.",i.isLoading=!1):i.errorMessage1="Password is required.":i.errorMessage1="Username is required."});return function(c,h){return s.apply(this,arguments)}}(),this.signUp=function(){var s=(0,W.Z)(function*(c,h){if(0===c.trim().length)return void(i.errorMessage2="Username is required.");if(0===h.trim().length)return void(i.errorMessage2="Password is required.");i.errorMessage2="",i.isLoading=!0;const[p,m]=yield i.auth.signUp(c,h);m?i.errorMessage2="This username is linked to an existing account.":p?(alert("Account Created ! You will be redirected to login page."),i.errorMessage1="",i.showLoginForm=!0):alert("Account Creation Faild ! Please Try Again."),i.isLoading=!1});return function(c,h){return s.apply(this,arguments)}}()}ngOnInit(){localStorage.getItem("currentUser")&&this.router.navigate(["home"])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Lr),d.Y36(u0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:14,vars:2,consts:[[1,"login-container"],[1,"login-content"],[1,"row"],[1,"col-lg-6","col-md-12","left","text-center"],[1,"content"],[1,"line"],["class","col-lg-6 col-md-12 right",4,"ngIf"],[1,"col-lg-6","col-md-12","right"],[3,"ngSubmit"],["form1","ngForm"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","autocomplete","off",1,"form-control"],["username1",""],["for","password",1,"form-label"],["type","password","id","password",1,"form-control"],["password1",""],[1,"account-message",3,"click"],["class","errorMessage",4,"ngIf"],["class","loadingio-spinner-dual-ball-eg8vo25ctse",4,"ngIf"],["type","submit","class","btn btn-primary",4,"ngIf"],[1,"errorMessage"],[1,"loadingio-spinner-dual-ball-eg8vo25ctse"],[1,"ldio-uvxi7bp66l"],["type","submit",1,"btn","btn-primary"],["form2","ngForm"],["username2",""],["password2",""]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),d._uU(6,"Nice to see you"),d.qZA(),d.TgZ(7,"h1"),d._uU(8,"WELCOME TO APPMOVIE"),d.qZA(),d._UZ(9,"span",5),d.TgZ(10,"p"),d._uU(11," Best movie platform, where you can see and write movies reviews. We guarantee you the best movies selection, so what are you waiting for ? Login to get started. "),d.qZA()()(),d.YNc(12,aK,20,3,"div",6),d.YNc(13,dK,20,3,"div",6),d.qZA()()()),2&t&&(d.xp6(12),d.Q6J("ngIf",r.showLoginForm),d.xp6(1),d.Q6J("ngIf",!r.showLoginForm))},directives:[nr,Ul,Vl,$a],styles:['.login-container[_ngcontent-%COMP%]{padding:50px 0;width:100vw;min-height:100vh;display:flex;justify-content:center;align-items:center;background-image:url(login-gradient.78ea253f748c73dc.jpg);background-size:cover}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]{width:80%;border-radius:10px;overflow:hidden;border:2px solid white}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{position:relative;display:flex;height:500px;justify-content:center;align-items:center;flex-direction:column;padding:0 30px;background:url(login-back.c53f466552174669.jpg);background-size:cover;background-position:center;color:#fff}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]:before{position:absolute;content:"";top:0px;left:0px;bottom:0px;right:0px;background-color:#000;opacity:.3}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{z-index:100}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:900;font-size:3.2em;margin:0}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:inline-block;width:100px;height:5px;margin:20px 0;border-radius:10px;background-color:#fff}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;height:500px;flex-direction:column;justify-content:center;padding:0 30px;background-color:#fff}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;border-radius:0;border-left:4px solid #ff0019;background:#f7e5e8;box-shadow:none}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ad202d;display:inline-block;padding:10px 60px;font-weight:700;margin-top:20px;box-shadow:none}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:30px;font-weight:800;color:#83121e}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .errorMessage[_ngcontent-%COMP%]{color:red;font-weight:700;font-size:14px}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .account-message[_ngcontent-%COMP%]{cursor:pointer;font-size:14px;font-weight:700}@keyframes ldio-uvxi7bp66l-o{0%{opacity:1;transform:translate(0 0)}49.99%{opacity:1;transform:translate(40px)}50%{opacity:0;transform:translate(40px)}to{opacity:0;transform:translate(0)}}@keyframes ldio-uvxi7bp66l{0%{transform:translate(0)}50%{transform:translate(40px)}to{transform:translate(0)}}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:40px;height:40px;border-radius:50%;top:30px;left:10px}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){background:#85a2b6;animation:ldio-uvxi7bp66l .8196721311s linear infinite;animation-delay:-.4098360656s}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){background:#bbcedd;animation:ldio-uvxi7bp66l .8196721311s linear infinite;animation-delay:0s}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){background:#85a2b6;animation:ldio-uvxi7bp66l-o .8196721311s linear infinite;animation-delay:-.4098360656s}.loadingio-spinner-dual-ball-eg8vo25ctse[_ngcontent-%COMP%]{width:64px;height:64px;display:inline-block;overflow:hidden}.ldio-uvxi7bp66l[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform:translateZ(0) scale(.64);-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-origin:0 0}.ldio-uvxi7bp66l[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:content-box}']}),n})();const hK=[{path:"",component:uG},{path:"home",component:rK},{path:"movie/:type/:id",component:Z7},{path:"**",component:uG}];let fK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[sG.forRoot(hK)],sG]}),n})(),pK=(()=>{class n{constructor(){this.title="movies-website-angular"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[PR],styles:[""]}),n})();var gK=M(4093);const dG="@firebase/database";let GR="";class _K{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,B.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,B.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class yK{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,B.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const fG=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _K(e)}}catch(e){}return new yK},yh=fG("localStorage"),HR=fG("sessionStorage"),kg=new yi.Yd("@firebase/database"),pG=function(){let n=1;return function(){return n++}}(),gG=function(n){const e=(0,B.dS)(n),t=new B.gQ;t.update(e);const r=t.digest();return B.US.encodeByteArray(r)},d0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=d0.apply(null,r):e+="object"==typeof r?(0,B.Pz)(r):r,e+=" "}return e};let vh=null,mG=!0;const Vr=function(...n){if(!0===mG&&(mG=!1,null===vh&&!0===HR.get("logging_enabled")&&function(n,e){(0,B.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(kg.logLevel=yi.in.VERBOSE,vh=kg.log.bind(kg),e&&HR.set("logging_enabled",!0)):"function"==typeof n?vh=n:(vh=null,HR.remove("logging_enabled"))}(!0)),vh){const e=d0.apply(null,n);vh(e)}},h0=function(n){return function(...e){Vr(n,...e)}},$R=function(...n){const e="FIREBASE INTERNAL ERROR: "+d0(...n);kg.error(e)},_a=function(...n){const e=`FIREBASE FATAL ERROR: ${d0(...n)}`;throw kg.error(e),new Error(e)},Ci=function(...n){const e="FIREBASE WARNING: "+d0(...n);kg.warn(e)},B1=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},pl="[MIN_NAME]",ya="[MAX_NAME]",bh=function(n,e){if(n===e)return 0;if(n===pl||e===ya)return-1;if(e===pl||n===ya)return 1;{const t=U1(n),r=U1(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},wK=function(n,e){return n===e?0:n<e?-1:1},f0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,B.Pz)(e))},WR=function(n){if("object"!=typeof n||null===n)return(0,B.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,B.Pz)(e[r]),t+=":",t+=WR(n[e[r]]);return t+="}",t},yG=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Br(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const vG=function(n){(0,B.hu)(!B1(n),"Invalid JSON number");const r=1023;let i,s,c,h,p;0===n?(s=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const m=[];for(p=52;p;p-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)m.push(s%2?1:0),s=Math.floor(s/2);m.push(i?1:0),m.reverse();const v=m.join("");let E="";for(p=0;p<64;p+=8){let T=parseInt(v.substr(p,8),2).toString(16);1===T.length&&(T="0"+T),E+=T}return E.toLowerCase()},TK=new RegExp("^-?(0*)\\d{1,10}$"),U1=function(n){if(TK.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Pg=function(n){try{n()}catch(e){setTimeout(()=>{throw Ci("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},p0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class SK{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ci(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class NK{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Vr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ci(e)}}let g0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const TG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,NG="websocket",AG="long_polling";class KR{constructor(e,t,r,i,s=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yh.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yh.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function MG(n,e,t){let r;if((0,B.hu)("string"==typeof e,"typeof type must == string"),(0,B.hu)("object"==typeof t,"typeof params must == object"),e===NG)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==AG)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function AK(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Br(t,(s,c)=>{i.push(s+"="+c)}),r+i.join("&")}class MK{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,B.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,B.p$)(this.counters_)}}const YR={},ZR={};function QR(n){const e=n.toString();return YR[e]||(YR[e]=new MK),YR[e]}class OK{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Pg(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Oc{constructor(e,t,r,i,s,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=h0(e),this.stats_=QR(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),MG(t,AG,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new OK(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,B.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new JR((...s)=>{const[c,h,p,m,v]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&TG.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Oc.forceAllow_=!0}static forceDisallow(){Oc.forceDisallow_=!0}static isAvailable(){return!((0,B.Yr)()||!Oc.forceAllow_&&(Oc.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,B.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,B.h$)(t),i=yG(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,B.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,B.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class JR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=pG(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=JR.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Vr("frame writing exception"),h.stack&&Vr(h.stack),Vr(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Vr("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,B.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Vr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let G1=null;"undefined"!=typeof MozWebSocket?G1=MozWebSocket:"undefined"!=typeof WebSocket&&(G1=WebSocket);let Fg=(()=>{class n{constructor(t,r,i,s,c,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=h0(this.connId),this.stats_=QR(r),this.connURL=n.connectionURL_(r,h,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,c){const h={v:"5"};return!(0,B.Yr)()&&"undefined"!=typeof location&&location.hostname&&TG.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),c&&(h.p=c),MG(t,NG,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yh.set("previous_websocket_failure",!0);try{let i;if((0,B.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${GR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,p=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;p&&(c.proxy={origin:p})}this.mySock=new G1(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==G1&&!n.forceDisallow_}static previouslyFailed(){return yh.isInMemoryStorage||!0===yh.get("previous_websocket_failure")}markConnectionHealthy(){yh.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,B.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,B.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,B.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=yG(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),LG=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Oc,Fg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Fg&&Fg.isAvailable();let i=r&&!Fg.previouslyFailed();if(t.webSocketOnly&&(r||Ci("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Fg];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class $G{constructor(e,t,r,i,s,c,h,p,m,v){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=m,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=h0("c:"+this.id+":"),this.transportManager_=new LG(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=p0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=f0("t",e),r=f0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=f0("t",e),r=f0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=f0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?$R("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$R("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ci("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),p0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):p0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class WG{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class zG{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,B.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,B.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class H1 extends zG{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,B.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new H1}getInitialEvent(e){return(0,B.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class en{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Kt(){return new en("")}function Ot(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Rc(n){return n.pieces_.length-n.pieceNum_}function hn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new en(n.pieces_,e)}function ek(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function m0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function YG(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new en(e,0)}function kn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof en)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new en(t,0)}function Rt(n){return n.pieceNum_>=n.pieces_.length}function Hi(n,e){const t=Ot(n),r=Ot(e);if(null===t)return e;if(t===r)return Hi(hn(n),hn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function tk(n,e){if(Rc(n)!==Rc(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function io(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Rc(n)>Rc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class tY{constructor(e,t){this.errorPrefix_=t,this.parts_=m0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,B.ug)(this.parts_[r]);ZG(this)}}function ZG(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wh(n))}function wh(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class nk extends zG{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new nk}getInitialEvent(e){return(0,B.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _0=1e3;let W1,Eh=(()=>{class n extends WG{constructor(t,r,i,s,c,h,p,m){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=n.nextPersistentConnectionId_++,this.log_=h0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!(0,B.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&H1.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,c={r:s,a:t,b:r};this.log_((0,B.Pz)(c)),(0,B.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new B.BH,i={p:t._path.toString(),q:t._queryObject},s={action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,p,!1,null),r.resolve(p)):r.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||s!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,s){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,B.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,p=>{const m=p.d,v=p.s;n.warnOnListenWarnings_(m,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==v&&this.removeListen_(i,s),t.onComplete&&t.onComplete(v,m))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,B.r3)(t,"w")){const i=(0,B.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Ci(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,B.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,B.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const c=s.s,h=s.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,B.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const c={p:t};s&&(c.q=i,c.t=s),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,B.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):$R("Unrecognized action received from server: "+(0,B.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,B.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=_0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,W.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,m=null;const v=function(){m?m.close():(p=!0,s())};t.realtime_={close:v,sendRequest:function(N){(0,B.hu)(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(N)}};const T=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[N,O]=yield Promise.all([t.authTokenProvider_.getToken(T),t.appCheckTokenProvider_.getToken(T)]);p?Vr("getToken() completed but was canceled"):(Vr("getToken() completed. Creating connection."),t.authToken_=N&&N.accessToken,t.appCheckToken_=O&&O.token,m=new $G(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,z=>{Ci(z+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(N){t.log_("Failed to get token: "+N),p||(t.repoInfo_.nodeAdmin&&Ci(N),v())}}})()}interrupt(t){Vr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Vr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,B.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>WR(c)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new en(t).toString();let s;if(this.listens.has(i)){const c=this.listens.get(i);s=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Vr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Vr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,B.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+GR.replace(/\./g,"-")]=1,(0,B.uI)()?t["framework.cordova"]=1:(0,B.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=H1.getInstance().currentlyOnline();return(0,B.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Lt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Lt(e,t)}}class $1{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Lt(pl,e),i=new Lt(pl,t);return 0!==this.compare(r,i)}minPost(){return Lt.MIN}}class XG extends $1{static get __EMPTY_NODE(){return W1}static set __EMPTY_NODE(e){W1=e}compare(e,t){return bh(e.name,t.name)}isDefinedOn(e){throw(0,B.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Lt.MIN}maxPost(){return new Lt(ya,W1)}makePost(e,t){return(0,B.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Lt(e,W1)}toString(){return".key"}}const va=new XG;class z1{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let ik,ko=(()=>{class n{constructor(t,r,i,s,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:ss.EMPTY_NODE,this.right=null!=c?c:ss.EMPTY_NODE}copy(t,r,i,s,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const c=i(t,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===c?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ss.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ss.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ss{constructor(e,t=ss.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ss(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ko.BLACK,null,null))}remove(e){return new ss(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ko.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new z1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new z1(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new z1(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new z1(this.root_,null,this.comparator_,!0,e)}}function uY(n,e){return bh(n.name,e.name)}function rk(n,e){return bh(n,e)}ss.EMPTY_NODE=new class cY{copy(e,t,r,i,s){return this}insert(e,t,r){return new ko(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const eH=function(n){return"number"==typeof n?"number:"+vG(n):"string:"+n},tH=function(n){if(n.isLeafNode()){const e=n.val();(0,B.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,B.r3)(e,".sv"),"Priority must be a string or number.")}else(0,B.hu)(n===ik||n.isEmpty(),"priority of unexpected type.");(0,B.hu)(n===ik||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let nH,rH,iH,Lg=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,B.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),tH(this.priorityNode_)}static set __childrenNodeConstructor(t){nH=t}static get __childrenNodeConstructor(){return nH}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Rt(t)?this:".priority"===Ot(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ot(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,B.hu)(".priority"!==i||1===Rc(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(hn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+eH(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?vG(this.value_):this.value_,this.lazyHash_=gG(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,B.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,B.hu)(s>=0,"Unknown leaf type: "+r),(0,B.hu)(c>=0,"Unknown leaf type: "+i),s===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const yn=new class pY extends $1{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?bh(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Lt.MIN}maxPost(){return new Lt(ya,new Lg("[PRIORITY-POST]",iH))}makePost(e,t){const r=rH(e);return new Lt(t,new Lg("[PRIORITY-POST]",r))}toString(){return".priority"}},gY=Math.log(2);class mY{constructor(e){this.count=parseInt(Math.log(e+1)/gY,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const q1=function(n,e,t,r){n.sort(e);const i=function(p,m){const v=m-p;let E,T;if(0===v)return null;if(1===v)return E=n[p],T=t?t(E):E,new ko(T,E.node,ko.BLACK,null,null);{const N=parseInt(v/2,10)+p,O=i(p,N),z=i(N+1,m);return E=n[N],T=t?t(E):E,new ko(T,E.node,ko.BLACK,O,z)}},h=function(p){let m=null,v=null,E=n.length;const T=function(O,z){const ae=E-O,Re=E;E-=O;const ke=i(ae+1,Re),Ye=n[ae],Qe=t?t(Ye):Ye;N(new ko(Qe,Ye.node,z,null,ke))},N=function(O){m?(m.left=O,m=O):(v=O,m=O)};for(let O=0;O<p.count;++O){const z=p.nextBitIsOne(),ae=Math.pow(2,p.count-(O+1));z?T(ae,ko.BLACK):(T(ae,ko.BLACK),T(ae,ko.RED))}return v}(new mY(n.length));return new ss(r||e,h)};let sk;const Vg={};class gl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,B.hu)(Vg&&yn,"ChildrenNode.ts has not been loaded"),sk=sk||new gl({".priority":Vg},{".priority":yn}),sk}get(e){const t=(0,B.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ss?t:null}hasIndex(e){return(0,B.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,B.hu)(e!==va,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Lt.Wrap);let h,c=s.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=s.getNext();h=i?q1(r,e.getCompare()):Vg;const p=e.toString(),m=Object.assign({},this.indexSet_);m[p]=e;const v=Object.assign({},this.indexes_);return v[p]=h,new gl(v,m)}addToIndexes(e,t){const r=(0,B.UI)(this.indexes_,(i,s)=>{const c=(0,B.DV)(this.indexSet_,s);if((0,B.hu)(c,"Missing index implementation for "+s),i===Vg){if(c.isDefinedOn(e.node)){const h=[],p=t.getIterator(Lt.Wrap);let m=p.getNext();for(;m;)m.name!==e.name&&h.push(m),m=p.getNext();return h.push(e),q1(h,c.getCompare())}return Vg}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new Lt(e.name,h))),p.insert(e,e.node)}});return new gl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,B.UI)(this.indexes_,i=>{if(i===Vg)return i;{const s=t.get(e.name);return s?i.remove(new Lt(e.name,s)):i}});return new gl(r,this.indexSet_)}}let y0,Tt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&tH(this.priorityNode_),this.children_.isEmpty()&&(0,B.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return y0||(y0=new n(new ss(rk),null,gl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||y0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?y0:r}}getChild(t){const r=Ot(t);return null===r?this:this.getImmediateChild(r).getChild(hn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,B.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Lt(t,r);let s,c;r.isEmpty()?(s=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?y0:this.priorityNode_;return new n(s,h,c)}}updateChild(t,r){const i=Ot(t);if(null===i)return r;{(0,B.hu)(".priority"!==Ot(t)||1===Rc(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(hn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,c=!0;if(this.forEachChild(yn,(h,p)=>{r[h]=p.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!t&&c&&s<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+eH(this.getPriority().val())+":"),this.forEachChild(yn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":gG(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const c=s.getPredecessorKey(new Lt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Lt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Lt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Lt.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Lt.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)>0;)s.getNext(),c=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===v0?-1:0}withIndex(t){if(t===va||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===va||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(yn),s=r.getIterator(yn);let c=i.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===va?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const v0=new class _Y extends Tt{constructor(){super(new ss(rk),Tt.EMPTY_NODE,gl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Tt.EMPTY_NODE}isEmpty(){return!1}};function Vn(n,e=null){if(null===n)return Tt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,B.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Lg(n,Vn(e));if(n instanceof Array){let t=Tt.EMPTY_NODE;return Br(n,(r,i)=>{if((0,B.r3)(n,r)&&"."!==r.substring(0,1)){const s=Vn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Vn(e))}{const t=[];let r=!1;if(Br(n,(c,h)=>{if("."!==c.substring(0,1)){const p=Vn(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new Lt(c,p)))}}),0===t.length)return Tt.EMPTY_NODE;const s=q1(t,uY,c=>c.name,rk);if(r){const c=q1(t,yn.getCompare());return new Tt(s,Vn(e),new gl({".priority":c},{".priority":yn}))}return new Tt(s,Vn(e),gl.Default)}}Object.defineProperties(Lt,{MIN:{value:new Lt(pl,Tt.EMPTY_NODE)},MAX:{value:new Lt(ya,v0)}}),XG.__EMPTY_NODE=Tt.EMPTY_NODE,Lg.__childrenNodeConstructor=Tt,function dY(n){ik=n}(v0),function fY(n){iH=n}(v0),function hY(n){rH=n}(Vn);class ok extends $1{constructor(e){super(),this.indexPath_=e,(0,B.hu)(!Rt(e)&&".priority"!==Ot(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?bh(e.name,t.name):s}makePost(e,t){const r=Vn(e),i=Tt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Lt(t,i)}maxPost(){const e=Tt.EMPTY_NODE.updateChild(this.indexPath_,v0);return new Lt(ya,e)}toString(){return m0(this.indexPath_,0).join("/")}}const ak=new class vY extends $1{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?bh(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Lt.MIN}maxPost(){return Lt.MAX}makePost(e,t){const r=Vn(e);return new Lt(t,r)}toString(){return".value"}};function w0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class uk{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ya}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yn}copy(){const e=new uk;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function uH(n){const e={};if(n.isDefault())return e;let t;return n.index_===yn?t="$priority":n.index_===ak?t="$value":n.index_===va?t="$key":((0,B.hu)(n.index_ instanceof ok,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,B.Pz)(t),n.startSet_&&(e.startAt=(0,B.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,B.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,B.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,B.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function dH(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==yn&&(e.i=n.index_.toString()),e}class Y1 extends WG{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=h0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,B.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const c=Y1.getListenId_(e,r),h={};this.listens_[c]=h;const p=uH(e._queryParams);this.restRequest_(s+".json",p,(m,v)=>{let E=v;if(404===m&&(E=null,m=null),null===m&&this.onDataUpdate_(s,E,!1,r),(0,B.DV)(this.listens_,c)===h){let T;T=m?401===m?"permission_denied":"rest_error:"+m:"ok",i(T,null)}})}unlisten(e,t){const r=Y1.getListenId_(e,t);delete this.listens_[r]}get(e){const t=uH(e._queryParams),r=e._path.toString(),i=new B.BH;return this.restRequest_(r+".json",t,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,B.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,B.cI)(h.responseText)}catch(m){Ci("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&Ci("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class NY{constructor(){this.rootNode_=Tt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Z1(){return{value:null,children:new Map}}function jg(n,e,t){if(Rt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ot(e);n.children.has(r)||n.children.set(r,Z1()),jg(n.children.get(r),e=hn(e),t)}}function pk(n,e,t){null!==n.value?t(e,n.value):function AY(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{pk(i,new en(e.toString()+"/"+r),t)})}class MY{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Br(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class RY{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new MY(e);const r=1e4+2e4*Math.random();p0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Br(e,(i,s)=>{s>0&&(0,B.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),p0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var so=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(so||(so={})),so))();function _k(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Q1{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=so.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Rt(this.path)){if(null!=this.affectedTree.value)return(0,B.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new en(e));return new Q1(Kt(),t,this.revert)}}return(0,B.hu)(Ot(this.path)===e,"operationForChild called for unrelated child."),new Q1(hn(this.path),this.affectedTree,this.revert)}}class Ch{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=so.OVERWRITE}operationForChild(e){return Rt(this.path)?new Ch(this.source,Kt(),this.snap.getImmediateChild(e)):new Ch(this.source,hn(this.path),this.snap)}}class Gg{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=so.MERGE}operationForChild(e){if(Rt(this.path)){const t=this.children.subtree(new en(e));return t.isEmpty()?null:t.value?new Ch(this.source,Kt(),t.value):new Gg(this.source,Kt(),t)}return(0,B.hu)(Ot(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gg(this.source,hn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class kc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Rt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ot(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function D0(n,e,t,r,i,s){const c=r.filter(h=>h.type===t);c.sort((h,p)=>function LY(n,e,t){if(null==e.childName||null==t.childName)throw(0,B.g5)("Should only compare child_ events.");const r=new Lt(e.childName,e.snapshotNode),i=new Lt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),c.forEach(h=>{const p=function FY(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(m=>{m.respondsTo(h.type)&&e.push(m.createEvent(p,n.query_))})})}function J1(n,e){return{eventCache:n,serverCache:e}}function T0(n,e,t,r){return J1(new kc(e,t,r),n.serverCache)}function fH(n,e,t,r){return J1(n.eventCache,new kc(e,t,r))}function X1(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Dh(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let yk;class vn{constructor(e,t=(()=>(yk||(yk=new ss(wK)),yk))()){this.value=e,this.children=t}static fromObject(e){let t=new vn(null);return Br(e,(r,i)=>{t=t.set(new en(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Kt(),value:this.value};if(Rt(e))return null;{const r=Ot(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(hn(e),t);return null!=s?{path:kn(new en(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Rt(e))return this;{const t=Ot(e),r=this.children.get(t);return null!==r?r.subtree(hn(e)):new vn(null)}}set(e,t){if(Rt(e))return new vn(t,this.children);{const r=Ot(e),s=(this.children.get(r)||new vn(null)).set(hn(e),t),c=this.children.insert(r,s);return new vn(this.value,c)}}remove(e){if(Rt(e))return this.children.isEmpty()?new vn(null):new vn(null,this.children);{const t=Ot(e),r=this.children.get(t);if(r){const i=r.remove(hn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new vn(null):new vn(this.value,s)}return this}}get(e){if(Rt(e))return this.value;{const t=Ot(e),r=this.children.get(t);return r?r.get(hn(e)):null}}setTree(e,t){if(Rt(e))return t;{const r=Ot(e),s=(this.children.get(r)||new vn(null)).setTree(hn(e),t);let c;return c=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new vn(this.value,c)}}fold(e){return this.fold_(Kt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(kn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Kt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Rt(e))return null;{const s=Ot(e),c=this.children.get(s);return c?c.findOnPath_(hn(e),kn(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Kt(),t)}foreachOnPath_(e,t,r){if(Rt(e))return this;{this.value&&r(t,this.value);const i=Ot(e),s=this.children.get(i);return s?s.foreachOnPath_(hn(e),kn(t,i),r):new vn(null)}}foreach(e){this.foreach_(Kt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(kn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Po{constructor(e){this.writeTree_=e}static empty(){return new Po(new vn(null))}}function I0(n,e,t){if(Rt(e))return new Po(new vn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const c=Hi(i,e);return s=s.updateChild(c,t),new Po(n.writeTree_.set(i,s))}{const i=new vn(t),s=n.writeTree_.setTree(e,i);return new Po(s)}}}function vk(n,e,t){let r=n;return Br(t,(i,s)=>{r=I0(r,kn(e,i),s)}),r}function pH(n,e){if(Rt(e))return Po.empty();{const t=n.writeTree_.setTree(e,new vn(null));return new Po(t)}}function bk(n,e){return null!=Th(n,e)}function Th(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Hi(t.path,e)):null}function gH(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(yn,(r,i)=>{e.push(new Lt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Lt(r,i.value))}),e}function Pc(n,e){if(Rt(e))return n;{const t=Th(n,e);return new Po(null!=t?new vn(t):n.writeTree_.subtree(e))}}function wk(n){return n.writeTree_.isEmpty()}function Hg(n,e){return mH(Kt(),n.writeTree_,e)}function mH(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,B.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=mH(kn(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(kn(n,".priority"),r)),t}}function eT(n,e){return wH(e,n)}function HY(n,e){if(n.snap)return io(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&io(kn(n.path,t),e))return!0;return!1}function WY(n){return n.visible}function _H(n,e,t){let r=Po.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const c=s.path;let h;if(s.snap)io(t,c)?(h=Hi(t,c),r=I0(r,h,s.snap)):io(c,t)&&(h=Hi(c,t),r=I0(r,Kt(),s.snap.getChild(h)));else{if(!s.children)throw(0,B.g5)("WriteRecord should have .snap or .children");if(io(t,c))h=Hi(t,c),r=vk(r,h,s.children);else if(io(c,t))if(h=Hi(c,t),Rt(h))r=vk(r,Kt(),s.children);else{const p=(0,B.DV)(s.children,Ot(h));if(p){const m=p.getChild(hn(h));r=I0(r,Kt(),m)}}}}}return r}function yH(n,e,t,r,i){if(r||i){const s=Pc(n.visibleWrites,e);return!i&&wk(s)?t:i||null!=t||bk(s,Kt())?Hg(_H(n.allWrites,function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(io(m.path,e)||io(e,m.path))},e),t||Tt.EMPTY_NODE):null}{const s=Th(n.visibleWrites,e);if(null!=s)return s;{const c=Pc(n.visibleWrites,e);return wk(c)?t:null!=t||bk(c,Kt())?Hg(c,t||Tt.EMPTY_NODE):null}}}function tT(n,e,t,r){return yH(n.writeTree,n.treePath,e,t,r)}function Ek(n,e){return function zY(n,e,t){let r=Tt.EMPTY_NODE;const i=Th(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(yn,(s,c)=>{r=r.updateImmediateChild(s,c)}),r;if(t){const s=Pc(n.visibleWrites,e);return t.forEachChild(yn,(c,h)=>{const p=Hg(Pc(s,new en(c)),h);r=r.updateImmediateChild(c,p)}),gH(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return gH(Pc(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function vH(n,e,t,r){return function qY(n,e,t,r,i){(0,B.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=kn(e,t);if(bk(n.visibleWrites,s))return null;{const c=Pc(n.visibleWrites,s);return wk(c)?i.getChild(t):Hg(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function nT(n,e){return function YY(n,e){return Th(n.visibleWrites,e)}(n.writeTree,kn(n.treePath,e))}function Ck(n,e,t){return function KY(n,e,t,r){const i=kn(e,t),s=Th(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Hg(Pc(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function bH(n,e){return wH(kn(n.treePath,e),n.writeTree)}function wH(n,e){return{treePath:n,writeTree:e}}class XY{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,B.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,B.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,w0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,function b0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,function Ug(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,B.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,w0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const EH=new class eZ{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Dk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new kc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ck(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Dh(this.viewCache_),s=function JY(n,e,t,r,i,s){return function ZY(n,e,t,r,i,s,c){let h;const p=Pc(n.visibleWrites,e),m=Th(p,Kt());if(null!=m)h=m;else{if(null==t)return[];h=Hg(p,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const v=[],E=c.getCompare(),T=s?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let N=T.getNext();for(;N&&v.length<i;)0!==E(N,r)&&v.push(N),N=T.getNext();return v}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function CH(n,e,t,r,i,s){const c=e.eventCache;if(null!=nT(r,t))return e;{let h,p;if(Rt(t))if((0,B.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Dh(e),E=Ek(r,m instanceof Tt?m:Tt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),E,s)}else{const m=tT(r,Dh(e));h=n.filter.updateFullNode(e.eventCache.getNode(),m,s)}else{const m=Ot(t);if(".priority"===m){(0,B.hu)(1===Rc(t),"Can't have a priority with additional path components");const v=c.getNode();p=e.serverCache.getNode();const E=vH(r,t,v,p);h=null!=E?n.filter.updatePriority(v,E):c.getNode()}else{const v=hn(t);let E;if(c.isCompleteForChild(m)){p=e.serverCache.getNode();const T=vH(r,t,c.getNode(),p);E=null!=T?c.getNode().getImmediateChild(m).updateChild(v,T):c.getNode().getImmediateChild(m)}else E=Ck(r,m,e.serverCache);h=null!=E?n.filter.updateChild(c.getNode(),m,E,v,i,s):c.getNode()}}return T0(e,h,c.isFullyInitialized()||Rt(t),n.filter.filtersNodes())}}function rT(n,e,t,r,i,s,c,h){const p=e.serverCache;let m;const v=c?n.filter:n.filter.getIndexedFilter();if(Rt(t))m=v.updateFullNode(p.getNode(),r,null);else if(v.filtersNodes()&&!p.isFiltered()){const N=p.getNode().updateChild(t,r);m=v.updateFullNode(p.getNode(),N,null)}else{const N=Ot(t);if(!p.isCompleteForPath(t)&&Rc(t)>1)return e;const O=hn(t),ae=p.getNode().getImmediateChild(N).updateChild(O,r);m=".priority"===N?v.updatePriority(p.getNode(),ae):v.updateChild(p.getNode(),N,ae,O,EH,null)}const E=fH(e,m,p.isFullyInitialized()||Rt(t),v.filtersNodes());return CH(n,E,t,i,new Dk(i,E,s),h)}function Tk(n,e,t,r,i,s,c){const h=e.eventCache;let p,m;const v=new Dk(i,e,s);if(Rt(t))m=n.filter.updateFullNode(e.eventCache.getNode(),r,c),p=T0(e,m,!0,n.filter.filtersNodes());else{const E=Ot(t);if(".priority"===E)m=n.filter.updatePriority(e.eventCache.getNode(),r),p=T0(e,m,h.isFullyInitialized(),h.isFiltered());else{const T=hn(t),N=h.getNode().getImmediateChild(E);let O;if(Rt(T))O=r;else{const z=v.getCompleteChild(E);O=null!=z?".priority"===ek(T)&&z.getChild(YG(T)).isEmpty()?z:z.updateChild(T,r):Tt.EMPTY_NODE}p=N.equals(O)?e:T0(e,n.filter.updateChild(h.getNode(),E,O,T,v,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function DH(n,e){return n.eventCache.isCompleteForChild(e)}function TH(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ik(n,e,t,r,i,s,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m,p=e;m=Rt(t)?r:new vn(null).setTree(t,r);const v=e.serverCache.getNode();return m.children.inorderTraversal((E,T)=>{if(v.hasChild(E)){const O=TH(0,e.serverCache.getNode().getImmediateChild(E),T);p=rT(n,p,new en(E),O,i,s,c,h)}}),m.children.inorderTraversal((E,T)=>{const N=!e.serverCache.isCompleteForChild(E)&&void 0===T.value;if(!v.hasChild(E)&&!N){const z=TH(0,e.serverCache.getNode().getImmediateChild(E),T);p=rT(n,p,new en(E),z,i,s,c,h)}}),p}function hZ(n,e){const t=Dh(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Rt(e)&&!t.getImmediateChild(Ot(e)).isEmpty())?t.getChild(e):null}function NH(n,e,t,r){e.type===so.MERGE&&null!==e.source.queryId&&((0,B.hu)(Dh(n.viewCache_),"We should always have a full cache before handling merges"),(0,B.hu)(X1(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function rZ(n,e,t,r,i){const s=new XY;let c,h;if(t.type===so.OVERWRITE){const m=t;m.source.fromUser?c=Tk(n,e,m.path,m.snap,r,i,s):((0,B.hu)(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered()&&!Rt(m.path),c=rT(n,e,m.path,m.snap,r,i,h,s))}else if(t.type===so.MERGE){const m=t;m.source.fromUser?c=function sZ(n,e,t,r,i,s,c){let h=e;return r.foreach((p,m)=>{const v=kn(t,p);DH(e,Ot(v))&&(h=Tk(n,h,v,m,i,s,c))}),r.foreach((p,m)=>{const v=kn(t,p);DH(e,Ot(v))||(h=Tk(n,h,v,m,i,s,c))}),h}(n,e,m.path,m.children,r,i,s):((0,B.hu)(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered(),c=Ik(n,e,m.path,m.children,r,i,h,s))}else if(t.type===so.ACK_USER_WRITE){const m=t;c=m.revert?function lZ(n,e,t,r,i,s){let c;if(null!=nT(r,t))return e;{const h=new Dk(r,e,i),p=e.eventCache.getNode();let m;if(Rt(t)||".priority"===Ot(t)){let v;if(e.serverCache.isFullyInitialized())v=tT(r,Dh(e));else{const E=e.serverCache.getNode();(0,B.hu)(E instanceof Tt,"serverChildren would be complete if leaf node"),v=Ek(r,E)}v=v,m=n.filter.updateFullNode(p,v,s)}else{const v=Ot(t);let E=Ck(r,v,e.serverCache);null==E&&e.serverCache.isCompleteForChild(v)&&(E=p.getImmediateChild(v)),m=null!=E?n.filter.updateChild(p,v,E,hn(t),h,s):e.eventCache.getNode().hasChild(v)?n.filter.updateChild(p,v,Tt.EMPTY_NODE,hn(t),h,s):p,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=tT(r,Dh(e)),c.isLeafNode()&&(m=n.filter.updateFullNode(m,c,s)))}return c=e.serverCache.isFullyInitialized()||null!=nT(r,Kt()),T0(e,m,c,n.filter.filtersNodes())}}(n,e,m.path,r,i,s):function oZ(n,e,t,r,i,s,c){if(null!=nT(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(Rt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return rT(n,e,t,p.getNode().getChild(t),i,s,h,c);if(Rt(t)){let m=new vn(null);return p.getNode().forEachChild(va,(v,E)=>{m=m.set(new en(v),E)}),Ik(n,e,t,m,i,s,h,c)}return e}{let m=new vn(null);return r.foreach((v,E)=>{const T=kn(t,v);p.isCompleteForPath(T)&&(m=m.set(v,p.getNode().getChild(T)))}),Ik(n,e,t,m,i,s,h,c)}}(n,e,m.path,m.affectedTree,r,i,s)}else{if(t.type!==so.LISTEN_COMPLETE)throw(0,B.g5)("Unknown operation type: "+t.type);c=function aZ(n,e,t,r,i){const s=e.serverCache;return CH(n,fH(e,s.getNode(),s.isFullyInitialized()||Rt(t),s.isFiltered()),t,r,EH,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function iZ(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=X1(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(function cH(n){return{type:"value",snapshotNode:n}}(X1(e)))}}(e,c,p),{viewCache:c,changes:p}}(n.processor_,i,e,t,r);return function nZ(n,e){(0,B.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,B.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,B.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function AH(n,e,t,r){return function PY(n,e,t,r){const i=[],s=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function wY(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),D0(n,i,"child_removed",e,r,t),D0(n,i,"child_added",e,r,t),D0(n,i,"child_moved",s,r,t),D0(n,i,"child_changed",e,r,t),D0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let iT,oT;function Sk(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,B.hu)(null!=s,"SyncTree gave us an op for an invalid query."),NH(s,e,t,r)}{let s=[];for(const c of n.views.values())s=s.concat(NH(c,e,t,r));return s}}function Fc(n,e){let t=null;for(const r of n.views.values())t=t||hZ(r,e);return t}class PH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vn(null),this.pendingWriteTree_=function QY(){return{visibleWrites:Po.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Nk(n,e,t,r,i){return function BY(n,e,t,r,i){(0,B.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=I0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?$g(n,new Ch({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Vc(n,e,t=!1){const r=function jY(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function GY(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,B.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&HY(h,r.path)?i=!1:io(r.path,h.path)&&(s=!0)),c--}return!!i&&(s?(function $Y(n){n.visibleWrites=_H(n.allWrites,WY,Kt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=pH(n.visibleWrites,r.path):Br(r.children,p=>{n.visibleWrites=pH(n.visibleWrites,kn(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new vn(null);return null!=r.snap?s=s.set(Kt(),!0):Br(r.children,c=>{s=s.set(new en(c),!0)}),$g(n,new Q1(r.path,s,t))}return[]}function S0(n,e,t){return $g(n,new Ch({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function aT(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(c,h)=>{const m=Fc(h,Hi(c,e));if(m)return m});return yH(i,e,s,t,!0)}function $g(n,e){return LH(e,n.syncPointTree_,null,eT(n.pendingWriteTree_,Kt()))}function LH(n,e,t,r){if(Rt(n.path))return VH(n,e,t,r);{const i=e.get(Kt());null==t&&null!=i&&(t=Fc(i,Kt()));let s=[];const c=Ot(n.path),h=n.operationForChild(c),p=e.children.get(c);if(p&&h){const m=t?t.getImmediateChild(c):null,v=bH(r,c);s=s.concat(LH(h,p,m,v))}return i&&(s=s.concat(Sk(i,n,r,t))),s}}function VH(n,e,t,r){const i=e.get(Kt());null==t&&null!=i&&(t=Fc(i,Kt()));let s=[];return e.children.inorderTraversal((c,h)=>{const p=t?t.getImmediateChild(c):null,m=bH(r,c),v=n.operationForChild(c);v&&(s=s.concat(VH(v,h,p,m)))}),i&&(s=s.concat(Sk(i,n,r,t))),s}function Mk(n,e){return n.tagToQueryMap.get(e)}function xk(n){const e=n.indexOf("$");return(0,B.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new en(n.substr(0,e))}}function Ok(n,e,t){const r=n.syncPointTree_.get(e);return(0,B.hu)(r,"Missing sync point for query tag that we're tracking"),Sk(r,t,eT(n.pendingWriteTree_,e),null)}class Rk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Rk(t)}node(){return this.node_}}class kk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=kn(this.path_,e);return new kk(this.syncTree_,t)}node(){return aT(this.syncTree_,this.path_)}}const UH=function(n,e,t){return n&&"object"==typeof n?((0,B.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?PZ(n[".sv"],e,t):"object"==typeof n[".sv"]?FZ(n[".sv"],e):void(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},PZ=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,B.hu)(!1,"Unexpected server value: "+n)},FZ=function(n,e,t){n.hasOwnProperty("increment")||(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,B.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,B.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},Pk=function(n,e,t){return Fk(n,new Rk(e),t)};function Fk(n,e,t){const r=n.getPriority().val(),i=UH(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const c=n,h=UH(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new Lg(h,Vn(i)):n}{const c=n;return s=c,i!==c.getPriority().val()&&(s=s.updatePriority(new Lg(i))),c.forEachChild(yn,(h,p)=>{const m=Fk(p,e.getImmediateChild(h),t);m!==p&&(s=s.updateImmediateChild(h,m))}),s}}class Lk{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function uT(n,e){let t=e instanceof en?e:new en(e),r=n,i=Ot(t);for(;null!==i;){const s=(0,B.DV)(r.node.children,i)||{children:{},childCount:0};r=new Lk(i,r,s),t=hn(t),i=Ot(t)}return r}function Ih(n){return n.node.value}function Vk(n,e){n.node.value=e,Bk(n)}function GH(n){return n.node.childCount>0}function dT(n,e){Br(n.node.children,(t,r)=>{e(new Lk(t,n,r))})}function HH(n,e,t,r){t&&!r&&e(n),dT(n,i=>{HH(i,e,!0,r)}),t&&r&&e(n)}function A0(n){return new en(null===n.parent?n.name:A0(n.parent)+"/"+n.name)}function Bk(n){null!==n.parent&&function BZ(n,e,t){const r=function LZ(n){return void 0===Ih(n)&&!GH(n)}(t),i=(0,B.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Bk(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Bk(n))}(n.parent,n.name,n)}const UZ=/[\[\].#$\/\u0000-\u001F\u007F]/,jZ=/[\[\].#$\u0000-\u001F\u007F]/,Uk=10485760,hT=function(n){return"string"==typeof n&&0!==n.length&&!UZ.test(n)},x0=function(n,e,t){const r=t instanceof en?new tY(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+wh(r));if("function"==typeof e)throw new Error(n+"contains a function "+wh(r)+" with contents = "+e.toString());if(B1(e))throw new Error(n+"contains "+e.toString()+" "+wh(r));if("string"==typeof e&&e.length>Uk/3&&(0,B.ug)(e)>Uk)throw new Error(n+"contains a string greater than "+Uk+" utf8 bytes "+wh(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Br(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!hT(c)))throw new Error(n+" contains an invalid key ("+c+") "+wh(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function nY(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,B.ug)(e),ZG(n)})(r,c),x0(n,h,r),function rY(n){const e=n.parts_.pop();n.byteLength_-=(0,B.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+wh(r)+" in addition to actual children.")}},zH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!hT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!jZ.test(n)}(n)}(t))throw new Error((0,B.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class WZ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function oo(n,e,t){(function fT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!tk(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function qH(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(zZ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>io(r,e)||io(e,r))}function zZ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();vh&&Vr("event: "+t.toString()),Pg(r)}}}class KZ{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new WZ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Z1(),this.transactionQueueTree_=new Lk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function YH(n){const t=n.infoData_.getNode(new en(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function R0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:YH(n)})}function ZH(n,e,t,r,i){n.dataUpdateCount++;const s=new en(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const p=(0,B.UI)(t,m=>Vn(m));c=function NZ(n,e,t,r){const i=Mk(n,r);if(i){const s=xk(i),c=s.path,h=s.queryId,p=Hi(c,e),m=vn.fromObject(t);return Ok(n,c,new Gg(_k(h),p,m))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Vn(t);c=function SZ(n,e,t,r){const i=Mk(n,r);if(null!=i){const s=xk(i),c=s.path,h=s.queryId,p=Hi(c,e);return Ok(n,c,new Ch(_k(h),p,t))}return[]}(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,B.UI)(t,m=>Vn(m));c=function DZ(n,e,t){const r=vn.fromObject(t);return $g(n,new Gg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Vn(t);c=S0(n.serverSyncTree_,s,p)}let h=s;c.length>0&&(h=zg(n,s)),oo(n.eventQueue_,h,c)}function QH(n,e){$k(n,"connected",e),!1===e&&function XZ(n){Wg(n,"onDisconnectEvents");const e=R0(n),t=Z1();pk(n.onDisconnect_,Kt(),(i,s)=>{const c=function(n,e,t,r){return Fk(e,new kk(t,n),r)}(i,s,n.serverSyncTree_,e);jg(t,i,c)});let r=[];pk(t,Kt(),(i,s)=>{r=r.concat(S0(n.serverSyncTree_,i,s));const c=function Kk(n,e){const t=A0(e$(n,e)),r=uT(n.transactionQueueTree_,e);return function VZ(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Yk(n,i)}),Yk(n,r),HH(r,i=>{Yk(n,i)}),t}(n,i);zg(n,c)}),n.onDisconnect_=Z1(),oo(n.eventQueue_,Kt(),r)}(n)}function $k(n,e,t){const r=new en("/.info/"+e),i=Vn(t);n.infoData_.updateSnapshot(r,i);const s=S0(n.infoSyncTree_,r,i);oo(n.eventQueue_,r,s)}function pT(n){return n.nextWriteId_++}function Wg(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Vr(t,...e)}function qk(n,e,t){return aT(n.serverSyncTree_,e,t)||Tt.EMPTY_NODE}function gT(n,e=n.transactionQueueTree_){if(e||mT(n,e),Ih(e)){const t=t$(n,e);(0,B.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function o9(n,e,t){const r=t.map(m=>m.currentWriteId),i=qk(n,e,r);let s=i;const c=i.hash();for(let m=0;m<t.length;m++){const v=t[m];(0,B.hu)(0===v.status,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const E=Hi(e,v.path);s=s.updateChild(E,v.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,m=>{Wg(n,"transaction put response",{path:p.toString(),status:m});let v=[];if("ok"===m){const E=[];for(let T=0;T<t.length;T++)t[T].status=2,v=v.concat(Vc(n.serverSyncTree_,t[T].currentWriteId)),t[T].onComplete&&E.push(()=>t[T].onComplete(null,!0,t[T].currentOutputSnapshotResolved)),t[T].unwatcher();mT(n,uT(n.transactionQueueTree_,e)),gT(n,n.transactionQueueTree_),oo(n.eventQueue_,e,v);for(let T=0;T<E.length;T++)Pg(E[T])}else{if("datastale"===m)for(let E=0;E<t.length;E++)t[E].status=3===t[E].status?4:0;else{Ci("transaction at "+p.toString()+" failed: "+m);for(let E=0;E<t.length;E++)t[E].status=4,t[E].abortReason=m}zg(n,e)}},c)}(n,A0(e),t)}else GH(e)&&dT(e,t=>{gT(n,t)})}function zg(n,e){const t=e$(n,e),r=A0(t);return function a9(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],m=Hi(t,p.path);let E,v=!1;if((0,B.hu)(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)v=!0,E=p.abortReason,i=i.concat(Vc(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)v=!0,E="maxretry",i=i.concat(Vc(n.serverSyncTree_,p.currentWriteId,!0));else{const T=qk(n,p.path,c);p.currentInputSnapshot=T;const N=e[h].update(T.val());if(void 0!==N){x0("transaction failed: Data returned ",N,p.path);let O=Vn(N);"object"==typeof N&&null!=N&&(0,B.r3)(N,".priority")||(O=O.updatePriority(T.getPriority()));const ae=p.currentWriteId,Re=R0(n),ke=Pk(O,T,Re);p.currentOutputSnapshotRaw=O,p.currentOutputSnapshotResolved=ke,p.currentWriteId=pT(n),c.splice(c.indexOf(ae),1),i=i.concat(Nk(n.serverSyncTree_,p.path,ke,p.currentWriteId,p.applyLocally)),i=i.concat(Vc(n.serverSyncTree_,ae,!0))}else v=!0,E="nodata",i=i.concat(Vc(n.serverSyncTree_,p.currentWriteId,!0))}oo(n.eventQueue_,t,i),i=[],v&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===E?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(E),!1,null)))}mT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Pg(r[h]);gT(n,n.transactionQueueTree_)}(n,t$(n,t),r),r}function e$(n,e){let t,r=n.transactionQueueTree_;for(t=Ot(e);null!==t&&void 0===Ih(r);)r=uT(r,t),t=Ot(e=hn(e));return r}function t$(n,e){const t=[];return n$(n,e,t),t.sort((r,i)=>r.order-i.order),t}function n$(n,e,t){const r=Ih(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);dT(e,i=>{n$(n,i,t)})}function mT(n,e){const t=Ih(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Vk(e,t.length>0?t:void 0)}dT(e,r=>{mT(n,r)})}function Yk(n,e){const t=Ih(e);if(t){const r=[];let i=[],s=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,B.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,t[c].status=3,t[c].abortReason="set"):((0,B.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Vc(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Vk(e,void 0):t.length=s+1,oo(n.eventQueue_,A0(e),i);for(let c=0;c<r.length;c++)Pg(r[c])}}const Zk=function(n,e){const t=u9(n),r=t.namespace;return"firebase.com"===t.domain&&_a(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&_a("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ci("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new KR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new en(t.pathString)}},u9=function(n){let e="",t="",r="",i="",s="",c=!0,h="https",p=443;if("string"==typeof n){let m=n.indexOf("//");m>=0&&(h=n.substring(0,m-1),n=n.substring(m+2));let v=n.indexOf("/");-1===v&&(v=n.length);let E=n.indexOf("?");-1===E&&(E=n.length),e=n.substring(0,Math.min(v,E)),v<E&&(i=function l9(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(v,E)));const T=function c9(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ci(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,E)));m=e.indexOf(":"),m>=0?(c="https"===h||"wss"===h,p=parseInt(e.substring(m+1),10)):m=e.length;const N=e.slice(0,m);if("localhost"===N.toLowerCase())t="localhost";else if(N.split(".").length<=2)t=N;else{const O=e.indexOf(".");r=e.substring(0,O).toLowerCase(),t=e.substring(O+1),s=r}"ns"in T&&(s=T.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:s}};class Ts{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Rt(this._path)?null:ek(this._path)}get ref(){return new Fo(this._repo,this._path)}get _queryIdentifier(){const e=dH(this._queryParams),t=WR(e);return"{}"===t?"default":t}get _queryObject(){return dH(this._queryParams)}isEqual(e){if(!((e=(0,B.m9)(e))instanceof Ts))return!1;const t=this._repo===e._repo,r=tk(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function XK(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Fo extends Ts{constructor(e,t){super(e,t,new uk,!1)}get parent(){const e=YG(this._path);return null===e?null:new Fo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function gZ(n){(0,B.hu)(!iT,"__referenceConstructor has already been defined"),iT=n})(Fo),function bZ(n){(0,B.hu)(!oT,"__referenceConstructor has already been defined"),oT=n}(Fo);const Qk={};class A9{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function YZ(n,e,t){if(n.stats_=QR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Y1(n.repoInfo_,(r,i,s,c)=>{ZH(n,r,i,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>QH(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Eh(n.repoInfo_,e,(r,i,s,c)=>{ZH(n,r,i,s,c)},r=>{QH(n,r)},r=>{!function ZZ(n,e){Br(e,(t,r)=>{$k(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function xK(n,e){const t=n.toString();return ZR[t]||(ZR[t]=e()),ZR[t]}(n.repoInfo_,()=>new RY(n.stats_,n.server_)),n.infoData_=new NY,n.infoSyncTree_=new PH({startListening:(r,i,s,c)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=S0(n.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),$k(n,"connected",!1),n.serverSyncTree_=new PH({startListening:(r,i,s,c)=>(n.server_.listen(r,s,i,(h,p)=>{const m=c(h,p);oo(n.eventQueue_,r._path,m)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fo(this._repo,Kt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function I9(n,e){const t=Qk[e];(!t||t[n.key]!==n)&&_a(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function XH(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&_a("Cannot call "+e+" on a deleted database.")}}function M9(n=(0,sn.getApp)(),e){return(0,sn._getProvider)(n,"database").getImmediate({identifier:e})}Eh.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Eh.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function x9(n){(function mK(n){GR=n})(sn.SDK_VERSION),(0,sn._registerComponent)(new ld.wA("database",(e,{instanceIdentifier:t})=>function T9(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||_a("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,m,c=Zk(s,i),h=c.repoInfo;"undefined"!=typeof process&&process.env&&(m=process.env.FIREBASE_DATABASE_EMULATOR_HOST),m?(p=!0,s=`http://${m}?ns=${h.namespace}`,c=Zk(s,i),h=c.repoInfo):p=!c.repoInfo.secure;const v=i&&p?new g0(g0.OWNER):new NK(n.name,n.options,e);zH("Invalid Firebase Database URL",c),Rt(c.path)||_a("Database URL must point to the root of a Firebase Database (not including a child path).");const E=function S9(n,e,t,r){let i=Qk[e.name];i||(i={},Qk[e.name]=i);let s=i[n.toURLString()];return s&&_a("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new KZ(n,!1,t,r),i[n.toURLString()]=s,s}(h,n,v,new SK(n.name,t));return new A9(E,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,sn.registerVersion)(dG,"0.13.0",n),(0,sn.registerVersion)(dG,"0.13.0","esm2017")}();class Jk{constructor(e){return e}}const d$="database",Xk=new d.OlP("angularfire2.database-instances");function F9(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Jk(r)}}const L9={provide:class k9{constructor(){return(0,rn.vb)(d$)}},deps:[[new d.FiY,Xk]]},V9={provide:Jk,useFactory:function P9(n,e){const t=(0,rn.JM)(d$,n,e);return t&&new Jk(t)},deps:[[new d.FiY,Xk],nl]};let B9=(()=>{class n{constructor(){(0,Ys.KN)("angularfire",rn.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[V9,L9]}),n})();function U9(n,...e){return{ngModule:B9,providers:[{provide:Xk,useFactory:F9(n),multi:!0,deps:[d.R0b,d.zs3,rn.HU,lc,[new d.FiY,TM],[new d.FiY,gd],...e]}]}}const j9=(0,rn.u3)(M9,!0),h$={projectId:"appmovie-eddc9",appId:"1:212387349011:web:5d31172cfe3cb1636d35e6",databaseURL:"https://appmovie-eddc9-default-rtdb.firebaseio.com",storageBucket:"appmovie-eddc9.appspot.com",locationId:"us-central",apiKey:"AIzaSyDyVLD0OG_ruCeqpyBt9G5SrW5hH8KZkOU",authDomain:"appmovie-eddc9.firebaseapp.com",messagingSenderId:"212387349011",measurementId:"G-MYFPJBT2ZG"};let G9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[pK]}),n.\u0275inj=d.cJS({providers:[],imports:[[pr,fK,nI,AN,_N,gK.hO.initializeApp(h$),ON(()=>eC(h$)),U9(()=>j9()),kW(()=>PW()),C4(()=>fh())]]}),n})();(0,d.G48)(),am().bootstrapModule(G9).catch(n=>console.error(n))},5867:(ze,ue,M)=>{M.d(ue,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=M(9681);(0,d.registerVersion)("firebase","9.8.2","app")},8306:(ze,ue,M)=>{M.d(ue,{y:()=>L});var d=M(930),K=M(727),$=M(8822),te=M(4671);var oe=M(2416),pe=M(576),le=M(2806);let L=(()=>{class _e{constructor(We){We&&(this._subscribe=We)}lift(We){const xe=new _e;return xe.source=this,xe.operator=We,xe}subscribe(We,xe,tt){const at=function je(_e){return _e&&_e instanceof d.Lv||function de(_e){return _e&&(0,pe.m)(_e.next)&&(0,pe.m)(_e.error)&&(0,pe.m)(_e.complete)}(_e)&&(0,K.Nn)(_e)}(We)?We:new d.Hp(We,xe,tt);return(0,le.x)(()=>{const{operator:Mt,source:fe}=this;at.add(Mt?Mt.call(at,fe):fe?this._subscribe(at):this._trySubscribe(at))}),at}_trySubscribe(We){try{return this._subscribe(We)}catch(xe){We.error(xe)}}forEach(We,xe){return new(xe=F(xe))((tt,at)=>{const Mt=new d.Hp({next:fe=>{try{We(fe)}catch(Ie){at(Ie),Mt.unsubscribe()}},error:at,complete:tt});this.subscribe(Mt)})}_subscribe(We){var xe;return null===(xe=this.source)||void 0===xe?void 0:xe.subscribe(We)}[$.L](){return this}pipe(...We){return function ye(_e){return 0===_e.length?te.y:1===_e.length?_e[0]:function(We){return _e.reduce((xe,tt)=>tt(xe),We)}}(We)(this)}toPromise(We){return new(We=F(We))((xe,tt)=>{let at;this.subscribe(Mt=>at=Mt,Mt=>tt(Mt),()=>xe(at))})}}return _e.create=Me=>new _e(Me),_e})();function F(_e){var Me;return null!==(Me=null!=_e?_e:oe.v.Promise)&&void 0!==Me?Me:Promise}},7579:(ze,ue,M)=>{M.d(ue,{x:()=>oe});var d=M(8306),K=M(727);const te=(0,M(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=M(8737),ye=M(2806);let oe=(()=>{class le extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(F){const de=new pe(this,this);return de.operator=F,de}_throwIfClosed(){if(this.closed)throw new te}next(F){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const de of this.currentObservers)de.next(F)}})}error(F){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=F;const{observers:de}=this;for(;de.length;)de.shift().error(F)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:F}=this;for(;F.length;)F.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var F;return(null===(F=this.observers)||void 0===F?void 0:F.length)>0}_trySubscribe(F){return this._throwIfClosed(),super._trySubscribe(F)}_subscribe(F){return this._throwIfClosed(),this._checkFinalizedStatuses(F),this._innerSubscribe(F)}_innerSubscribe(F){const{hasError:de,isStopped:je,observers:_e}=this;return de||je?K.Lc:(this.currentObservers=null,_e.push(F),new K.w0(()=>{this.currentObservers=null,(0,X.P)(_e,F)}))}_checkFinalizedStatuses(F){const{hasError:de,thrownError:je,isStopped:_e}=this;de?F.error(je):_e&&F.complete()}asObservable(){const F=new d.y;return F.source=this,F}}return le.create=(L,F)=>new pe(L,F),le})();class pe extends oe{constructor(L,F){super(),this.destination=L,this.source=F}next(L){var F,de;null===(de=null===(F=this.destination)||void 0===F?void 0:F.next)||void 0===de||de.call(F,L)}error(L){var F,de;null===(de=null===(F=this.destination)||void 0===F?void 0:F.error)||void 0===de||de.call(F,L)}complete(){var L,F;null===(F=null===(L=this.destination)||void 0===L?void 0:L.complete)||void 0===F||F.call(L)}_subscribe(L){var F,de;return null!==(de=null===(F=this.source)||void 0===F?void 0:F.subscribe(L))&&void 0!==de?de:K.Lc}}},930:(ze,ue,M)=>{M.d(ue,{Hp:()=>We,Lv:()=>de});var d=M(576),K=M(727),$=M(2416),te=M(7849),X=M(5032);const ye=le("C",void 0,void 0);function le(fe,Ie,Ne){return{kind:fe,value:Ie,error:Ne}}var L=M(3410),F=M(2806);class de extends K.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,K.Nn)(Ie)&&Ie.add(this)):this.destination=Mt}static create(Ie,Ne,De){return new We(Ie,Ne,De)}next(Ie){this.isStopped?at(function pe(fe){return le("N",fe,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?at(function oe(fe){return le("E",void 0,fe)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?at(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function _e(fe,Ie){return je.call(fe,Ie)}class Me{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:Ne}=this;if(Ne.next)try{Ne.next(Ie)}catch(De){xe(De)}}error(Ie){const{partialObserver:Ne}=this;if(Ne.error)try{Ne.error(Ie)}catch(De){xe(De)}else xe(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(Ne){xe(Ne)}}}class We extends de{constructor(Ie,Ne,De){let vt;if(super(),(0,d.m)(Ie)||!Ie)vt={next:null!=Ie?Ie:void 0,error:null!=Ne?Ne:void 0,complete:null!=De?De:void 0};else{let Z;this&&$.v.useDeprecatedNextContext?(Z=Object.create(Ie),Z.unsubscribe=()=>this.unsubscribe(),vt={next:Ie.next&&_e(Ie.next,Z),error:Ie.error&&_e(Ie.error,Z),complete:Ie.complete&&_e(Ie.complete,Z)}):vt=Ie}this.destination=new Me(vt)}}function xe(fe){$.v.useDeprecatedSynchronousErrorHandling?(0,F.O)(fe):(0,te.h)(fe)}function at(fe,Ie){const{onStoppedNotification:Ne}=$.v;Ne&&L.z.setTimeout(()=>Ne(fe,Ie))}const Mt={closed:!0,next:X.Z,error:function tt(fe){throw fe},complete:X.Z}},727:(ze,ue,M)=>{M.d(ue,{Lc:()=>ye,w0:()=>X,Nn:()=>oe});var d=M(576);const $=(0,M(3888).d)(le=>function(F){le(this),this.message=F?`${F.length} errors occurred during unsubscription:\n${F.map((de,je)=>`${je+1}) ${de.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=F});var te=M(8737);class X{constructor(L){this.initialTeardown=L,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let L;if(!this.closed){this.closed=!0;const{_parentage:F}=this;if(F)if(this._parentage=null,Array.isArray(F))for(const _e of F)_e.remove(this);else F.remove(this);const{initialTeardown:de}=this;if((0,d.m)(de))try{de()}catch(_e){L=_e instanceof $?_e.errors:[_e]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const _e of je)try{pe(_e)}catch(Me){L=null!=L?L:[],Me instanceof $?L=[...L,...Me.errors]:L.push(Me)}}if(L)throw new $(L)}}add(L){var F;if(L&&L!==this)if(this.closed)pe(L);else{if(L instanceof X){if(L.closed||L._hasParent(this))return;L._addParent(this)}(this._finalizers=null!==(F=this._finalizers)&&void 0!==F?F:[]).push(L)}}_hasParent(L){const{_parentage:F}=this;return F===L||Array.isArray(F)&&F.includes(L)}_addParent(L){const{_parentage:F}=this;this._parentage=Array.isArray(F)?(F.push(L),F):F?[F,L]:L}_removeParent(L){const{_parentage:F}=this;F===L?this._parentage=null:Array.isArray(F)&&(0,te.P)(F,L)}remove(L){const{_finalizers:F}=this;F&&(0,te.P)(F,L),L instanceof X&&L._removeParent(this)}}X.EMPTY=(()=>{const le=new X;return le.closed=!0,le})();const ye=X.EMPTY;function oe(le){return le instanceof X||le&&"closed"in le&&(0,d.m)(le.remove)&&(0,d.m)(le.add)&&(0,d.m)(le.unsubscribe)}function pe(le){(0,d.m)(le)?le():le.unsubscribe()}},2416:(ze,ue,M)=>{M.d(ue,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ze,ue,M)=>{M.d(ue,{E:()=>K});const K=new(M(8306).y)(X=>X.complete())},8996:(ze,ue,M)=>{M.d(ue,{D:()=>Ie});var d=M(8421),K=M(5363),$=M(9468),ye=M(8306),pe=M(2202),le=M(576),L=M(9672);function de(Ne,De){if(!Ne)throw new Error("Iterable cannot be null");return new ye.y(vt=>{(0,L.f)(vt,De,()=>{const Z=Ne[Symbol.asyncIterator]();(0,L.f)(vt,De,()=>{Z.next().then(me=>{me.done?vt.complete():vt.next(me.value)})},0,!0)})})}var je=M(3670),_e=M(8239),Me=M(1144),We=M(6495),xe=M(2206),tt=M(4532),at=M(3260);function Ie(Ne,De){return De?function fe(Ne,De){if(null!=Ne){if((0,je.c)(Ne))return function te(Ne,De){return(0,d.Xf)(Ne).pipe((0,$.R)(De),(0,K.Q)(De))}(Ne,De);if((0,Me.z)(Ne))return function oe(Ne,De){return new ye.y(vt=>{let Z=0;return De.schedule(function(){Z===Ne.length?vt.complete():(vt.next(Ne[Z++]),vt.closed||this.schedule())})})}(Ne,De);if((0,_e.t)(Ne))return function X(Ne,De){return(0,d.Xf)(Ne).pipe((0,$.R)(De),(0,K.Q)(De))}(Ne,De);if((0,xe.D)(Ne))return de(Ne,De);if((0,We.T)(Ne))return function F(Ne,De){return new ye.y(vt=>{let Z;return(0,L.f)(vt,De,()=>{Z=Ne[pe.h](),(0,L.f)(vt,De,()=>{let me,H;try{({value:me,done:H}=Z.next())}catch(ee){return void vt.error(ee)}H?vt.complete():vt.next(me)},0,!0)}),()=>(0,le.m)(null==Z?void 0:Z.return)&&Z.return()})}(Ne,De);if((0,at.L)(Ne))return function Mt(Ne,De){return de((0,at.Q)(Ne),De)}(Ne,De)}throw(0,tt.z)(Ne)}(Ne,De):(0,d.Xf)(Ne)}},8421:(ze,ue,M)=>{M.d(ue,{Xf:()=>je});var d=M(655),K=M(1144),$=M(8239),te=M(8306),X=M(3670),ye=M(2206),oe=M(4532),pe=M(6495),le=M(3260),L=M(576),F=M(7849),de=M(8822);function je(fe){if(fe instanceof te.y)return fe;if(null!=fe){if((0,X.c)(fe))return function _e(fe){return new te.y(Ie=>{const Ne=fe[de.L]();if((0,L.m)(Ne.subscribe))return Ne.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(fe);if((0,K.z)(fe))return function Me(fe){return new te.y(Ie=>{for(let Ne=0;Ne<fe.length&&!Ie.closed;Ne++)Ie.next(fe[Ne]);Ie.complete()})}(fe);if((0,$.t)(fe))return function We(fe){return new te.y(Ie=>{fe.then(Ne=>{Ie.closed||(Ie.next(Ne),Ie.complete())},Ne=>Ie.error(Ne)).then(null,F.h)})}(fe);if((0,ye.D)(fe))return tt(fe);if((0,pe.T)(fe))return function xe(fe){return new te.y(Ie=>{for(const Ne of fe)if(Ie.next(Ne),Ie.closed)return;Ie.complete()})}(fe);if((0,le.L)(fe))return function at(fe){return tt((0,le.Q)(fe))}(fe)}throw(0,oe.z)(fe)}function tt(fe){return new te.y(Ie=>{(function Mt(fe,Ie){var Ne,De,vt,Z;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,d.KL)(fe);!(De=yield Ne.next()).done;)if(Ie.next(De.value),Ie.closed)return}catch(me){vt={error:me}}finally{try{De&&!De.done&&(Z=Ne.return)&&(yield Z.call(Ne))}finally{if(vt)throw vt.error}}Ie.complete()})})(fe,Ie).catch(Ne=>Ie.error(Ne))})}},5403:(ze,ue,M)=>{M.d(ue,{x:()=>K});var d=M(930);function K(te,X,ye,oe,pe){return new $(te,X,ye,oe,pe)}class $ extends d.Lv{constructor(X,ye,oe,pe,le,L){super(X),this.onFinalize=le,this.shouldUnsubscribe=L,this._next=ye?function(F){try{ye(F)}catch(de){X.error(de)}}:super._next,this._error=pe?function(F){try{pe(F)}catch(de){X.error(de)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(F){X.error(F)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(ze,ue,M)=>{M.d(ue,{U:()=>$});var d=M(4482),K=M(5403);function $(te,X){return(0,d.e)((ye,oe)=>{let pe=0;ye.subscribe((0,K.x)(oe,le=>{oe.next(te.call(X,le,pe++))}))})}},8189:(ze,ue,M)=>{M.d(ue,{J:()=>$});var d=M(5577),K=M(4671);function $(te=1/0){return(0,d.z)(K.y,te)}},5577:(ze,ue,M)=>{M.d(ue,{z:()=>pe});var d=M(4004),K=M(8421),$=M(4482),te=M(9672),X=M(5403),oe=M(576);function pe(le,L,F=1/0){return(0,oe.m)(L)?pe((de,je)=>(0,d.U)((_e,Me)=>L(de,_e,je,Me))((0,K.Xf)(le(de,je))),F):("number"==typeof L&&(F=L),(0,$.e)((de,je)=>function ye(le,L,F,de,je,_e,Me,We){const xe=[];let tt=0,at=0,Mt=!1;const fe=()=>{Mt&&!xe.length&&!tt&&L.complete()},Ie=De=>tt<de?Ne(De):xe.push(De),Ne=De=>{_e&&L.next(De),tt++;let vt=!1;(0,K.Xf)(F(De,at++)).subscribe((0,X.x)(L,Z=>{null==je||je(Z),_e?Ie(Z):L.next(Z)},()=>{vt=!0},void 0,()=>{if(vt)try{for(tt--;xe.length&&tt<de;){const Z=xe.shift();Me?(0,te.f)(L,Me,()=>Ne(Z)):Ne(Z)}fe()}catch(Z){L.error(Z)}}))};return le.subscribe((0,X.x)(L,Ie,()=>{Mt=!0,fe()})),()=>{null==We||We()}}(de,je,le,F)))}},5363:(ze,ue,M)=>{M.d(ue,{Q:()=>te});var d=M(9672),K=M(4482),$=M(5403);function te(X,ye=0){return(0,K.e)((oe,pe)=>{oe.subscribe((0,$.x)(pe,le=>(0,d.f)(pe,X,()=>pe.next(le),ye),()=>(0,d.f)(pe,X,()=>pe.complete(),ye),le=>(0,d.f)(pe,X,()=>pe.error(le),ye)))})}},9468:(ze,ue,M)=>{M.d(ue,{R:()=>K});var d=M(4482);function K($,te=0){return(0,d.e)((X,ye)=>{ye.add($.schedule(()=>X.subscribe(ye),te))})}},5698:(ze,ue,M)=>{M.d(ue,{q:()=>te});var d=M(515),K=M(4482),$=M(5403);function te(X){return X<=0?()=>d.E:(0,K.e)((ye,oe)=>{let pe=0;ye.subscribe((0,$.x)(oe,le=>{++pe<=X&&(oe.next(le),X<=pe&&oe.complete())}))})}},8505:(ze,ue,M)=>{M.d(ue,{b:()=>X});var d=M(576),K=M(4482),$=M(5403),te=M(4671);function X(ye,oe,pe){const le=(0,d.m)(ye)||oe||pe?{next:ye,error:oe,complete:pe}:ye;return le?(0,K.e)((L,F)=>{var de;null===(de=le.subscribe)||void 0===de||de.call(le);let je=!0;L.subscribe((0,$.x)(F,_e=>{var Me;null===(Me=le.next)||void 0===Me||Me.call(le,_e),F.next(_e)},()=>{var _e;je=!1,null===(_e=le.complete)||void 0===_e||_e.call(le),F.complete()},_e=>{var Me;je=!1,null===(Me=le.error)||void 0===Me||Me.call(le,_e),F.error(_e)},()=>{var _e,Me;je&&(null===(_e=le.unsubscribe)||void 0===_e||_e.call(le)),null===(Me=le.finalize)||void 0===Me||Me.call(le)}))}):te.y}},4408:(ze,ue,M)=>{M.d(ue,{o:()=>X});var d=M(727);class K extends d.w0{constructor(oe,pe){super()}schedule(oe,pe=0){return this}}const $={setInterval(ye,oe,...pe){const{delegate:le}=$;return(null==le?void 0:le.setInterval)?le.setInterval(ye,oe,...pe):setInterval(ye,oe,...pe)},clearInterval(ye){const{delegate:oe}=$;return((null==oe?void 0:oe.clearInterval)||clearInterval)(ye)},delegate:void 0};var te=M(8737);class X extends K{constructor(oe,pe){super(oe,pe),this.scheduler=oe,this.work=pe,this.pending=!1}schedule(oe,pe=0){if(this.closed)return this;this.state=oe;const le=this.id,L=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(L,le,pe)),this.pending=!0,this.delay=pe,this.id=this.id||this.requestAsyncId(L,this.id,pe),this}requestAsyncId(oe,pe,le=0){return $.setInterval(oe.flush.bind(oe,this),le)}recycleAsyncId(oe,pe,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return pe;$.clearInterval(pe)}execute(oe,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(oe,pe);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,pe){let L,le=!1;try{this.work(oe)}catch(F){le=!0,L=F||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),L}unsubscribe(){if(!this.closed){const{id:oe,scheduler:pe}=this,{actions:le}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,te.P)(le,this),null!=oe&&(this.id=this.recycleAsyncId(pe,oe,null)),this.delay=null,super.unsubscribe()}}}},640:(ze,ue,M)=>{M.d(ue,{v:()=>$});const d={now:()=>(d.delegate||Date).now(),delegate:void 0};class K{constructor(X,ye=K.now){this.schedulerActionCtor=X,this.now=ye}schedule(X,ye=0,oe){return new this.schedulerActionCtor(this,X).schedule(oe,ye)}}K.now=d.now;class $ extends K{constructor(X,ye=K.now){super(X,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:ye}=this;if(this._active)return void ye.push(X);let oe;this._active=!0;do{if(oe=X.execute(X.state,X.delay))break}while(X=ye.shift());if(this._active=!1,oe){for(;X=ye.shift();)X.unsubscribe();throw oe}}}},4986:(ze,ue,M)=>{M.d(ue,{P:()=>te,z:()=>$});var d=M(4408);const $=new(M(640).v)(d.o),te=$},3410:(ze,ue,M)=>{M.d(ue,{z:()=>d});const d={setTimeout(K,$,...te){const{delegate:X}=d;return(null==X?void 0:X.setTimeout)?X.setTimeout(K,$,...te):setTimeout(K,$,...te)},clearTimeout(K){const{delegate:$}=d;return((null==$?void 0:$.clearTimeout)||clearTimeout)(K)},delegate:void 0}},2202:(ze,ue,M)=>{M.d(ue,{h:()=>K});const K=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ze,ue,M)=>{M.d(ue,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ze,ue,M)=>{M.d(ue,{_6:()=>ye,jO:()=>te,yG:()=>X});var d=M(576),K=M(3532);function $(oe){return oe[oe.length-1]}function te(oe){return(0,d.m)($(oe))?oe.pop():void 0}function X(oe){return(0,K.K)($(oe))?oe.pop():void 0}function ye(oe,pe){return"number"==typeof $(oe)?oe.pop():pe}},8737:(ze,ue,M)=>{function d(K,$){if(K){const te=K.indexOf($);0<=te&&K.splice(te,1)}}M.d(ue,{P:()=>d})},3888:(ze,ue,M)=>{function d(K){const te=K(X=>{Error.call(X),X.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}M.d(ue,{d:()=>d})},2806:(ze,ue,M)=>{M.d(ue,{O:()=>te,x:()=>$});var d=M(2416);let K=null;function $(X){if(d.v.useDeprecatedSynchronousErrorHandling){const ye=!K;if(ye&&(K={errorThrown:!1,error:null}),X(),ye){const{errorThrown:oe,error:pe}=K;if(K=null,oe)throw pe}}else X()}function te(X){d.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=X)}},9672:(ze,ue,M)=>{function d(K,$,te,X=0,ye=!1){const oe=$.schedule(function(){te(),ye?K.add(this.schedule(null,X)):this.unsubscribe()},X);if(K.add(oe),!ye)return oe}M.d(ue,{f:()=>d})},4671:(ze,ue,M)=>{function d(K){return K}M.d(ue,{y:()=>d})},1144:(ze,ue,M)=>{M.d(ue,{z:()=>d});const d=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(ze,ue,M)=>{M.d(ue,{D:()=>K});var d=M(576);function K($){return Symbol.asyncIterator&&(0,d.m)(null==$?void 0:$[Symbol.asyncIterator])}},576:(ze,ue,M)=>{function d(K){return"function"==typeof K}M.d(ue,{m:()=>d})},3670:(ze,ue,M)=>{M.d(ue,{c:()=>$});var d=M(8822),K=M(576);function $(te){return(0,K.m)(te[d.L])}},6495:(ze,ue,M)=>{M.d(ue,{T:()=>$});var d=M(2202),K=M(576);function $(te){return(0,K.m)(null==te?void 0:te[d.h])}},8239:(ze,ue,M)=>{M.d(ue,{t:()=>K});var d=M(576);function K($){return(0,d.m)(null==$?void 0:$.then)}},3260:(ze,ue,M)=>{M.d(ue,{L:()=>te,Q:()=>$});var d=M(655),K=M(576);function $(X){return(0,d.FC)(this,arguments,function*(){const oe=X.getReader();try{for(;;){const{value:pe,done:le}=yield(0,d.qq)(oe.read());if(le)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(pe)}}finally{oe.releaseLock()}})}function te(X){return(0,K.m)(null==X?void 0:X.getReader)}},3532:(ze,ue,M)=>{M.d(ue,{K:()=>K});var d=M(576);function K($){return $&&(0,d.m)($.schedule)}},4482:(ze,ue,M)=>{M.d(ue,{A:()=>K,e:()=>$});var d=M(576);function K(te){return(0,d.m)(null==te?void 0:te.lift)}function $(te){return X=>{if(K(X))return X.lift(function(ye){try{return te(ye,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ze,ue,M)=>{function d(){}M.d(ue,{Z:()=>d})},7849:(ze,ue,M)=>{M.d(ue,{h:()=>$});var d=M(2416),K=M(3410);function $(te){K.z.setTimeout(()=>{const{onUnhandledError:X}=d.v;if(!X)throw te;X(te)})}},4532:(ze,ue,M)=>{function d(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(ue,{z:()=>d})},655:(ze,ue,M)=>{function te(H,ee){var J={};for(var ie in H)Object.prototype.hasOwnProperty.call(H,ie)&&ee.indexOf(ie)<0&&(J[ie]=H[ie]);if(null!=H&&"function"==typeof Object.getOwnPropertySymbols){var Y=0;for(ie=Object.getOwnPropertySymbols(H);Y<ie.length;Y++)ee.indexOf(ie[Y])<0&&Object.prototype.propertyIsEnumerable.call(H,ie[Y])&&(J[ie[Y]]=H[ie[Y]])}return J}function pe(H,ee,J,ie){return new(J||(J=Promise))(function(Te,ve){function Fe(gt){try{He(ie.next(gt))}catch(Ut){ve(Ut)}}function Ve(gt){try{He(ie.throw(gt))}catch(Ut){ve(Ut)}}function He(gt){gt.done?Te(gt.value):function Y(Te){return Te instanceof J?Te:new J(function(ve){ve(Te)})}(gt.value).then(Fe,Ve)}He((ie=ie.apply(H,ee||[])).next())})}function xe(H){return this instanceof xe?(this.v=H,this):new xe(H)}function tt(H,ee,J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,ie=J.apply(H,ee||[]),Te=[];return Y={},ve("next"),ve("throw"),ve("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function ve(Dt){ie[Dt]&&(Y[Dt]=function(jt){return new Promise(function(fn,bt){Te.push([Dt,jt,fn,bt])>1||Fe(Dt,jt)})})}function Fe(Dt,jt){try{!function Ve(Dt){Dt.value instanceof xe?Promise.resolve(Dt.value.v).then(He,gt):Ut(Te[0][2],Dt)}(ie[Dt](jt))}catch(fn){Ut(Te[0][3],fn)}}function He(Dt){Fe("next",Dt)}function gt(Dt){Fe("throw",Dt)}function Ut(Dt,jt){Dt(jt),Te.shift(),Te.length&&Fe(Te[0][0],Te[0][1])}}function Mt(H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J,ee=H[Symbol.asyncIterator];return ee?ee.call(H):(H=function de(H){var ee="function"==typeof Symbol&&Symbol.iterator,J=ee&&H[ee],ie=0;if(J)return J.call(H);if(H&&"number"==typeof H.length)return{next:function(){return H&&ie>=H.length&&(H=void 0),{value:H&&H[ie++],done:!H}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(H),J={},ie("next"),ie("throw"),ie("return"),J[Symbol.asyncIterator]=function(){return this},J);function ie(Te){J[Te]=H[Te]&&function(ve){return new Promise(function(Fe,Ve){!function Y(Te,ve,Fe,Ve){Promise.resolve(Ve).then(function(He){Te({value:He,done:Fe})},ve)}(Fe,Ve,(ve=H[Te](ve)).done,ve.value)})}}}M.d(ue,{FC:()=>tt,KL:()=>Mt,_T:()=>te,mG:()=>pe,qq:()=>xe})},1223:(ze,ue,M)=>{M.d(ue,{deG:()=>mm,tb:()=>jp,AFp:()=>Up,ip1:()=>Bp,CZH:()=>Ey,hGG:()=>zy,z2F:()=>xy,sBO:()=>Ly,Sil:()=>Dy,_Vd:()=>yi,EJc:()=>Cy,SBq:()=>cd,qLn:()=>Rf,vpe:()=>Qs,tBr:()=>Vl,XFs:()=>it,OlP:()=>on,zs3:()=>$s,ZZ4:()=>YC,aQg:()=>Wy,soG:()=>ws,YKP:()=>iC,h0i:()=>dc,PXZ:()=>jC,R0b:()=>Li,FiY:()=>Ha,Lbi:()=>lA,g9A:()=>aA,Qsj:()=>Q_,FYo:()=>ud,JOm:()=>To,tp0:()=>vu,Rgc:()=>pd,dDg:()=>Iy,q4F:()=>nC,GfV:()=>J_,s_b:()=>Ip,ifc:()=>k,eFA:()=>Ay,G48:()=>Fy,Gpc:()=>Mt,X6Q:()=>bA,_c5:()=>QC,VLi:()=>UC,c2e:()=>Gp,zSh:()=>c_,wAp:()=>st,vHH:()=>De,cg1:()=>LE,kL8:()=>aN,dqk:()=>j,sIi:()=>ip,CqO:()=>kS,QGY:()=>dE,F4k:()=>v_,RDi:()=>Jc,AaK:()=>xe,qOj:()=>tp,TTD:()=>Ma,_Bn:()=>eC,xp6:()=>Uf,uIk:()=>zw,Tol:()=>td,ekj:()=>up,Suo:()=>Op,Xpm:()=>Da,lG2:()=>$c,Yz7:()=>Bn,cJS:()=>$i,oAB:()=>uo,Yjl:()=>Oh,Y36:()=>ap,_UZ:()=>lE,qZA:()=>y_,TgZ:()=>__,EpF:()=>RS,n5z:()=>gu,Ikx:()=>fp,SDv:()=>Ys,QtT:()=>MN,pQV:()=>lc,LFG:()=>mn,$8M:()=>ja,$Z:()=>xS,NdJ:()=>Fi,CRH:()=>gd,oxw:()=>hE,ALo:()=>hC,xi3:()=>Cp,Hsn:()=>Xl,F$t:()=>PS,Q6J:()=>oE,s9C:()=>ec,MGl:()=>Ju,VKq:()=>vp,WLB:()=>sy,kEZ:()=>bp,iGM:()=>vC,MAs:()=>Yw,CHM:()=>$h,LSH:()=>Mf,Udp:()=>T_,YNc:()=>mS,W1O:()=>bC,_uU:()=>N_,Oqu:()=>rd,hij:()=>nc,Gf:()=>yy});var d=M(8189),K=M(8421),$=M(515),te=M(3269),X=M(8996),oe=M(7579),pe=M(727),le=M(8306),L=M(5698),F=M(930),de=M(4482);function _e(o,a,...l){return!0===a?(o(),null):!1===a?null:a(...l).pipe((0,L.q)(1)).subscribe(()=>o())}function Me(o){for(let a in o)if(o[a]===Me)return a;throw Error("Could not find renamed property on target object.")}function We(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function xe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(xe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function tt(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const at=Me({__forward_ref__:Me});function Mt(o){return o.__forward_ref__=Mt,o.toString=function(){return xe(this())},o}function fe(o){return Ie(o)?o():o}function Ie(o){return"function"==typeof o&&o.hasOwnProperty(at)&&o.__forward_ref__===Mt}class De extends Error{constructor(a,l){super(function vt(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,l)),this.code=a}}function Z(o){return"string"==typeof o?o:null==o?"":String(o)}function me(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Z(o)}function ie(o,a){const l=a?` in ${a}`:"";throw new De(-201,`No provider for ${me(o)} found${l}`)}function lt(o,a,l,u){throw new Error(`ASSERTION ERROR: ${o}`+(null==u?"":` [Expected=> ${l} ${u} ${a} <=Actual]`))}function Bn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function $i(o){return{providers:o.providers||[],imports:o.imports||[]}}function os(o){return as(o,hr)||as(o,Ii)}function as(o,a){return o.hasOwnProperty(a)?o[a]:null}function ao(o){return o&&(o.hasOwnProperty(Ns)||o.hasOwnProperty(ci))?o[Ns]:null}const hr=Me({\u0275prov:Me}),Ns=Me({\u0275inj:Me}),Ii=Me({ngInjectableDef:Me}),ci=Me({ngInjectorDef:Me});var it=(()=>((it=it||{})[it.Default=0]="Default",it[it.Host=1]="Host",it[it.Self=2]="Self",it[it.SkipSelf=4]="SkipSelf",it[it.Optional=8]="Optional",it))();let tn;function et(o){const a=tn;return tn=o,a}function As(o,a,l){const u=os(o);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:l&it.Optional?null:void 0!==a?a:void ie(xe(o),"Injector")}function wn(o){return{toString:o}.toString()}var Un=(()=>((Un=Un||{})[Un.OnPush=0]="OnPush",Un[Un.Default=1]="Default",Un))(),k=(()=>{return(o=k||(k={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",k;var o})();const V="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,he="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j=V||"undefined"!=typeof global&&global||U||he,ot={},$e=[],Yt=Me({\u0275cmp:Me}),mt=Me({\u0275dir:Me}),Ur=Me({\u0275pipe:Me}),Ms=Me({\u0275mod:Me}),Si=Me({\u0275fac:Me}),lo=Me({__NG_ELEMENT_ID__:Me});let Yg=0;function Da(o){return wn(()=>{const l={},u={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Un.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||$e,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||k.Emulated,id:"c",styles:o.styles||$e,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,g=o.features,_=o.pipes;return u.id+=Yg++,u.inputs=_l(o.inputs,l),u.outputs=_l(o.outputs),g&&g.forEach(y=>y(u)),u.directiveDefs=f?()=>("function"==typeof f?f():f).map(ml):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map(Hc):null,u})}function ml(o){return er(o)||function ui(o){return o[mt]||null}(o)}function Hc(o){return function xs(o){return o[Ur]||null}(o)}const co={};function uo(o){return wn(()=>{const a={type:o.type,bootstrap:o.bootstrap||$e,declarations:o.declarations||$e,imports:o.imports||$e,exports:o.exports||$e,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(co[o.id]=o.type),a})}function _l(o,a){if(null==o)return ot;const l={};for(const u in o)if(o.hasOwnProperty(u)){let f=o[u],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=u,a&&(a[f]=g)}return l}const $c=Da;function Oh(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function er(o){return o[Yt]||null}function di(o,a){const l=o[Ms]||null;if(!l&&!0===a)throw new Error(`Type ${xe(o)} does not have '\u0275mod' property.`);return l}function Nn(o){return Array.isArray(o)&&"object"==typeof o[1]}function Ni(o){return Array.isArray(o)&&!0===o[1]}function zc(o){return 0!=(8&o.flags)}function El(o){return 2==(2&o.flags)}function Cl(o){return 1==(1&o.flags)}function Ai(o){return null!==o.template}function Zg(o){return 0!=(512&o[2])}function fr(o,a){return o.hasOwnProperty(Si)?o[Si]:null}class em{constructor(a,l,u){this.previousValue=a,this.currentValue=l,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ma(){return tm}function tm(o){return o.type.prototype.ngOnChanges&&(o.setInput=Y0),nm}function nm(){const o=Lh(this),a=null==o?void 0:o.current;if(a){const l=o.previous;if(l===ot)o.previous=a;else for(let u in a)l[u]=a[u];o.current=null,this.ngOnChanges(a)}}function Y0(o,a,l,u){const f=Lh(o)||function rm(o,a){return o[Zc]=a}(o,{previous:ot,current:null}),g=f.current||(f.current={}),_=f.previous,y=this.declaredInputs[l],b=_[y];g[y]=new em(b&&b.currentValue,a,_===ot),o[u]=a}Ma.ngInherit=!0;const Zc="__ngSimpleChanges__";function Lh(o){return o[Zc]||null}let Go;function Jc(o){Go=o}function Ho(){return void 0!==Go?Go:"undefined"!=typeof document?document:void 0}function It(o){return!!o.listen}const Tl={createRenderer:(o,a)=>Ho()};function ln(o){for(;Array.isArray(o);)o=o[0];return o}function mo(o,a){return ln(a[o])}function Hn(o,a){return ln(a[o.index])}function _o(o,a){return o.data[a]}function ls(o,a){return o[a]}function Tr(o,a){const l=a[o];return Nn(l)?l:l[0]}function eu(o){return 4==(4&o[2])}function xa(o){return 128==(128&o[2])}function Yi(o,a){return null==a?null:o[a]}function jh(o){o[18]=0}function ks(o,a){o[5]+=a;let l=o,u=o[3];for(;null!==u&&(1===a&&1===l[5]||-1===a&&0===l[5]);)u[5]+=a,l=u,u=u[3]}const ut={lFrame:lu(null),bindingsEnabled:!0};function Hh(){return ut.bindingsEnabled}function ge(){return ut.lFrame.lView}function xt(){return ut.lFrame.tView}function $h(o){return ut.lFrame.contextLView=o,o[8]}function pn(){let o=Wh();for(;null!==o&&64===o.type;)o=o.parent;return o}function Wh(){return ut.lFrame.currentTNode}function Wo(){const o=ut.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}function hi(o,a){const l=ut.lFrame;l.currentTNode=o,l.isParent=a}function ru(){return ut.lFrame.isParent}function Ra(){ut.lFrame.isParent=!1}function pr(){const o=ut.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function ka(){return ut.lFrame.bindingIndex++}function Qi(o){const a=ut.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}function su(o){ut.lFrame.inI18n=o}function lm(o,a){const l=ut.lFrame;l.bindingIndex=l.bindingRootIndex=o,Kh(a)}function Kh(o){ut.lFrame.currentDirectiveIndex=o}function Mi(){return ut.lFrame.currentQueryIndex}function ou(o){ut.lFrame.currentQueryIndex=o}function au(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Sl(o,a,l){if(l&it.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||l&it.Host||(f=au(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const u=ut.lFrame=X0();return u.currentTNode=a,u.lView=o,!0}function Nl(o){const a=X0(),l=o[1];ut.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function X0(){const o=ut.lFrame,a=null===o?null:o.child;return null===a?lu(o):a}function lu(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function eb(){const o=ut.lFrame;return ut.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const cm=eb;function qo(){const o=eb();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Ir(){return ut.lFrame.selectedIndex}function yo(o){ut.lFrame.selectedIndex=o}function cn(){const o=ut.lFrame;return _o(o.tView,o.selectedIndex)}function cu(o,a){for(let l=a.directiveStart,u=a.directiveEnd;l<u;l++){const g=o.data[l].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:y,ngAfterViewInit:b,ngAfterViewChecked:D,ngOnDestroy:I}=g;_&&(o.contentHooks||(o.contentHooks=[])).push(-l,_),y&&((o.contentHooks||(o.contentHooks=[])).push(l,y),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,y)),b&&(o.viewHooks||(o.viewHooks=[])).push(-l,b),D&&((o.viewHooks||(o.viewHooks=[])).push(l,D),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,D)),null!=I&&(o.destroyHooks||(o.destroyHooks=[])).push(l,I)}}function Fa(o,a,l){Sr(o,a,3,l)}function Al(o,a,l,u){(3&o[2])===l&&Sr(o,a,l,u)}function Zh(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function Sr(o,a,l,u){const g=null!=u?u:-1,_=a.length-1;let y=0;for(let b=void 0!==u?65535&o[18]:0;b<_;b++)if("number"==typeof a[b+1]){if(y=a[b],null!=u&&y>=u)break}else a[b]<0&&(o[18]+=65536),(y<g||-1==g)&&(Ps(o,l,a,b),o[18]=(4294901760&o[18])+b+2),b++}function Ps(o,a,l,u){const f=l[u]<0,g=l[u+1],y=o[f?-l[u]:l[u]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(y)}finally{}}}else try{g.call(y)}finally{}}class An{constructor(a,l,u){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=u}}function La(o,a,l){const u=It(o);let f=0;for(;f<l.length;){const g=l[f];if("number"==typeof g){if(0!==g)break;f++;const _=l[f++],y=l[f++],b=l[f++];u?o.setAttribute(a,y,b,_):a.setAttributeNS(_,y,b)}else{const _=g,y=l[++f];uu(_)?u&&o.setProperty(a,_,y):u?o.setAttribute(a,_,y):a.setAttribute(_,y),f++}}return f}function Ko(o){return 3===o||4===o||6===o}function uu(o){return 64===o.charCodeAt(0)}function Ml(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let u=0;u<a.length;u++){const f=a[u];"number"==typeof f?l=f:0===l||Jh(o,l,f,null,-1===l||2===l?a[++u]:null)}}return o}function Jh(o,a,l,u,f){let g=0,_=o.length;if(-1===a)_=-1;else for(;g<o.length;){const y=o[g++];if("number"==typeof y){if(y===a){_=-1;break}if(y>a){_=g-1;break}}}for(;g<o.length;){const y=o[g];if("number"==typeof y)break;if(y===l){if(null===u)return void(null!==f&&(o[g+1]=f));if(u===o[g+1])return void(o[g+2]=f)}g++,null!==u&&g++,null!==f&&g++}-1!==_&&(o.splice(_,0,a),g=_+1),o.splice(g++,0,l),null!==u&&o.splice(g++,0,u),null!==f&&o.splice(g++,0,f)}function ir(o){return-1!==o}function cs(o){return 32767&o}function Fs(o,a){let l=function fm(o){return o>>16}(o),u=a;for(;l>0;)u=u[15],l--;return u}let du=!0;function zr(o){const a=du;return du=o,a}let Xh=0;function Qt(o,a){const l=ef(o,a);if(-1!==l)return l;const u=a[1];u.firstCreatePass&&(o.injectorIndex=a.length,Yo(u.data,o),Yo(a,null),Yo(u.blueprint,null));const f=Cn(o,a),g=o.injectorIndex;if(ir(f)){const _=cs(f),y=Fs(f,a),b=y[1].data;for(let D=0;D<8;D++)a[g+D]=y[_+D]|b[_+D]}return a[g+8]=f,g}function Yo(o,a){o.push(0,0,0,0,0,0,0,0,a)}function ef(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Cn(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,u=null,f=a;for(;null!==f;){const g=f[1],_=g.type;if(u=2===_?g.declTNode:1===_?f[6]:null,null===u)return-1;if(l++,f=f[15],-1!==u.injectorIndex)return u.injectorIndex|l<<16}return-1}function xl(o,a,l){!function fu(o,a,l){let u;"string"==typeof l?u=l.charCodeAt(0)||0:l.hasOwnProperty(lo)&&(u=l[lo]),null==u&&(u=l[lo]=Xh++);const f=255&u;a.data[o+(f>>5)]|=1<<f}(o,a,l)}function Ol(o,a,l){if(l&it.Optional)return o;ie(a,"NodeInjector")}function tf(o,a,l,u){if(l&it.Optional&&void 0===u&&(u=null),0==(l&(it.Self|it.Host))){const f=o[9],g=et(void 0);try{return f?f.get(a,u,l&it.Optional):As(a,u,l&it.Optional)}finally{et(g)}}return Ol(u,a,l)}function Va(o,a,l,u=it.Default,f){if(null!==o){const g=function pu(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(lo)?o[lo]:void 0;return"number"==typeof a?a>=0?255&a:Ls:a}(l);if("function"==typeof g){if(!Sl(a,o,u))return u&it.Host?Ol(f,l,u):tf(a,l,u,f);try{const _=g(u);if(null!=_||u&it.Optional)return _;ie(l)}finally{cm()}}else if("number"==typeof g){let _=null,y=ef(o,a),b=-1,D=u&it.Host?a[16][6]:null;for((-1===y||u&it.SkipSelf)&&(b=-1===y?Cn(o,a):a[y+8],-1!==b&&Ba(u,!1)?(_=a[1],y=cs(b),a=Fs(b,a)):y=-1);-1!==y;){const I=a[1];if(sf(g,y,I.data)){const A=rf(y,a,l,_,u,D);if(A!==nf)return A}b=a[y+8],-1!==b&&Ba(u,a[1].data[y+8]===D)&&sf(g,y,a)?(_=I,y=cs(b),a=Fs(b,a)):y=-1}}}return tf(a,l,u,f)}const nf={};function Ls(){return new wo(pn(),ge())}function rf(o,a,l,u,f,g){const _=a[1],y=_.data[o+8],I=Zo(y,_,l,null==u?El(y)&&du:u!=_&&0!=(3&y.type),f&it.Host&&g===y);return null!==I?bo(a,_,I,y):nf}function Zo(o,a,l,u,f){const g=o.providerIndexes,_=a.data,y=1048575&g,b=o.directiveStart,I=g>>20,R=f?y+I:o.directiveEnd;for(let G=u?y:y+I;G<R;G++){const se=_[G];if(G<b&&l===se||G>=b&&se.type===l)return G}if(f){const G=_[b];if(G&&Ai(G)&&G.type===l)return b}return null}function bo(o,a,l,u){let f=o[l];const g=a.data;if(function ft(o){return o instanceof An}(f)){const _=f;_.resolving&&function H(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new De(-200,`Circular dependency in DI detected for ${o}${l}`)}(me(g[l]));const y=zr(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?et(_.injectImpl):null;Sl(o,u,it.Default);try{f=o[l]=_.factory(void 0,g,o,u),a.firstCreatePass&&l>=u.directiveStart&&function Yh(o,a,l){const{ngOnChanges:u,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(u){const _=tm(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,_),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,_)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,g))}(l,g[l],a)}finally{null!==b&&et(b),zr(y),_.resolving=!1,cm()}}return f}function sf(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function Ba(o,a){return!(o&it.Self||o&it.Host&&a)}class wo{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,u){return Va(this._tNode,this._lView,a,u,l)}}function gu(o){return wn(()=>{const a=o.prototype.constructor,l=a[Si]||Ua(a),u=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==u;){const g=f[Si]||Ua(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Ua(o){return Ie(o)?()=>{const a=Ua(fe(o));return a&&a()}:fr(o)}function ja(o){return function gm(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const u=l.length;let f=0;for(;f<u;){const g=l[f];if(Ko(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<u&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(pn(),o)}const us="__parameters__";function Fn(o,a,l){return wn(()=>{const u=function gn(o){return function(...l){if(o){const u=o(...l);for(const f in u)this[f]=u[f]}}}(a);function f(...g){if(this instanceof f)return u.apply(this,g),this;const _=new f(...g);return y.annotation=_,y;function y(b,D,I){const A=b.hasOwnProperty(us)?b[us]:Object.defineProperty(b,us,{value:[]})[us];for(;A.length<=I;)A.push(null);return(A[I]=A[I]||[]).push(_),b}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class on{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Bn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const mm=new on("AnalyzeForEntryComponents");function mr(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let u=o[l];Array.isArray(u)?(a===o&&(a=o.slice(0,l)),mr(u,a)):a!==o&&a.push(u)}return a}function fi(o,a){o.forEach(l=>Array.isArray(l)?fi(l,a):a(l))}function ym(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function _u(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function ea(o,a){const l=[];for(let u=0;u<o;u++)l.push(a);return l}function xn(o,a,l){let u=Yr(o,a);return u>=0?o[1|u]=l:(u=~u,function Tn(o,a,l,u){let f=o.length;if(f==a)o.push(l,u);else if(1===f)o.push(u,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=u}}(o,u,a,l)),u}function kl(o,a){const l=Yr(o,a);if(l>=0)return o[1|l]}function Yr(o,a){return function uf(o,a,l){let u=0,f=o.length>>l;for(;f!==u;){const g=u+(f-u>>1),_=o[g<<l];if(a===_)return g<<l;_>a?f=g:u=g+1}return~(f<<l)}(o,a,1)}const Q={},be="__NG_DI_FLAG__",Ge="ngTempTokenPath",ct=/\n/gm,pt="__source",Zr=Me({provide:String,useValue:Me});let un;function Us(o){const a=un;return un=o,a}function Fl(o,a=it.Default){if(void 0===un)throw new De(203,"");return null===un?As(o,void 0,a):un.get(o,a&it.Optional?null:void 0,a)}function mn(o,a=it.Default){return(function Xe(){return tn}()||Fl)(fe(o),a)}const Qr=mn;function $n(o){const a=[];for(let l=0;l<o.length;l++){const u=fe(o[l]);if(Array.isArray(u)){if(0===u.length)throw new De(900,"");let f,g=it.Default;for(let _=0;_<u.length;_++){const y=u[_],b=iP(y);"number"==typeof b?-1===b?f=y.token:g|=b:f=y}a.push(mn(f,g))}else a.push(mn(u))}return a}function Ll(o,a){return o[be]=a,o.prototype[be]=a,o}function iP(o){return o[be]}const Vl=Ll(Fn("Inject",o=>({token:o})),-1),Ha=Ll(Fn("Optional"),8),vu=Ll(Fn("SkipSelf"),4);let mf;function Eo(o){var a;return(null===(a=function Cu(){if(void 0===mf&&(mf=null,j.trustedTypes))try{mf=j.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return mf}())||void 0===a?void 0:a.createHTML(o))||o}class Cm{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function js(o){return o instanceof Cm?o.changingThisBreaksApplicationSecurity:o}class mb{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(Eo(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class Nm{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const u=this.inertDocument.createElement("body");l.appendChild(u)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Eo(a),l;const u=this.inertDocument.createElement("body");return u.innerHTML=Eo(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const _=l.item(f).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&a.removeAttribute(_)}let u=a.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Cf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Am=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Df(o){return(o=String(o)).match(Cf)||o.match(Am)?o:"unsafe:"+o}function Mm(o){return(o=String(o)).split(",").map(a=>Df(a.trim())).join(", ")}function fs(o){const a={};for(const l of o.split(","))a[l]=!0;return a}function Bl(...o){const a={};for(const l of o)for(const u in l)l.hasOwnProperty(u)&&(a[u]=!0);return a}const Tf=fs("area,br,col,hr,img,wbr"),xm=fs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),If=fs("rp,rt"),$a=Bl(Tf,Bl(xm,fs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bl(If,fs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bl(If,xm)),Nf=fs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yb=fs("srcset"),FT=Bl(Nf,yb,fs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Zn=(()=>((Zn=Zn||{})[Zn.NONE=0]="NONE",Zn[Zn.HTML=1]="HTML",Zn[Zn.STYLE=2]="STYLE",Zn[Zn.SCRIPT=3]="SCRIPT",Zn[Zn.URL=4]="URL",Zn[Zn.RESOURCE_URL=5]="RESOURCE_URL",Zn))();function Mf(o){const a=function Wa(){const o=ge();return o&&o[12]}();return a?a.sanitize(Zn.URL,o)||"":function vf(o,a){const l=function Im(o){return o instanceof Cm&&o.getTypeName()||null}(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}(o,"URL")?js(o):Df(Z(o))}const Sb="__ngContext__";function _r(o,a){o[Sb]=a}function xf(o){const a=function Iu(o){return o[Sb]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function Co(o){return o.ngOriginalError}function Mb(o,...a){o.error(...a)}class Rf{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),u=function ZT(o){return o&&o.ngErrorLogger||Mb}(a);u(this._console,"ERROR",a),l&&u(this._console,"ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Co(a);for(;l&&Co(l);)l=Co(l);return l||null}}const JT=/^>|^->|<!--|-->|--!>|<!-$/g,Lm=/(<|>)/;const Fb=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function Do(o){return o instanceof Function?o():o}var To=(()=>((To=To||{})[To.Important=1]="Important",To[To.DashCase=2]="DashCase",To))();let Vb;function Vm(o,a){return Vb(o,a)}function Nu(o){const a=o[3];return Ni(a)?a[3]:a}function Oi(o){return gi(o[13])}function Ri(o){return gi(o[4])}function gi(o){for(;null!==o&&!Ni(o);)o=o[4];return o}function Gs(o,a,l,u,f){if(null!=u){let g,_=!1;Ni(u)?g=u:Nn(u)&&(_=!0,u=u[0]);const y=ln(u);0===o&&null!==l?null==f?za(a,l,y):yr(a,l,y,f||null,!0):1===o&&null!==l?yr(a,l,y,f||null,!0):2===o?Ou(a,y,_):3===o&&a.destroyNode(y),null!=g&&function Kb(o,a,l,u,f){const g=l[7];g!==ln(l)&&Gs(a,o,u,g,f);for(let y=10;y<l.length;y++){const b=l[y];Gl(b[1],b,o,a,u,g)}}(a,o,g,l,f)}}function ta(o,a){return It(o)?o.createText(a):o.createTextNode(a)}function jl(o,a,l){It(o)?o.setValue(a,l):a.textContent=l}function iI(o,a){return o.createComment(function Rb(o){return o.replace(JT,a=>a.replace(Lm,"\u200b$1\u200b"))}(a))}function Pf(o,a,l){if(It(o))return o.createElement(a,l);{const u=null!==l?function Qc(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(l):null;return null===u?o.createElement(a):o.createElementNS(u,a)}}function Gb(o,a){const l=o[9],u=l.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,ks(f,-1)),l.splice(u,1)}function Um(o,a){if(o.length<=10)return;const l=10+a,u=o[l];if(u){const f=u[17];null!==f&&f!==o&&Gb(f,u),a>0&&(o[l-1][4]=u[4]);const g=_u(o,10+a);!function Au(o,a){Gl(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(u[1],u);const _=g[19];null!==_&&_.detachView(g[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Hb(o,a){if(!(256&a[2])){const l=a[11];It(l)&&l.destroyNode&&Gl(o,a,l,3,null,null),function jb(o){let a=o[13];if(!a)return jm(o[1],o);for(;a;){let l=null;if(Nn(a))l=a[13];else{const u=a[10];u&&(l=u)}if(!l){for(;a&&!a[4]&&a!==o;)Nn(a)&&jm(a[1],a),a=a[3];null===a&&(a=o),Nn(a)&&jm(a[1],a),l=a&&a[4]}a=l}}(a)}}function jm(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function cI(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let u=0;u<l.length;u+=2){const f=a[l[u]];if(!(f instanceof An)){const g=l[u+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const y=f[g[_]],b=g[_+1];try{b.call(y)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function lI(o,a){const l=o.cleanup,u=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const _=l[g+1],y="function"==typeof _?_(a):ln(a[_]),b=u[f=l[g+2]],D=l[g+3];"boolean"==typeof D?y.removeEventListener(l[g],b,D):D>=0?u[f=D]():u[f=-D].unsubscribe(),g+=2}else{const _=u[f=l[g+1]];l[g].call(_)}if(null!==u){for(let g=f+1;g<u.length;g++)u[g]();a[7]=null}}(o,a),1===a[1].type&&It(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&Ni(a[3])){l!==a[3]&&Gb(l,a);const u=a[19];null!==u&&u.detachView(o)}}}function $b(o,a,l){return Wb(o,a.parent,l)}function Wb(o,a,l){let u=a;for(;null!==u&&40&u.type;)u=(a=u).parent;if(null===u)return l[0];if(2&u.flags){const f=o.data[u.directiveStart].encapsulation;if(f===k.None||f===k.Emulated)return null}return Hn(u,l)}function yr(o,a,l,u,f){It(o)?o.insertBefore(a,l,u,f):a.insertBefore(l,u,f)}function za(o,a,l){It(o)?o.appendChild(a,l):a.appendChild(l)}function ki(o,a,l,u,f){null!==u?yr(o,a,l,u,f):za(o,a,l)}function gs(o,a){return It(o)?o.parentNode(a):a.parentNode}function Mu(o,a,l){return Ya(o,a,l)}function Ka(o,a,l){return 40&o.type?Hn(o,l):null}let xu,Ya=Ka;function Ff(o,a){Ya=o,xu=a}function Lf(o,a,l,u){const f=$b(o,u,a),g=a[11],y=Mu(u.parent||a[6],u,a);if(null!=f)if(Array.isArray(l))for(let b=0;b<l.length;b++)ki(g,f,l[b],y,!1);else ki(g,f,l,y,!1);void 0!==xu&&xu(g,u,a,l,f)}function Ji(o,a){if(null!==a){const l=a.type;if(3&l)return Hn(a,o);if(4&l)return Xi(-1,o[a.index]);if(8&l){const u=a.child;if(null!==u)return Ji(o,u);{const f=o[a.index];return Ni(f)?Xi(-1,f):ln(f)}}if(32&l)return Vm(a,o)()||ln(o[a.index]);{const u=zb(o,a);return null!==u?Array.isArray(u)?u[0]:Ji(Nu(o[16]),u):Ji(o,a.next)}}return null}function zb(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Xi(o,a){const l=10+o+1;if(l<a.length){const u=a[l],f=u[1].firstChild;if(null!==f)return Ji(u,f)}return a[7]}function Ou(o,a,l){const u=gs(o,a);u&&function Gm(o,a,l,u){It(o)?o.removeChild(a,l,u):a.removeChild(l)}(o,u,a,l)}function Ru(o,a,l,u,f,g,_){for(;null!=l;){const y=u[l.index],b=l.type;if(_&&0===a&&(y&&_r(ln(y),u),l.flags|=4),64!=(64&l.flags))if(8&b)Ru(o,a,l.child,u,f,g,!1),Gs(a,o,f,y,g);else if(32&b){const D=Vm(l,u);let I;for(;I=D();)Gs(a,o,f,I,g);Gs(a,o,f,y,g)}else 16&b?qb(o,a,u,l,f,g):Gs(a,o,f,y,g);l=_?l.projectionNext:l.next}}function Gl(o,a,l,u,f,g){Ru(l,u,o.firstChild,a,f,g,!1)}function qb(o,a,l,u,f,g){const _=l[16],b=_[6].projection[u.projection];if(Array.isArray(b))for(let D=0;D<b.length;D++)Gs(a,o,f,b[D],g);else Ru(o,a,b,_[3],f,g,!0)}function Hl(o,a,l){It(o)?o.setAttribute(a,"style",l):a.style.cssText=l}function Vf(o,a,l){It(o)?""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l):a.className=l}function Bf(o,a,l){let u=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===u||o.charCodeAt(f+g)<=32)return f}l=f+1}}const Hm="ng-template";function dI(o,a,l){let u=0;for(;u<o.length;){let f=o[u++];if(l&&"class"===f){if(f=o[u],-1!==Bf(f.toLowerCase(),a,0))return!0}else if(1===f){for(;u<o.length&&"string"==typeof(f=o[u++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function Yb(o){return 4===o.type&&o.value!==Hm}function $l(o,a,l){return a===(4!==o.type||l?o.value:Hm)}function $m(o,a,l){let u=4;const f=o.attrs||[],g=function zm(o){for(let a=0;a<o.length;a++)if(Ko(o[a]))return a;return o.length}(f);let _=!1;for(let y=0;y<a.length;y++){const b=a[y];if("number"!=typeof b){if(!_)if(4&u){if(u=2|1&u,""!==b&&!$l(o,b,l)||""===b&&1===a.length){if(es(u))return!1;_=!0}}else{const D=8&u?b:a[++y];if(8&u&&null!==o.attrs){if(!dI(o.attrs,D,l)){if(es(u))return!1;_=!0}continue}const A=Zb(8&u?"class":b,f,Yb(o),l);if(-1===A){if(es(u))return!1;_=!0;continue}if(""!==D){let R;R=A>g?"":f[A+1].toLowerCase();const G=8&u?R:null;if(G&&-1!==Bf(G,D,0)||2&u&&D!==R){if(es(u))return!1;_=!0}}}}else{if(!_&&!es(u)&&!es(b))return!1;if(_&&es(b))continue;_=!1,u=b|1&u}}return es(u)||_}function es(o){return 0==(1&o)}function Zb(o,a,l,u){if(null===a)return-1;let f=0;if(u||!l){let g=!1;for(;f<a.length;){const _=a[f];if(_===o)return f;if(3===_||6===_)g=!0;else{if(1===_||2===_){let y=a[++f];for(;"string"==typeof y;)y=a[++f];continue}if(4===_)break;if(0===_){f+=4;continue}}f+=g?1:2}return-1}return function hI(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const u=o[l];if("number"==typeof u)return-1;if(u===a)return l;l++}return-1}(a,o)}function Wm(o,a,l=!1){for(let u=0;u<a.length;u++)if($m(o,a[u],l))return!0;return!1}function fI(o,a){e:for(let l=0;l<a.length;l++){const u=a[l];if(o.length===u.length){for(let f=0;f<o.length;f++)if(o[f]!==u[f])continue e;return!0}}return!1}function Jb(o,a){return o?":not("+a.trim()+")":a}function pI(o){let a=o[0],l=1,u=2,f="",g=!1;for(;l<o.length;){let _=o[l];if("string"==typeof _)if(2&u){const y=o[++l];f+="["+_+(y.length>0?'="'+y+'"':"")+"]"}else 8&u?f+="."+_:4&u&&(f+=" "+_);else""!==f&&!es(_)&&(a+=Jb(g,f),f=""),u=_,g=g||!es(u);l++}return""!==f&&(a+=Jb(g,f)),a}const wt={};function Uf(o){Xb(xt(),ge(),Ir()+o,!1)}function Xb(o,a,l,u){if(!u)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&Fa(a,g,l)}else{const g=o.preOrderHooks;null!==g&&Al(a,g,0,l)}yo(l)}function jf(o,a){return o<<17|a<<2}function ms(o){return o>>17&32767}function qm(o){return 2|o}function Io(o){return(131068&o)>>2}function Km(o,a){return-131069&o|a<<2}function Ym(o){return 1|o}function II(o,a){const l=o.contentQueries;if(null!==l)for(let u=0;u<l.length;u+=2){const f=l[u],g=l[u+1];if(-1!==g){const _=o.data[g];ou(f),_.contentQueries(2,a[g],g)}}}function Fu(o,a,l,u,f,g,_,y,b,D){const I=a.blueprint.slice();return I[0]=f,I[2]=140|u,jh(I),I[3]=I[15]=o,I[8]=l,I[10]=_||o&&o[10],I[11]=y||o&&o[11],I[12]=b||o&&o[12]||null,I[9]=D||o&&o[9]||null,I[6]=g,I[16]=2==a.type?o[16]:I,I}function Wl(o,a,l,u,f){let g=o.data[a];if(null===g)g=r_(o,a,l,u,f),function qh(){return ut.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=u,g.attrs=f;const _=Wo();g.injectorIndex=null===_?-1:_.injectorIndex}return hi(g,!0),g}function r_(o,a,l,u,f){const g=Wh(),_=ru(),b=o.data[a]=function AI(o,a,l,u,f,g){return{type:l,index:u,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,l,a,u,f);return null===o.firstChild&&(o.firstChild=b),null!==g&&(_?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b)),b}function Lu(o,a,l,u){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(u),o.blueprint.push(u),o.data.push(null);return f}function Wf(o,a,l){Nl(a);try{const u=o.viewQuery;null!==u&&Sw(1,u,l);const f=o.template;null!==f&&uw(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&II(o,a),o.staticViewQueries&&Sw(2,o.viewQuery,l);const g=o.components;null!==g&&function OP(o,a){for(let l=0;l<a.length;l++)zI(o,a[l])}(a,g)}catch(u){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),u}finally{a[2]&=-5,qo()}}function Vu(o,a,l,u){const f=a[2];if(256!=(256&f)){Nl(a);try{jh(a),function zh(o){return ut.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&uw(o,a,l,2,u);const _=3==(3&f);if(_){const D=o.preOrderCheckHooks;null!==D&&Fa(a,D,null)}else{const D=o.preOrderHooks;null!==D&&Al(a,D,0,null),Zh(a,0)}if(function $I(o){for(let a=Oi(o);null!==a;a=Ri(a)){if(!a[2])continue;const l=a[9];for(let u=0;u<l.length;u++){const f=l[u],g=f[3];0==(1024&f[2])&&ks(g,1),f[2]|=1024}}}(a),function HI(o){for(let a=Oi(o);null!==a;a=Ri(a))for(let l=10;l<a.length;l++){const u=a[l],f=u[1];xa(u)&&Vu(f,u,f.template,u[8])}}(a),null!==o.contentQueries&&II(o,a),_){const D=o.contentCheckHooks;null!==D&&Fa(a,D)}else{const D=o.contentHooks;null!==D&&Al(a,D,1),Zh(a,1)}!function MP(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let u=0;u<l.length;u++){const f=l[u];if(f<0)yo(~f);else{const g=f,_=l[++u],y=l[++u];lm(_,g),y(2,a[g])}}}finally{yo(-1)}}(o,a);const y=o.components;null!==y&&function xP(o,a){for(let l=0;l<a.length;l++)WI(o,a[l])}(a,y);const b=o.viewQuery;if(null!==b&&Sw(2,b,u),_){const D=o.viewCheckHooks;null!==D&&Fa(a,D)}else{const D=o.viewHooks;null!==D&&Al(a,D,2),Zh(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-73,1024&a[2]&&(a[2]&=-1025,ks(a[3],-1))}finally{qo()}}}function RP(o,a,l,u){const f=a[10],_=eu(a);try{!_&&f.begin&&f.begin(),_&&Wf(o,a,u),Vu(o,a,l,u)}finally{!_&&f.end&&f.end()}}function uw(o,a,l,u,f){const g=Ir(),_=2&u;try{yo(-1),_&&a.length>20&&Xb(o,a,20,!1),l(u,f)}finally{yo(g)}}function hw(o,a,l){!Hh()||(function PI(o,a,l,u){const f=l.directiveStart,g=l.directiveEnd;o.firstCreatePass||Qt(l,a),_r(u,a);const _=l.initialInputs;for(let y=f;y<g;y++){const b=o.data[y],D=Ai(b);D&&UI(a,l,b);const I=bo(a,o,y,l);_r(I,a),null!==_&&jI(0,y-f,I,b,0,_),D&&(Tr(l.index,a)[8]=I)}}(o,a,l,Hn(l,a)),128==(128&l.flags)&&function FI(o,a,l){const u=l.directiveStart,f=l.directiveEnd,_=l.index,y=function J0(){return ut.lFrame.currentDirectiveIndex}();try{yo(_);for(let b=u;b<f;b++){const D=o.data[b],I=a[b];Kh(b),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&bw(D,I)}}finally{yo(-1),Kh(y)}}(o,a,l))}function fw(o,a,l=Hn){const u=a.localNames;if(null!==u){let f=a.index+1;for(let g=0;g<u.length;g+=2){const _=u[g+1],y=-1===_?l(a,o):o[_];o[f++]=y}}}function SI(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=i_(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function i_(o,a,l,u,f,g,_,y,b,D){const I=20+u,A=I+f,R=function NI(o,a){const l=[];for(let u=0;u<a;u++)l.push(u<o?null:wt);return l}(I,A),G="function"==typeof D?D():D;return R[1]={type:o,blueprint:R,template:l,queries:null,viewQuery:y,declTNode:a,data:R.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:G,incompleteFirstPass:!1}}function mw(o,a,l,u){const f=KI(a);null===l?f.push(u):(f.push(l),o.firstCreatePass&&Nw(o).push(u,f.length-1))}function _w(o,a,l){for(let u in o)if(o.hasOwnProperty(u)){const f=o[u];(l=null===l?{}:l).hasOwnProperty(u)?l[u].push(a,f):l[u]=[a,f]}return l}function Pi(o,a,l,u,f,g,_,y){const b=Hn(a,l);let I,D=a.inputs;!y&&null!=D&&(I=D[u])?(ZI(o,l,I,u,f),El(a)&&function xI(o,a){const l=Tr(a,o);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(u=function kP(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(u),f=null!=_?_(f,a.value||"",u):f,It(g)?g.setProperty(b,u,f):uu(u)||(b.setProperty?b.setProperty(u,f):b[u]=f))}function s_(o,a,l,u){let f=!1;if(Hh()){const g=function LI(o,a,l){const u=o.directiveRegistry;let f=null;if(u)for(let g=0;g<u.length;g++){const _=u[g];Wm(l,_.selectors,!1)&&(f||(f=[]),xl(Qt(l,a),o,_.type),Ai(_)?(ww(o,l),f.unshift(_)):f.push(_))}return f}(o,a,l),_=null===u?null:{"":-1};if(null!==g){f=!0,Ew(l,o.data.length,g.length);for(let I=0;I<g.length;I++){const A=g[I];A.providersResolver&&A.providersResolver(A)}let y=!1,b=!1,D=Lu(o,a,g.length,null);for(let I=0;I<g.length;I++){const A=g[I];l.mergedAttrs=Ml(l.mergedAttrs,A.hostAttrs),Cw(o,l,a,D,A),BI(D,A,_),null!==A.contentQueries&&(l.flags|=8),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(l.flags|=128);const R=A.type.prototype;!y&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),y=!0),!b&&(R.ngOnChanges||R.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),b=!0),D++}!function MI(o,a){const u=a.directiveEnd,f=o.data,g=a.attrs,_=[];let y=null,b=null;for(let D=a.directiveStart;D<u;D++){const I=f[D],A=I.inputs,R=null===g||Yb(a)?null:GI(A,g);_.push(R),y=_w(A,D,y),b=_w(I.outputs,D,b)}null!==y&&(y.hasOwnProperty("class")&&(a.flags|=16),y.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=_,a.inputs=y,a.outputs=b}(o,l)}_&&function VI(o,a,l){if(a){const u=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new De(-301,!1);u.push(a[f],g)}}}(l,u,_)}return l.mergedAttrs=Ml(l.mergedAttrs,l.attrs),f}function vw(o,a,l,u,f,g){const _=g.hostBindings;if(_){let y=o.hostBindingOpCodes;null===y&&(y=o.hostBindingOpCodes=[]);const b=~a.index;(function kI(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(y)!=b&&y.push(b),y.push(u,f,_)}}function bw(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function ww(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function BI(o,a,l){if(l){if(a.exportAs)for(let u=0;u<a.exportAs.length;u++)l[a.exportAs[u]]=o;Ai(a)&&(l[""]=o)}}function Ew(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function Cw(o,a,l,u,f){o.data[u]=f;const g=f.factory||(f.factory=fr(f.type)),_=new An(g,Ai(f),null);o.blueprint[u]=_,l[u]=_,vw(o,a,0,u,Lu(o,l,f.hostVars,wt),f)}function UI(o,a,l){const u=Hn(a,o),f=SI(l),g=o[10],_=zf(o,Fu(o,f,null,l.onPush?64:16,u,a,g,g.createRenderer(u,l),null,null));o[a.index]=_}function Bu(o,a,l,u,f,g,_){if(null==g)It(o)?o.removeAttribute(a,f,l):a.removeAttribute(f);else{const y=null==_?Z(g):_(g,u||"",f);It(o)?o.setAttribute(a,f,y,l):l?a.setAttributeNS(l,f,y):a.setAttribute(f,y)}}function jI(o,a,l,u,f,g){const _=g[a];if(null!==_){const y=u.setInput;for(let b=0;b<_.length;){const D=_[b++],I=_[b++],A=_[b++];null!==y?u.setInput(l,A,D,I):l[I]=A}}}function GI(o,a){let l=null,u=0;for(;u<a.length;){const f=a[u];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,o[f],a[u+1])),u+=2}else u+=2;else u+=4}return l}function Dw(o,a,l,u){return new Array(o,!0,!1,a,null,0,u,l,null,null)}function WI(o,a){const l=Tr(a,o);if(xa(l)){const u=l[1];80&l[2]?Vu(u,l,u.template,l[8]):l[5]>0&&o_(l)}}function o_(o){for(let u=Oi(o);null!==u;u=Ri(u))for(let f=10;f<u.length;f++){const g=u[f];if(1024&g[2]){const _=g[1];Vu(_,g,_.template,g[8])}else g[5]>0&&o_(g)}const l=o[1].components;if(null!==l)for(let u=0;u<l.length;u++){const f=Tr(l[u],o);xa(f)&&f[5]>0&&o_(f)}}function zI(o,a){const l=Tr(a,o),u=l[1];(function qI(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(u,l),Wf(u,l,l[8])}function zf(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function a_(o){for(;o;){o[2]|=64;const a=Nu(o);if(Zg(o)&&!a)return o;o=a}return null}function Iw(o){!function Tw(o){for(let a=0;a<o.components.length;a++){const l=o.components[a],u=xf(l),f=u[1];RP(f,u,f.template,l)}}(o[8])}function Sw(o,a,l){ou(0),a(o,l)}const jP=(()=>Promise.resolve(null))();function KI(o){return o[7]||(o[7]=[])}function Nw(o){return o.cleanup||(o.cleanup=[])}function YI(o,a){const l=o[9],u=l?l.get(Rf,null):null;u&&u.handleError(a)}function ZI(o,a,l,u,f){for(let g=0;g<l.length;){const _=l[g++],y=l[g++],b=a[_],D=o.data[_];null!==D.setInput?D.setInput(b,f,u,y):b[y]=f}}function qf(o,a,l){let u=l?o.styles:null,f=l?o.classes:null,g=0;if(null!==a)for(let _=0;_<a.length;_++){const y=a[_];"number"==typeof y?g=y:1==g?f=tt(f,y):2==g&&(u=tt(u,y+": "+a[++_]+";"))}l?o.styles=u:o.stylesWithoutHost=u,l?o.classes=f:o.classesWithoutHost=f}const Mw=new on("INJECTOR",-1);class xw{get(a,l=Q){if(l===Q){const u=new Error(`NullInjectorError: No provider for ${xe(a)}!`);throw u.name="NullInjectorError",u}return l}}const c_=new on("Set Injector scope."),Kf={},WP={};let u_;function Ow(){return void 0===u_&&(u_=new xw),u_}function QI(o,a=null,l=null,u){const f=Uu(o,a,l,u);return f._resolveInjectorDefTypes(),f}function Uu(o,a=null,l=null,u){return new zP(o,l,a||Ow(),u)}class zP{constructor(a,l,u,f=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];l&&fi(l,y=>this.processProvider(y,a,l)),fi([a],y=>this.processInjectorType(y,[],g)),this.records.set(Mw,ts(void 0,this));const _=this.records.get(c_);this.scope=null!=_?_.value:null,this.source=f||("object"==typeof a?null:xe(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=Q,u=it.Default){this.assertNotDestroyed();const f=Us(this),g=et(void 0);try{if(!(u&it.SkipSelf)){let y=this.records.get(a);if(void 0===y){const b=function YP(o){return"function"==typeof o||"object"==typeof o&&o instanceof on}(a)&&os(a);y=b&&this.injectableDefInScope(b)?ts(ju(a),Kf):null,this.records.set(a,y)}if(null!=y)return this.hydrate(a,y)}return(u&it.Self?Ow():this.parent).get(a,l=u&it.Optional&&l===Q?null:l)}catch(_){if("NullInjectorError"===_.name){if((_[Ge]=_[Ge]||[]).unshift(xe(a)),f)throw _;return function sP(o,a,l,u){const f=o[Ge];throw a[pt]&&f.unshift(a[pt]),o.message=function ST(o,a,l,u=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=xe(a);if(Array.isArray(a))f=a.map(xe).join(" -> ");else if("object"==typeof a){let g=[];for(let _ in a)if(a.hasOwnProperty(_)){let y=a[_];g.push(_+":"+("string"==typeof y?JSON.stringify(y):xe(y)))}f=`{${g.join(", ")}}`}return`${l}${u?"("+u+")":""}[${f}]: ${o.replace(ct,"\n  ")}`}("\n"+o.message,f,l,u),o.ngTokenPath=f,o[Ge]=null,o}(_,a,"R3InjectorError",this.source)}throw _}finally{et(g),Us(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((u,f)=>a.push(xe(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processInjectorType(a,l,u){if(!(a=fe(a)))return!1;let f=ao(a);const g=null==f&&a.ngModule||void 0,_=void 0===g?a:g,y=-1!==u.indexOf(_);if(void 0!==g&&(f=ao(g)),null==f)return!1;if(null!=f.imports&&!y){let I;u.push(_);try{fi(f.imports,A=>{this.processInjectorType(A,l,u)&&(void 0===I&&(I=[]),I.push(A))})}finally{}if(void 0!==I)for(let A=0;A<I.length;A++){const{ngModule:R,providers:G}=I[A];fi(G,se=>this.processProvider(se,R,G||$e))}}this.injectorDefTypes.add(_);const b=fr(_)||(()=>new _);this.records.set(_,ts(b,Kf));const D=f.providers;if(null!=D&&!y){const I=a;fi(D,A=>this.processProvider(A,I,D))}return void 0!==g&&void 0!==a.providers}processProvider(a,l,u){let f=Gu(a=fe(a))?a:fe(a&&a.provide);const g=function No(o,a,l){return h_(o)?ts(void 0,o.useValue):ts(Yf(o),Kf)}(a);if(Gu(a)||!0!==a.multi)this.records.get(f);else{let _=this.records.get(f);_||(_=ts(void 0,Kf,!0),_.factory=()=>$n(_.multi),this.records.set(f,_)),f=a,_.multi.push(a)}this.records.set(f,g)}hydrate(a,l){return l.value===Kf&&(l.value=WP,l.value=l.factory()),"object"==typeof l.value&&l.value&&function XI(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=fe(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function ju(o){const a=os(o),l=null!==a?a.factory:fr(o);if(null!==l)return l;if(o instanceof on)throw new De(204,!1);if(o instanceof Function)return function d_(o){const a=o.length;if(a>0)throw ea(a,"?"),new De(204,!1);const l=function bn(o){const a=o&&(o[hr]||o[Ii]);if(a){const l=function Ti(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new De(204,!1)}function Yf(o,a,l){let u;if(Gu(o)){const f=fe(o);return fr(f)||ju(f)}if(h_(o))u=()=>fe(o.useValue);else if(function KP(o){return!(!o||!o.useFactory)}(o))u=()=>o.useFactory(...$n(o.deps||[]));else if(function qP(o){return!(!o||!o.useExisting)}(o))u=()=>mn(fe(o.useExisting));else{const f=fe(o&&(o.useClass||o.provide));if(!function zl(o){return!!o.deps}(o))return fr(f)||ju(f);u=()=>new f(...$n(o.deps))}return u}function ts(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function h_(o){return null!==o&&"object"==typeof o&&Zr in o}function Gu(o){return"function"==typeof o}let $s=(()=>{class o{static create(l,u){var f;if(Array.isArray(l))return QI({name:""},u,l,"");{const g=null!==(f=l.name)&&void 0!==f?f:"";return QI({name:g},l.parent,l.providers,g)}}}return o.THROW_IF_NOT_FOUND=Q,o.NULL=new xw,o.\u0275prov=Bn({token:o,providedIn:"any",factory:()=>mn(Mw)}),o.__NG_ELEMENT_ID__=-1,o})();function Hw(o,a){cu(xf(o)[1],pn())}function tp(o){let a=function iS(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const u=[o];for(;a;){let f;if(Ai(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new De(903,"");f=a.\u0275dir}if(f){if(l){u.push(f);const _=o;_.inputs=np(o.inputs),_.declaredInputs=np(o.declaredInputs),_.outputs=np(o.outputs);const y=f.hostBindings;y&&sS(o,y);const b=f.viewQuery,D=f.contentQueries;if(b&&Hu(o,b),D&&rp(o,D),We(o.inputs,f.inputs),We(o.declaredInputs,f.declaredInputs),We(o.outputs,f.outputs),Ai(f)&&f.data.animation){const I=o.data;I.animation=(I.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let _=0;_<g.length;_++){const y=g[_];y&&y.ngInherit&&y(o),y===tp&&(l=!1)}}a=Object.getPrototypeOf(a)}!function ia(o){let a=0,l=null;for(let u=o.length-1;u>=0;u--){const f=o[u];f.hostVars=a+=f.hostVars,f.hostAttrs=Ml(f.hostAttrs,l=Ml(l,f.hostAttrs))}}(u)}function np(o){return o===ot?{}:o===$e?[]:o}function Hu(o,a){const l=o.viewQuery;o.viewQuery=l?(u,f)=>{a(u,f),l(u,f)}:a}function rp(o,a){const l=o.contentQueries;o.contentQueries=l?(u,f,g)=>{a(u,f,g),l(u,f,g)}:a}function sS(o,a){const l=o.hostBindings;o.hostBindings=l?(u,f)=>{a(u,f),l(u,f)}:a}let $u=null;function Kl(){if(!$u){const o=j.Symbol;if(o&&o.iterator)$u=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const u=a[l];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&($u=u)}}}return $u}function ip(o){return!!Ww(o)&&(Array.isArray(o)||!(o instanceof Map)&&Kl()in o)}function Ww(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function _s(o,a,l){return o[a]=l}function Xr(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function Yl(o,a,l,u){const f=Xr(o,a,l);return Xr(o,a+1,u)||f}function zw(o,a,l,u){const f=ge();return Xr(f,ka(),a)&&(xt(),function Hs(o,a,l,u,f,g){const _=Hn(o,a);Bu(a[11],_,g,o.value,l,u,f)}(cn(),f,o,a,l,u)),zw}function zu(o,a,l,u){return Xr(o,ka(),l)?a+Z(l)+u:wt}function mS(o,a,l,u,f,g,_,y){const b=ge(),D=xt(),I=o+20,A=D.firstCreatePass?function XP(o,a,l,u,f,g,_,y,b){const D=a.consts,I=Wl(a,o,4,_||null,Yi(D,y));s_(a,l,I,Yi(D,b)),cu(a,I);const A=I.tViews=i_(2,I,u,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,D);return null!==a.queries&&(a.queries.template(a,I),A.queries=a.queries.embeddedTView(I)),I}(I,D,b,a,l,u,f,g,_):D.data[I];hi(A,!1);const R=b[11].createComment("");Lf(D,b,R,A),_r(R,b),zf(b,b[I]=Dw(R,b,R,A)),Cl(A)&&hw(D,b,A),null!=_&&fw(b,A,y)}function Yw(o){return ls(function iu(){return ut.lFrame.contextLView}(),20+o)}function ap(o,a=it.Default){const l=ge();return null===l?mn(o,a):Va(pn(),l,fe(o),a)}function xS(){throw new Error("invalid")}function oE(o,a,l){const u=ge();return Xr(u,ka(),a)&&Pi(xt(),cn(),u,o,a,u[11],l,!1),oE}function aE(o,a,l,u,f){const _=f?"class":"style";ZI(o,l,a.inputs[_],_,u)}function __(o,a,l,u){const f=ge(),g=xt(),_=20+o,y=f[11],b=f[_]=Pf(y,a,function ib(){return ut.lFrame.currentNamespace}()),D=g.firstCreatePass?function dF(o,a,l,u,f,g,_){const y=a.consts,D=Wl(a,o,2,f,Yi(y,g));return s_(a,l,D,Yi(y,_)),null!==D.attrs&&qf(D,D.attrs,!1),null!==D.mergedAttrs&&qf(D,D.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,D),D}(_,g,f,0,a,l,u):g.data[_];hi(D,!0);const I=D.mergedAttrs;null!==I&&La(y,b,I);const A=D.classes;null!==A&&Vf(y,b,A);const R=D.styles;return null!==R&&Hl(y,b,R),64!=(64&D.flags)&&Lf(g,f,b,D),0===function Oa(){return ut.lFrame.elementDepthCount}()&&_r(b,f),function im(){ut.lFrame.elementDepthCount++}(),Cl(D)&&(hw(g,f,D),function dw(o,a,l){if(zc(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const _=o.data[g];_.contentQueries&&_.contentQueries(1,l[g],g)}}}(g,D,f)),null!==u&&fw(f,D),__}function y_(){let o=pn();ru()?Ra():(o=o.parent,hi(o,!1));const a=o;!function nu(){ut.lFrame.elementDepthCount--}();const l=xt();return l.firstCreatePass&&(cu(l,o),zc(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function hm(o){return 0!=(16&o.flags)}(a)&&aE(l,a,ge(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function xi(o){return 0!=(32&o.flags)}(a)&&aE(l,a,ge(),a.stylesWithoutHost,!1),y_}function lE(o,a,l,u){return __(o,a,l,u),y_(),lE}function RS(){return ge()}function dE(o){return!!o&&"function"==typeof o.then}function v_(o){return!!o&&"function"==typeof o.subscribe}const kS=v_;function Fi(o,a,l,u){const f=ge(),g=xt(),_=pn();return function w_(o,a,l,u,f,g,_,y){const b=Cl(u),I=o.firstCreatePass&&Nw(o),A=a[8],R=KI(a);let G=!0;if(3&u.type||y){const Oe=Hn(u,a),Be=y?y(Oe):Oe,ce=R.length,Je=y?Pt=>y(ln(Pt[u.index])):u.index;if(It(l)){let Pt=null;if(!y&&b&&(Pt=function b_(o,a,l,u){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const _=f[g];if(_===l&&f[g+1]===u){const y=a[7],b=f[g+2];return y.length>b?y[b]:null}"string"==typeof _&&(g+=2)}return null}(o,a,f,u.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=g,Pt.__ngLastListenerFn__=g,G=!1;else{g=E_(u,a,A,g,!1);const $t=l.listen(Be,f,g);R.push(g,$t),I&&I.push(f,Je,ce,ce+1)}}else g=E_(u,a,A,g,!0),Be.addEventListener(f,g,_),R.push(g),I&&I.push(f,Je,ce,_)}else g=E_(u,a,A,g,!1);const se=u.outputs;let Ce;if(G&&null!==se&&(Ce=se[f])){const Oe=Ce.length;if(Oe)for(let Be=0;Be<Oe;Be+=2){const rs=a[Ce[Be]][Ce[Be+1]].subscribe(g),xo=R.length;R.push(g,rs),I&&I.push(f,u.index,xo,-(xo+1))}}}(g,f,f[11],_,o,a,!!l,u),Fi}function lp(o,a,l,u){try{return!1!==l(u)}catch(f){return YI(o,f),!1}}function E_(o,a,l,u,f){return function g(_){if(_===Function)return u;const y=2&o.flags?Tr(o.index,a):a;0==(32&a[2])&&a_(y);let b=lp(a,0,u,_),D=g.__ngNextListenerFn__;for(;D;)b=lp(a,0,D,_)&&b,D=D.__ngNextListenerFn__;return f&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function hE(o=1){return function um(o){return(ut.lFrame.contextLView=function tb(o,a){for(;o>0;)a=a[15],o--;return a}(o,ut.lFrame.contextLView))[8]}(o)}function C_(o,a){let l=null;const u=function Qb(o){const a=o.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===u?Wm(o,g,!0):fI(u,g))return f}else l=f}return l}function PS(o){const a=ge()[16][6];if(!a.projection){const u=a.projection=ea(o?o.length:1,null),f=u.slice();let g=a.child;for(;null!==g;){const _=o?C_(g,o):0;null!==_&&(f[_]?f[_].projectionNext=g:u[_]=g,f[_]=g),g=g.next}}}function Xl(o,a=0,l){const u=ge(),f=xt(),g=Wl(f,20+o,16,null,l||null);null===g.projection&&(g.projection=a),Ra(),64!=(64&g.flags)&&function ku(o,a,l){qb(a[11],0,a,l,$b(o,l,a),Mu(l.parent||a[6],l,a))}(f,u,g)}function ec(o,a,l){return Ju(o,"",a,"",l),ec}function Ju(o,a,l,u,f){const g=ge(),_=zu(g,a,l,u);return _!==wt&&Pi(xt(),cn(),g,o,_,g[11],f,!1),Ju}function D_(o,a,l,u,f){const g=o[l+1],_=null===a;let y=u?ms(g):Io(g),b=!1;for(;0!==y&&(!1===b||_);){const I=o[y+1];pF(o[y],a)&&(b=!0,o[y+1]=u?Ym(I):qm(I)),y=u?ms(I):Io(I)}b&&(o[l+1]=u?qm(g):Ym(g))}function pF(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Yr(o,a)>=0}const sr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function LS(o){return o.substring(sr.key,sr.keyEnd)}function VS(o,a){const l=sr.textEnd;return l===a?-1:(a=sr.keyEnd=function yF(o,a,l){for(;a<l&&o.charCodeAt(a)>32;)a++;return a}(o,sr.key=a,l),ed(o,a,l))}function ed(o,a,l){for(;a<l&&o.charCodeAt(a)<=32;)a++;return a}function T_(o,a,l){return _i(o,a,l,!1),T_}function up(o,a){return _i(o,a,null,!0),up}function td(o){!function qs(o,a,l,u){const f=xt(),g=Qi(2);f.firstUpdatePass&&oa(f,null,g,u);const _=ge();if(l!==wt&&Xr(_,g,l)){const y=f.data[Ir()];if(EE(y,u)&&!I_(f,g)){let b=u?y.classesWithoutHost:y.stylesWithoutHost;null!==b&&(l=tt(b,l||"")),aE(f,y,_,l,u)}else!function qS(o,a,l,u,f,g,_,y){f===wt&&(f=$e);let b=0,D=0,I=0<f.length?f[0]:null,A=0<g.length?g[0]:null;for(;null!==I||null!==A;){const R=b<f.length?f[b+1]:void 0,G=D<g.length?g[D+1]:void 0;let Ce,se=null;I===A?(b+=2,D+=2,R!==G&&(se=A,Ce=G)):null===A||null!==I&&I<A?(b+=2,se=I):(D+=2,se=A,Ce=G),null!==se&&bE(o,a,l,u,se,Ce,_,y),I=b<f.length?f[b]:null,A=D<g.length?g[D]:null}}(f,y,_,_[11],_[g+1],_[g+1]=function zS(o,a,l){if(null==l||""===l)return $e;const u=[],f=js(l);if(Array.isArray(f))for(let g=0;g<f.length;g++)o(u,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&o(u,g,f[g]);else"string"==typeof f&&a(u,f);return u}(o,a,l),u,g)}}(xn,zs,o,!0)}function zs(o,a){for(let l=function mF(o){return function US(o){sr.key=0,sr.keyEnd=0,sr.value=0,sr.valueEnd=0,sr.textEnd=o.length}(o),VS(o,ed(o,0,sr.textEnd))}(a);l>=0;l=VS(a,l))xn(o,LS(a),!0)}function _i(o,a,l,u){const f=ge(),g=xt(),_=Qi(2);g.firstUpdatePass&&oa(g,o,_,u),a!==wt&&Xr(f,_,a)&&bE(g,g.data[Ir()],f,f[11],o,f[_+1]=function wE(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=xe(js(o)))),o}(a,l),u,_)}function I_(o,a){return a>=o.expandoStartIndex}function oa(o,a,l,u){const f=o.data;if(null===f[l+1]){const g=f[Ir()],_=I_(o,l);EE(g,u)&&null===a&&!_&&(a=!1),a=function wF(o,a,l,u){const f=function Pa(o){const a=ut.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let g=u?a.residualClasses:a.residualStyles;if(null===f)0===(u?a.classBindings:a.styleBindings)&&(l=nd(l=Xa(null,o,a,l,u),a.attrs,u),g=null);else{const _=a.directiveStylingLast;if(-1===_||o[_]!==f)if(l=Xa(f,o,a,l,u),null===g){let b=function $S(o,a,l){const u=l?a.classBindings:a.styleBindings;if(0!==Io(u))return o[ms(u)]}(o,a,u);void 0!==b&&Array.isArray(b)&&(b=Xa(null,o,a,b[1],u),b=nd(b,a.attrs,u),function yE(o,a,l,u){o[ms(l?a.classBindings:a.styleBindings)]=u}(o,a,u,b))}else g=function WS(o,a,l){let u;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)u=nd(u,o[g].hostAttrs,l);return nd(u,a.attrs,l)}(o,a,u)}return void 0!==g&&(u?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,u),function cp(o,a,l,u,f,g){let _=g?a.classBindings:a.styleBindings,y=ms(_),b=Io(_);o[u]=l;let I,D=!1;if(Array.isArray(l)){const A=l;I=A[1],(null===I||Yr(A,I)>0)&&(D=!0)}else I=l;if(f)if(0!==b){const R=ms(o[y+1]);o[u+1]=jf(R,y),0!==R&&(o[R+1]=Km(o[R+1],u)),o[y+1]=function mI(o,a){return 131071&o|a<<17}(o[y+1],u)}else o[u+1]=jf(y,0),0!==y&&(o[y+1]=Km(o[y+1],u)),y=u;else o[u+1]=jf(b,0),0===y?y=u:o[b+1]=Km(o[b+1],u),b=u;D&&(o[u+1]=qm(o[u+1])),D_(o,I,u,!0),D_(o,I,u,!1),function Ja(o,a,l,u,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&Yr(g,a)>=0&&(l[u+1]=Ym(l[u+1]))}(a,I,o,u,g),_=jf(y,b),g?a.classBindings=_:a.styleBindings=_}(f,g,a,l,_,u)}}function Xa(o,a,l,u,f){let g=null;const _=l.directiveEnd;let y=l.directiveStylingLast;for(-1===y?y=l.directiveStart:y++;y<_&&(g=a[y],u=nd(u,g.hostAttrs,f),g!==o);)y++;return null!==o&&(l.directiveStylingLast=y),u}function nd(o,a,l){const u=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const _=a[g];"number"==typeof _?f=_:f===u&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),xn(o,_,!!l||a[++g]))}return void 0===o?null:o}function bE(o,a,l,u,f,g,_,y){if(!(3&a.type))return;const b=o.data,D=b[y+1];dp(function nw(o){return 1==(1&o)}(D)?S_(b,a,l,f,Io(D),_):void 0)||(dp(g)||function tw(o){return 2==(2&o)}(D)&&(g=S_(b,null,l,f,y,_)),function uI(o,a,l,u,f){const g=It(o);if(a)f?g?o.addClass(l,u):l.classList.add(u):g?o.removeClass(l,u):l.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:To.DashCase;if(null==f)g?o.removeStyle(l,u,_):l.style.removeProperty(u);else{const y="string"==typeof f&&f.endsWith("!important");y&&(f=f.slice(0,-10),_|=To.Important),g?o.setStyle(l,u,f,_):l.style.setProperty(u,f,y?"important":"")}}}(u,_,mo(Ir(),l),f,g))}function S_(o,a,l,u,f,g){const _=null===a;let y;for(;f>0;){const b=o[f],D=Array.isArray(b),I=D?b[1]:b,A=null===I;let R=l[f+1];R===wt&&(R=A?$e:void 0);let G=A?kl(R,u):I===u?R:void 0;if(D&&!dp(G)&&(G=kl(b,u)),dp(G)&&(y=G,_))return y;const se=o[f+1];f=_?ms(se):Io(se)}if(null!==a){let b=g?a.residualClasses:a.residualStyles;null!=b&&(y=kl(b,u))}return y}function dp(o){return void 0!==o}function EE(o,a){return 0!=(o.flags&(a?16:32))}function N_(o,a=""){const l=ge(),u=xt(),f=o+20,g=u.firstCreatePass?Wl(u,f,1,a,null):u.data[f],_=l[f]=ta(l[11],a);Lf(u,l,_,g),hi(g,!1)}function rd(o){return nc("",o,""),rd}function nc(o,a,l){const u=ge(),f=zu(u,o,a,l);return f!==wt&&function So(o,a,l){const u=mo(a,o);jl(o[11],u,l)}(u,Ir(),f),nc}function fp(o,a,l){const u=ge();return Xr(u,ka(),a)&&Pi(xt(),cn(),u,o,a,u[11],l,!0),fp}const rc=void 0;var SF=["en",[["a","p"],["AM","PM"],rc],[["AM","PM"],rc,rc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rc,"{1} 'at' {0}",rc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function IF(o){const l=Math.floor(Math.abs(o)),u=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let ic={};function LE(o){const a=function AF(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=lN(a);if(l)return l;const u=a.split("-")[0];if(l=lN(u),l)return l;if("en"===u)return SF;throw new Error(`Missing locale data for the locale "${o}".`)}function aN(o){return LE(o)[st.PluralCase]}function lN(o){return o in ic||(ic[o]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[o]),ic[o]}var st=(()=>((st=st||{})[st.LocaleId=0]="LocaleId",st[st.DayPeriodsFormat=1]="DayPeriodsFormat",st[st.DayPeriodsStandalone=2]="DayPeriodsStandalone",st[st.DaysFormat=3]="DaysFormat",st[st.DaysStandalone=4]="DaysStandalone",st[st.MonthsFormat=5]="MonthsFormat",st[st.MonthsStandalone=6]="MonthsStandalone",st[st.Eras=7]="Eras",st[st.FirstDayOfWeek=8]="FirstDayOfWeek",st[st.WeekendRange=9]="WeekendRange",st[st.DateFormat=10]="DateFormat",st[st.TimeFormat=11]="TimeFormat",st[st.DateTimeFormat=12]="DateTimeFormat",st[st.NumberSymbols=13]="NumberSymbols",st[st.NumberFormats=14]="NumberFormats",st[st.CurrencyCode=15]="CurrencyCode",st[st.CurrencySymbol=16]="CurrencySymbol",st[st.CurrencyName=17]="CurrencyName",st[st.Currencies=18]="Currencies",st[st.Directionality=19]="Directionality",st[st.PluralCase=20]="PluralCase",st[st.ExtraData=21]="ExtraData",st))();const MF=["zero","one","two","few","many"],R_="en-US",k_={marker:"element"},P_={marker:"ICU"};var Ln=(()=>((Ln=Ln||{})[Ln.SHIFT=2]="SHIFT",Ln[Ln.APPEND_EAGERLY=1]="APPEND_EAGERLY",Ln[Ln.COMMENT=2]="COMMENT",Ln))();let F_=R_;function uN(o,a,l){const u=a.insertBeforeIndex,f=Array.isArray(u)?u[0]:u;return null===f?Ka(o,0,l):ln(l[f])}function dN(o,a,l,u,f){const g=a.insertBeforeIndex;if(Array.isArray(g)){let _=u,y=null;if(3&a.type||(y=_,_=f),null!==_&&0==(2&a.flags))for(let b=1;b<g.length;b++)yr(o,_,l[g[b]],y,!1)}}function BE(o,a){if(o.push(a),o.length>1)for(let l=o.length-2;l>=0;l--){const u=o[l];hN(u)||kF(u,a)&&null===PF(u)&&FF(u,a.index)}}function hN(o){return!(64&o.type)}function kF(o,a){return hN(a)||o.index>a.index}function PF(o){const a=o.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function FF(o,a){const l=o.insertBeforeIndex;Array.isArray(l)?l[0]=a:(Ff(uN,dN),o.insertBeforeIndex=a)}function sc(o,a){const l=o.data[a];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function BF(o,a,l){const u=r_(o,l,64,null,null);return BE(a,u),u}function L_(o,a){const l=a[o.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function fN(o){return o>>>17}function pN(o){return(131070&o)>>>1}let oc=0,id=0;function V_(o,a,l,u){const f=l[11];let _,g=null;for(let y=0;y<a.length;y++){const b=a[y];if("string"==typeof b){const D=a[++y];null===l[D]&&(l[D]=ta(f,b))}else if("number"==typeof b)switch(1&b){case 0:const D=fN(b);let I,A;if(null===g&&(g=D,_=gs(f,u)),D===g?(I=u,A=_):(I=null,A=ln(l[D])),null!==A){const Ce=pN(b);yr(f,A,l[Ce],I,!1);const Be=sc(o,Ce);if(null!==Be&&"object"==typeof Be){const ce=L_(Be,l);null!==ce&&V_(o,Be.create[ce],l,l[Be.anchorIdx])}}break;case 1:const G=a[++y],se=a[++y];Bu(f,mo(b>>>1,l),null,null,G,se,null)}else switch(b){case P_:const D=a[++y],I=a[++y];null===l[I]&&_r(l[I]=iI(f,D),l);break;case k_:const A=a[++y],R=a[++y];null===l[R]&&_r(l[R]=Pf(f,A,null),l)}}}function B_(o,a,l,u,f){for(let g=0;g<l.length;g++){const _=l[g],y=l[++g];if(_&f){let b="";for(let D=g+1;D<=g+y;D++){const I=l[D];if("string"==typeof I)b+=I;else if("number"==typeof I)if(I<0)b+=Z(a[u-I]);else{const A=I>>>2;switch(3&I){case 1:const R=l[++D],G=l[++D],se=o.data[A];"string"==typeof se?Bu(a[11],a[A],null,se,R,b,G):Pi(o,se,a,R,b,a[11],G,!1);break;case 0:const Ce=a[A];null!==Ce&&jl(a[11],Ce,b);break;case 2:yN(o,sc(o,A),a,b);break;case 3:Ks(o,sc(o,A),u,a)}}}}else{const b=l[g+1];if(b>0&&3==(3&b)){const I=sc(o,b>>>2);a[I.currentCaseLViewIndex]<0&&Ks(o,I,u,a)}}g+=y}}function Ks(o,a,l,u){let f=u[a.currentCaseLViewIndex];if(null!==f){let g=oc;f<0&&(f=u[a.currentCaseLViewIndex]=~f,g=-1),B_(o,u,a.update[f],l,g)}}function yN(o,a,l,u){const f=function vN(o,a){let l=o.cases.indexOf(a);if(-1===l)switch(o.type){case 1:{const u=function xF(o,a){const l=aN(a)(parseInt(o,10)),u=MF[l];return void 0!==u?u:"other"}(a,function RF(){return F_}());l=o.cases.indexOf(u),-1===l&&"other"!==u&&(l=o.cases.indexOf("other"));break}case 0:l=o.cases.indexOf("other")}return-1===l?null:l}(a,u);if(L_(a,l)!==f&&(UE(o,a,l),l[a.currentCaseLViewIndex]=null===f?null:~f,null!==f)){const _=l[a.anchorIdx];_&&V_(o,a.create[f],l,_)}}function UE(o,a,l){let u=L_(a,l);if(null!==u){const f=a.remove[u];for(let g=0;g<f.length;g++){const _=f[g];if(_>0){const y=mo(_,l);null!==y&&Ou(l[11],y)}else UE(o,sc(o,~_),l)}}}function bN(){const o=[];let l,u,a=-1;function g(y,b){a=0;const D=L_(y,b);u=null!==D?y.remove[D]:$e}function _(){if(a<u.length){const y=u[a++];return y>0?l[y]:(o.push(a,u),g(l[1].data[~y],l),_())}return 0===o.length?null:(u=o.pop(),a=o.pop(),_())}return function f(y,b){for(l=b;o.length;)o.pop();return g(y.value,b),_}}const pp=/\ufffd(\d+):?\d*\ufffd/gi,HE=/\ufffd(\d+)\ufffd/,U_=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,od=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Wn=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,j_=/\uE500/g;function H_(o,a,l,u,f,g,_){const y=Lu(o,u,1,null);let b=y<<Ln.SHIFT,D=Wo();a===D&&(D=null),null===D&&(b|=Ln.APPEND_EAGERLY),_&&(b|=Ln.COMMENT,function kf(o){void 0===Vb&&(Vb=o())}(bN)),f.push(b,null===g?"":g);const I=r_(o,y,_?32:1,null===g?"":g,null);BE(l,I);const A=I.index;return hi(I,!1),null!==D&&a!==D&&function VF(o,a){let l=o.insertBeforeIndex;null===l?(Ff(uN,dN),l=o.insertBeforeIndex=[null,a]):(function Ve(o,a,l){o!=a&&lt(l,o,a,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(a))}(D,A),I}function $_(o,a,l,u,f,g,_){const y=_.match(pp),b=H_(o,a,l,g,u,y?null:_,!1);y&&tl(f,_,b.index,null,0,null)}function tl(o,a,l,u,f,g){const _=o.length,y=_+1;o.push(null,null);const b=_+2,D=a.split(pp);let I=0;for(let A=0;A<D.length;A++){const R=D[A];if(1&A){const G=f+parseInt(R,10);o.push(-1-G),I|=zE(G)}else""!==R&&o.push(R)}return o.push(l<<2|(u?1:0)),u&&o.push(u,g),o[_]=I,o[y]=o.length-b,I}function zE(o){return 1<<Math.min(o,31)}function CN(o){let a,g,l="",u=0,f=!1;for(;null!==(a=od.exec(o));)f?a[0]===`\ufffd/*${g}\ufffd`&&(u=a.index,f=!1):(l+=o.substring(u,a.index+a[0].length),g=a[1],f=!0);return l+=o.substr(u),l}function DN(o,a,l,u,f,g){let _=0;const y={type:f.type,currentCaseLViewIndex:Lu(o,a,1,null),anchorIdx:g,cases:[],create:[],remove:[],update:[]};(function YE(o,a,l){o.push(zE(a.mainBinding),2,-1-a.mainBinding,l<<2|2)})(l,f,g),function LF(o,a,l){const u=o.data[a];null===u?o.data[a]=l:u.value=l}(o,g,y);const b=f.values;for(let D=0;D<b.length;D++){const I=b[D],A=[];for(let R=0;R<I.length;R++){const G=I[R];if("string"!=typeof G){const se=A.push(G)-1;I[R]=`\x3c!--\ufffd${se}\ufffd--\x3e`}}_=$F(o,y,a,l,u,f.cases[D],I.join(""),A)|_}_&&function W_(o,a,l){o.push(a,1,l<<2|3)}(l,_,g)}function HF(o){const a=[],l=[];let u=1,f=0;const g=qE(o=o.replace(U_,function(_,y,b){return u="select"===b?0:1,f=parseInt(y.substr(1),10),""}));for(let _=0;_<g.length;){let y=g[_++].trim();1===u&&(y=y.replace(/\s*(?:=)?(\w+)\s*/,"$1")),y.length&&a.push(y);const b=qE(g[_++]);a.length>l.length&&l.push(b)}return{type:u,mainBinding:f,cases:a,values:l}}function qE(o){if(!o)return[];let a=0;const l=[],u=[],f=/[{}]/g;let g;for(f.lastIndex=0;g=f.exec(o);){const y=g.index;if("}"==g[0]){if(l.pop(),0==l.length){const b=o.substring(a,y);U_.test(b)?u.push(HF(b)):u.push(b),a=y+1}}else{if(0==l.length){const b=o.substring(a,y);u.push(b),a=y+1}l.push("{")}}const _=o.substring(a);return u.push(_),u}function $F(o,a,l,u,f,g,_,y){const b=[],D=[],I=[];a.cases.push(g),a.create.push(b),a.remove.push(D),a.update.push(I);const R=function Ef(o){const a=new Nm(o);return function _b(){try{return!!(new window.DOMParser).parseFromString(Eo(""),"text/html")}catch(o){return!1}}()?new mb(a):a}(Ho()).getInertBodyElement(_),G=function Af(o){return"content"in o&&function UT(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}(R)||R;return G?TN(o,a,l,u,b,D,I,G,f,y,0):0}function TN(o,a,l,u,f,g,_,y,b,D,I){let A=0,R=y.firstChild;for(;R;){const G=Lu(o,l,1,null);switch(R.nodeType){case Node.ELEMENT_NODE:const se=R,Ce=se.tagName.toLowerCase();if($a.hasOwnProperty(Ce)){ad(f,k_,Ce,b,G),o.data[G]=Ce;const Je=se.attributes;for(let Pt=0;Pt<Je.length;Pt++){const $t=Je.item(Pt),rs=$t.name.toLowerCase();$t.value.match(pp)?FT.hasOwnProperty(rs)&&tl(_,$t.value,G,$t.name,0,Nf[rs]?Df:yb[rs]?Mm:null):ZE(f,G,$t)}A=TN(o,a,l,u,f,g,_,R,G,D,I+1)|A,KE(g,G,I)}break;case Node.TEXT_NODE:const Oe=R.textContent||"",Be=Oe.match(pp);ad(f,null,Be?"":Oe,b,G),KE(g,G,I),Be&&(A=tl(_,Oe,G,null,0,null)|A);break;case Node.COMMENT_NODE:const ce=HE.exec(R.textContent||"");if(ce){const Pt=D[parseInt(ce[1],10)];ad(f,P_,"",b,G),DN(o,l,u,b,Pt,G),IN(g,G,I)}}R=R.nextSibling}return A}function KE(o,a,l){0===l&&o.push(a)}function IN(o,a,l){0===l&&(o.push(~a),o.push(a))}function ad(o,a,l,u,f){null!==a&&o.push(a),o.push(l,f,function UF(o,a,l){return o|a<<17|l<<1}(0,u,f))}function ZE(o,a,l){o.push(a<<1|1,l.name,l.value)}function W(o,a,l=-1){const u=xt(),f=ge(),g=20+o,_=Yi(u.consts,a),y=Wo();u.firstCreatePass&&function gp(o,a,l,u,f,g){const _=Wo(),y=[],b=[],D=[[]];f=function GF(o,a){if(function jF(o){return-1===o}(a))return CN(o);{const l=o.indexOf(`:${a}\ufffd`)+2+a.toString().length,u=o.search(new RegExp(`\ufffd\\/\\*\\d+:${a}\ufffd`));return CN(o.substring(l,u))}}(f,g);const I=function G_(o){return o.replace(j_," ")}(f).split(Wn);for(let A=0;A<I.length;A++){let R=I[A];if(0==(1&A)){const G=qE(R);for(let se=0;se<G.length;se++){let Ce=G[se];if(0==(1&se)){const Oe=Ce;""!==Oe&&$_(o,_,D[0],y,b,l,Oe)}else{const Oe=Ce;if("object"!=typeof Oe)throw new Error(`Unable to parse ICU expression in "${f}" message.`);DN(o,l,b,a,Oe,H_(o,_,D[0],l,y,"",!0).index)}}}else{const G=47===R.charCodeAt(0),Ce=(R.charCodeAt(G?1:0),20+Number.parseInt(R.substring(G?2:1)));if(G)D.shift(),hi(Wo(),!1);else{const Oe=BF(o,D[0],Ce);D.unshift([]),hi(Oe,!0)}}}o.data[u]={create:y,update:b}}(u,null===y?0:y.index,f,g,_,l);const b=u.data[g],I=Wb(u,y===f[6]?null:y,f);(function ac(o,a,l,u){const f=o[11];for(let g=0;g<a.length;g++){const _=a[g++],y=a[g],b=(_&Ln.COMMENT)===Ln.COMMENT,D=(_&Ln.APPEND_EAGERLY)===Ln.APPEND_EAGERLY,I=_>>>Ln.SHIFT;let A=o[I];null===A&&(A=o[I]=b?f.createComment(y):ta(f,y)),D&&null!==l&&yr(f,l,A,u,!1)}})(f,b.create,I,y&&8&y.type?f[y.index]:null),su(!0)}function Ys(o,a,l){W(o,a,l),function rn(){su(!1)}()}function lc(o){return function mN(o){o&&(oc|=1<<Math.min(id,31)),id++}(Xr(ge(),ka(),o)),lc}function MN(o){!function _N(o,a,l){if(id>0){const u=o.data[l];B_(o,a,Array.isArray(u)?u:u.update,function Zi(){return ut.lFrame.bindingIndex}()-id-1,oc)}oc=0,id=0}(xt(),ge(),o+20)}function K_(o,a,l,u,f){if(o=fe(o),Array.isArray(o))for(let g=0;g<o.length;g++)K_(o[g],a,l,u,f);else{const g=xt(),_=ge();let y=Gu(o)?o:fe(o.provide),b=Yf(o);const D=pn(),I=1048575&D.providerIndexes,A=D.directiveStart,R=D.providerIndexes>>20;if(Gu(o)||!o.multi){const G=new An(b,f,ap),se=Z_(y,a,f?I:I+R,A);-1===se?(xl(Qt(D,_),g,y),Y_(g,o,a.length),a.push(y),D.directiveStart++,D.directiveEnd++,f&&(D.providerIndexes+=1048576),l.push(G),_.push(G)):(l[se]=G,_[se]=G)}else{const G=Z_(y,a,I+R,A),se=Z_(y,a,I,I+R),Ce=G>=0&&l[G],Oe=se>=0&&l[se];if(f&&!Oe||!f&&!Ce){xl(Qt(D,_),g,y);const Be=function ZF(o,a,l,u,f){const g=new An(o,l,ap);return g.multi=[],g.index=a,g.componentProviders=0,JE(g,f,u&&!l),g}(f?YF:ON,l.length,f,u,b);!f&&Oe&&(l[se].providerFactory=Be),Y_(g,o,a.length,0),a.push(y),D.directiveStart++,D.directiveEnd++,f&&(D.providerIndexes+=1048576),l.push(Be),_.push(Be)}else Y_(g,o,G>-1?G:se,JE(l[f?se:G],b,!f&&u));!f&&u&&Oe&&l[se].componentProviders++}}}function Y_(o,a,l,u){const f=Gu(a),g=function JI(o){return!!o.useClass}(a);if(f||g){const b=(g?fe(a.useClass):a).prototype.ngOnDestroy;if(b){const D=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const I=D.indexOf(l);-1===I?D.push(l,[u,b]):D[I+1].push(u,b)}else D.push(l,b)}}}function JE(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function Z_(o,a,l,u){for(let f=l;f<u;f++)if(a[f]===o)return f;return-1}function ON(o,a,l,u){return XE(this.multi,[])}function YF(o,a,l,u){const f=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,y=bo(l,l[1],this.providerFactory.index,u);g=y.slice(0,_),XE(f,g);for(let b=_;b<y.length;b++)g.push(y[b])}else g=[],XE(f,g);return g}function XE(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function eC(o,a=[]){return l=>{l.providersResolver=(u,f)=>function q_(o,a,l){const u=xt();if(u.firstCreatePass){const f=Ai(o);K_(l,u.data,u.blueprint,f,!0),K_(a,u.data,u.blueprint,f,!1)}}(u,f?f(o):o,a)}}class RN{}class B{resolveComponentFactory(a){throw function JF(o){const a=Error(`No component factory found for ${xe(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let yi=(()=>{class o{}return o.NULL=new B,o})();function tC(){return cc(pn(),ge())}function cc(o,a){return new cd(Hn(o,a))}let cd=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=tC,o})();function or(o){return o instanceof cd?o.nativeElement:o}class ud{}let Q_=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function PN(){const o=ge(),l=Tr(pn().index,o);return function kN(o){return o[11]}(Nn(l)?l:o)}(),o})(),FN=(()=>{class o{}return o.\u0275prov=Bn({token:o,providedIn:"root",factory:()=>null}),o})();class J_{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const nC=new J_("13.3.11"),X_={};function mp(o,a,l,u,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&u.push(ln(g)),Ni(g))for(let y=10;y<g.length;y++){const b=g[y],D=b[1].firstChild;null!==D&&mp(b[1],b,D,u)}const _=l.type;if(8&_)mp(o,a,l.child,u);else if(32&_){const y=Vm(l,a);let b;for(;b=y();)u.push(b)}else if(16&_){const y=zb(a,l);if(Array.isArray(y))u.push(...y);else{const b=Nu(a[16]);mp(b[1],b,y,u,!0)}}l=f?l.projectionNext:l.next}return u}class dd{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return mp(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Ni(a)){const l=a[8],u=l?l.indexOf(this):-1;u>-1&&(Um(a,u),_u(l,u))}this._attachedToViewContainer=!1}Hb(this._lView[1],this._lView)}onDestroy(a){mw(this._lView[1],this._lView,null,a)}markForCheck(){a_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function l_(o,a,l){const u=a[10];u.begin&&u.begin();try{Vu(o,a,o.template,l)}catch(f){throw YI(a,f),f}finally{u.end&&u.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ub(o,a){Gl(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new De(902,"");this._appRef=a}}class ei extends dd{constructor(a){super(a),this._view=a}detectChanges(){Iw(this._view)}checkNoChanges(){}get context(){return null}}class hd extends yi{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=er(a);return new uc(l,this.ngModule)}}function ey(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}class uc extends RN{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function gI(o){return o.map(pI).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return ey(this.componentDef.inputs)}get outputs(){return ey(this.componentDef.outputs)}create(a,l,u,f){const g=(f=f||this.ngModule)?function ty(o,a){return{get:(l,u,f)=>{const g=o.get(l,X_,f);return g!==X_||u===X_?g:a.get(l,u,f)}}}(a,f.injector):a,_=g.get(ud,Tl),y=g.get(FN,null),b=_.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",I=u?function gw(o,a,l){if(It(o))return o.selectRootElement(a,l===k.ShadowDom);let u="string"==typeof a?o.querySelector(a):a;return u.textContent="",u}(b,u,this.componentDef.encapsulation):Pf(_.createRenderer(null,this.componentDef),D,function LN(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(D)),A=this.componentDef.onPush?576:528,R=function Gw(o,a){return{components:[],scheduler:o||Fb,clean:jP,playerHandler:a||null,flags:0}}(),G=i_(0,null,null,1,0,null,null,null,null,null),se=Fu(null,G,R,A,null,null,_,b,y,g);let Ce,Oe;Nl(se);try{const Be=function ep(o,a,l,u,f,g){const _=l[1];l[20]=o;const b=Wl(_,20,2,"#host",null),D=b.mergedAttrs=a.hostAttrs;null!==D&&(qf(b,D,!0),null!==o&&(La(f,o,D),null!==b.classes&&Vf(f,o,b.classes),null!==b.styles&&Hl(f,o,b.styles)));const I=u.createRenderer(o,a),A=Fu(l,SI(a),null,a.onPush?64:16,l[20],b,u,I,g||null,null);return _.firstCreatePass&&(xl(Qt(b,l),_,a.type),ww(_,b),Ew(b,l.length,1)),zf(l,A),l[20]=A}(I,this.componentDef,se,_,b);if(I)if(u)La(b,I,["ng-version",nC.full]);else{const{attrs:ce,classes:Je}=function Pu(o){const a=[],l=[];let u=1,f=2;for(;u<o.length;){let g=o[u];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++u]):8===f&&l.push(g);else{if(!es(f))break;f=g}u++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);ce&&La(b,I,ce),Je&&Je.length>0&&Vf(b,I,Je.join(" "))}if(Oe=_o(G,20),void 0!==l){const ce=Oe.projection=[];for(let Je=0;Je<this.ngContentSelectors.length;Je++){const Pt=l[Je];ce.push(null!=Pt?Array.from(Pt):null)}}Ce=function jw(o,a,l,u,f){const g=l[1],_=function RI(o,a,l){const u=pn();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Cw(o,u,a,Lu(o,a,1,null),l));const f=bo(a,o,u.directiveStart,u);_r(f,a);const g=Hn(u,a);return g&&_r(g,a),f}(g,l,a);if(u.components.push(_),o[8]=_,f&&f.forEach(b=>b(_,a)),a.contentQueries){const b=pn();a.contentQueries(1,_,b.directiveStart)}const y=pn();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(yo(y.index),vw(l[1],y,0,y.directiveStart,y.directiveEnd,a),bw(a,_)),_}(Be,this.componentDef,se,R,[Hw]),Wf(G,se,null)}finally{qo()}return new VN(this.componentType,Ce,cc(Oe,se),se,Oe)}}class VN extends class QF{}{constructor(a,l,u,f,g){super(),this.location=u,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new ei(f),this.componentType=a}get injector(){return new wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class dc{}class iC{}const hc=new Map;class oC extends dc{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new hd(this);const u=di(a);this._bootstrapComponents=Do(u.bootstrap),this._r3Injector=Uu(a,l,[{provide:dc,useValue:this},{provide:yi,useValue:this.componentFactoryResolver}],xe(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=$s.THROW_IF_NOT_FOUND,u=it.Default){return a===$s||a===dc||a===Mw?this:this._r3Injector.get(a,l,u)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class iy extends iC{constructor(a){super(),this.moduleType=a,null!==di(a)&&function yp(o){const a=new Set;!function l(u){const f=di(u,!0),g=f.id;null!==g&&(function ry(o,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${o} - ${xe(a)} vs ${xe(a.name)}`)}(g,hc.get(g),u),hc.set(g,u));const _=Do(f.imports);for(const y of _)a.has(y)||(a.add(y),l(y))}(o)}(a)}create(a){return new oC(this.moduleType,a)}}function vp(o,a,l,u){return function ay(o,a,l,u,f,g){const _=a+l;return Xr(o,_,f)?_s(o,_+1,g?u.call(g,f):u(f)):rl(o,_+1)}(ge(),pr(),o,a,l,u)}function sy(o,a,l,u,f){return ly(ge(),pr(),o,a,l,u,f)}function bp(o,a,l,u,f,g){return function wp(o,a,l,u,f,g,_,y){const b=a+l;return function sp(o,a,l,u,f){const g=Yl(o,a,l,u);return Xr(o,a+2,f)||g}(o,b,f,g,_)?_s(o,b+3,y?u.call(y,f,g,_):u(f,g,_)):rl(o,b+3)}(ge(),pr(),o,a,l,u,f,g)}function rl(o,a){const l=o[a];return l===wt?void 0:l}function ly(o,a,l,u,f,g,_){const y=a+l;return Yl(o,y,f,g)?_s(o,y+2,_?u.call(_,f,g):u(f,g)):rl(o,y+2)}function hC(o,a){const l=xt();let u;const f=o+20;l.firstCreatePass?(u=function Ep(o,a){if(a)for(let l=a.length-1;l>=0;l--){const u=a[l];if(o===u.name)return u}}(a,l.pipeRegistry),l.data[f]=u,u.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,u.onDestroy)):u=l.data[f];const g=u.factory||(u.factory=fr(u.type)),_=et(ap);try{const y=zr(!1),b=g();return zr(y),function eF(o,a,l,u){l>=o.data.length&&(o.data[l]=null,o.blueprint[l]=null),a[l]=u}(l,ge(),f,b),b}finally{et(_)}}function Cp(o,a,l,u){const f=o+20,g=ge(),_=ls(g,f);return function fc(o,a){return o[1].data[a].pure}(g,f)?ly(g,pr(),a,_.transform,l,u,_):_.transform(l,u)}function dy(o){return a=>{setTimeout(o,void 0,a)}}const Qs=class Dp extends oe.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,u){var f,g,_;let y=a,b=l||(()=>null),D=u;if(a&&"object"==typeof a){const A=a;y=null===(f=A.next)||void 0===f?void 0:f.bind(A),b=null===(g=A.error)||void 0===g?void 0:g.bind(A),D=null===(_=A.complete)||void 0===_?void 0:_.bind(A)}this.__isAsync&&(b=dy(b),y&&(y=dy(y)),D&&(D=dy(D)));const I=super.subscribe({next:y,error:b,complete:D});return a instanceof pe.w0&&a.add(I),I}};function $N(){return this._results[Kl()]()}class hy{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Kl(),u=hy.prototype;u[l]||(u[l]=$N)}get changes(){return this._changes||(this._changes=new Qs)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const u=this;u.dirty=!1;const f=mr(a);(this._changesDetected=!function mu(o,a,l){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++){let f=o[u],g=a[u];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(u._results,f,l))&&(u._results=f,u.length=f.length,u.last=f[this.length-1],u.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let pd=(()=>{class o{}return o.__NG_ELEMENT_ID__=qN,o})();const WN=pd,zN=class extends WN{constructor(a,l,u){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=u}createEmbeddedView(a){const l=this._declarationTContainer.tViews,u=Fu(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(u[19]=g.createEmbeddedView(l)),Wf(l,u,a),new dd(u)}};function qN(){return Tp(pn(),ge())}function Tp(o,a){return 4&o.type?new zN(a,o,cc(o,a)):null}let Ip=(()=>{class o{}return o.__NG_ELEMENT_ID__=Sp,o})();function Sp(){return gC(pn(),ge())}const pC=Ip,fy=class extends pC{constructor(a,l,u){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=u}get element(){return cc(this._hostTNode,this._hostLView)}get injector(){return new wo(this._hostTNode,this._hostLView)}get parentInjector(){const a=Cn(this._hostTNode,this._hostLView);if(ir(a)){const l=Fs(a,this._hostLView),u=cs(a);return new wo(l[1].data[u+8],l)}return new wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=Np(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,u){const f=a.createEmbeddedView(l||{});return this.insert(f,u),f}createComponent(a,l,u,f,g){const _=a&&!function Kr(o){return"function"==typeof o}(a);let y;if(_)y=l;else{const A=l||{};y=A.index,u=A.injector,f=A.projectableNodes,g=A.ngModuleRef}const b=_?a:new uc(er(a)),D=u||this.parentInjector;if(!g&&null==b.ngModule){const R=(_?D:this.parentInjector).get(dc,null);R&&(g=R)}const I=b.create(D,f,void 0,g);return this.insert(I.hostView,y),I}insert(a,l){const u=a._lView,f=u[1];if(function Uh(o){return Ni(o[3])}(u)){const I=this.indexOf(a);if(-1!==I)this.detach(I);else{const A=u[3],R=new fy(A,A[6],A[3]);R.detach(R.indexOf(a))}}const g=this._adjustIndex(l),_=this._lContainer;!function oI(o,a,l,u){const f=10+u,g=l.length;u>0&&(l[f-1][4]=a),u<g-10?(a[4]=l[f],ym(l,10+u,a)):(l.push(a),a[4]=null),a[3]=l;const _=a[17];null!==_&&l!==_&&function aI(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(_,a);const y=a[19];null!==y&&y.insertView(o),a[2]|=128}(f,u,_,g);const y=Xi(g,_),b=u[11],D=gs(b,_[7]);return null!==D&&function sI(o,a,l,u,f,g){u[0]=f,u[6]=a,Gl(o,u,l,1,f,g)}(f,_[6],b,u,D,y),a.attachToViewContainerRef(),ym(py(_),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=Np(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),u=Um(this._lContainer,l);u&&(_u(py(this._lContainer),l),Hb(u[1],u))}detach(a){const l=this._adjustIndex(a,-1),u=Um(this._lContainer,l);return u&&null!=_u(py(this._lContainer),l)?new dd(u):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function Np(o){return o[8]}function py(o){return o[8]||(o[8]=[])}function gC(o,a){let l;const u=a[o.index];if(Ni(u))l=u;else{let f;if(8&o.type)f=ln(u);else{const g=a[11];f=g.createComment("");const _=Hn(o,a);yr(g,gs(g,_),f,function qa(o,a){return It(o)?o.nextSibling(a):a.nextSibling}(g,_),!1)}a[o.index]=l=Dw(u,a,f,o),zf(a,l)}return new fy(l,o,a)}class Ap{constructor(a){this.queryList=a,this.matches=null}clone(){return new Ap(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mp{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const u=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<u;g++){const _=l.getByIndex(g);f.push(this.queries[_.indexInDeclarationView].clone())}return new Mp(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==JN(a,l).matches&&this.queries[l].setDirty()}}class gy{constructor(a,l,u=null){this.predicate=a,this.flags=l,this.read=u}}class _C{constructor(a=[]){this.queries=a}elementStart(a,l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let u=0;u<this.length;u++){const f=null!==l?l.length:0,g=this.getByIndex(u).embeddedTView(a,f);g&&(g.indexInDeclarationView=u,null!==l?l.push(g):l=[g])}return null!==l?new _C(l):null}template(a,l){for(let u=0;u<this.queries.length;u++)this.queries[u].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class my{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new my(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let u=a.parent;for(;null!==u&&8&u.type&&u.index!==l;)u=u.parent;return l===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const u=this.metadata.predicate;if(Array.isArray(u))for(let f=0;f<u.length;f++){const g=u[f];this.matchTNodeWithReadOption(a,l,eL(l,g)),this.matchTNodeWithReadOption(a,l,Zo(l,a,g,!1,!1))}else u===pd?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Zo(l,a,u,!1,!1))}matchTNodeWithReadOption(a,l,u){if(null!==u){const f=this.metadata.read;if(null!==f)if(f===cd||f===Ip||f===pd&&4&l.type)this.addMatch(l.index,-2);else{const g=Zo(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,u)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function eL(o,a){const l=o.localNames;if(null!==l)for(let u=0;u<l.length;u+=2)if(l[u]===a)return l[u+1];return null}function _y(o,a,l,u){return-1===l?function tL(o,a){return 11&o.type?cc(o,a):4&o.type?Tp(o,a):null}(a,o):-2===l?function nL(o,a,l){return l===cd?cc(a,o):l===pd?Tp(a,o):l===Ip?gC(a,o):void 0}(o,a,u):bo(o,o[1],l,a)}function yC(o,a,l,u){const f=a[19].queries[u];if(null===f.matches){const g=o.data,_=l.matches,y=[];for(let b=0;b<_.length;b+=2){const D=_[b];y.push(D<0?null:_y(a,g[D],_[b+1],l.metadata.read))}f.matches=y}return f.matches}function xp(o,a,l,u){const f=o.queries.getByIndex(l),g=f.matches;if(null!==g){const _=yC(o,a,f,l);for(let y=0;y<g.length;y+=2){const b=g[y];if(b>0)u.push(_[y/2]);else{const D=g[y+1],I=a[-b];for(let A=10;A<I.length;A++){const R=I[A];R[17]===R[3]&&xp(R[1],R,D,u)}if(null!==I[9]){const A=I[9];for(let R=0;R<A.length;R++){const G=A[R];xp(G[1],G,D,u)}}}}}return u}function vC(o){const a=ge(),l=xt(),u=Mi();ou(u+1);const f=JN(l,u);if(o.dirty&&eu(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?xp(l,a,u,[]):yC(l,a,f,u);o.reset(g,or),o.notifyOnChanges()}return!0}return!1}function yy(o,a,l){const u=xt();u.firstCreatePass&&(ZN(u,new gy(o,a,l),-1),2==(2&a)&&(u.staticViewQueries=!0)),Rp(u,ge(),a)}function Op(o,a,l,u){const f=xt();if(f.firstCreatePass){const g=pn();ZN(f,new gy(a,l,u),g.index),function QN(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}Rp(f,ge(),l)}function gd(){return function rL(o,a){return o[19].queries[a].queryList}(ge(),Mi())}function Rp(o,a,l){const u=new hy(4==(4&l));mw(o,a,u,u.destroy),null===a[19]&&(a[19]=new Mp),a[19].queries.push(new Ap(u))}function ZN(o,a,l){null===o.queries&&(o.queries=new _C),o.queries.track(new my(a,l))}function JN(o,a){return o.queries.getByIndex(a)}function bC(o,a){return Tp(o,a)}function la(...o){}const Bp=new on("Application Initializer");let Ey=(()=>{class o{constructor(l){this.appInits=l,this.resolve=la,this.reject=la,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,f)=>{this.resolve=u,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(dE(g))l.push(g);else if(kS(g)){const _=new Promise((y,b)=>{g.subscribe({complete:y,error:b})});l.push(_)}}Promise.all(l).then(()=>{u()}).catch(f=>{this.reject(f)}),0===l.length&&u(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(mn(Bp,8))},o.\u0275prov=Bn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Up=new on("AppId",{providedIn:"root",factory:function kC(){return`${il()}${il()}${il()}`}});function il(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aA=new on("Platform Initializer"),lA=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),jp=new on("appBootstrapListener");let Gp=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Bn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const ws=new on("LocaleId",{providedIn:"root",factory:()=>Qr(ws,it.Optional|it.SkipSelf)||function cA(){return"undefined"!=typeof $localize&&$localize.locale||R_}()}),Cy=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class wd{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Dy=(()=>{class o{compileModuleSync(l){return new iy(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const u=this.compileModuleSync(l),g=Do(di(l).declarations).reduce((_,y)=>{const b=er(y);return b&&_.push(new uc(b)),_},[]);return new wd(u,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Bn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const hA=(()=>Promise.resolve(0))();function Ty(o){"undefined"==typeof Zone?hA.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Li{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qs(!1),this.onMicrotaskEmpty=new Qs(!1),this.onStable=new Qs(!1),this.onError=new Qs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!u&&l,f.shouldCoalesceRunChangeDetection=u,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function fA(){let o=j.requestAnimationFrame,a=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function pL(o){const a=()=>{!function sl(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(j,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Hp(o),o.isCheckStableRunning=!0,Xs(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Hp(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,u,f,g,_,y)=>{try{return Cd(o),l.invokeTask(f,g,_,y)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),ol(o)}},onInvoke:(l,u,f,g,_,y,b)=>{try{return Cd(o),l.invoke(f,g,_,y,b)}finally{o.shouldCoalesceRunChangeDetection&&a(),ol(o)}},onHasTask:(l,u,f,g)=>{l.hasTask(f,g),u===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,Hp(o),Xs(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,u,f,g)=>(l.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Li.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Li.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,u){return this._inner.run(a,l,u)}runTask(a,l,u,f){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+f,a,Ed,la,la);try{return g.runTask(_,l,u)}finally{g.cancelTask(_)}}runGuarded(a,l,u){return this._inner.runGuarded(a,l,u)}runOutsideAngular(a){return this._outer.run(a)}}const Ed={};function Xs(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Hp(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Cd(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function ol(o){o._nesting--,Xs(o)}class VC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qs,this.onMicrotaskEmpty=new Qs,this.onStable=new Qs,this.onError=new Qs}run(a,l,u){return a.apply(l,u)}runGuarded(a,l,u){return a.apply(l,u)}runOutsideAngular(a){return a()}runTask(a,l,u,f){return a.apply(l,u)}}let Iy=(()=>{class o{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Li.assertNotInAngularZone(),Ty(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ty(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,f){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),l(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,u,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,u,f){return[]}}return o.\u0275fac=function(l){return new(l||o)(mn(Li))},o.\u0275prov=Bn({token:o,factory:o.\u0275fac}),o})(),Sy=(()=>{class o{constructor(){this._applications=new Map,$p.addToWindow(this)}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){return $p.findTestabilityInTree(this,l,u)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Bn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();class BC{addToWindow(a){}findTestabilityInTree(a,l,u){return null}}function UC(o){$p=o}let $p=new BC,ca=null;const Ny=new on("AllowMultipleToken"),Dd=new on("PlatformOnDestroy");class jC{constructor(a,l){this.name=a,this.token=l}}function Ay(o,a,l=[]){const u=`Platform: ${a}`,f=new on(u);return(g=[])=>{let _=Wp();if(!_||_.injector.get(Ny,!1)){const y=[...l,...g,{provide:f,useValue:!0}];o?o(y):function gA(o){if(ca&&!ca.get(Ny,!1))throw new De(400,"");ca=o;const a=o.get(yA),l=o.get(aA,null);l&&l.forEach(u=>u())}(function _A(o=[],a){return $s.create({name:a,providers:[{provide:c_,useValue:"platform"},{provide:Dd,useValue:()=>ca=null},...o]})}(y,u))}return function mA(o){const a=Wp();if(!a)throw new De(401,"");return a}()}}function Wp(){var o;return null!==(o=null==ca?void 0:ca.get(yA))&&void 0!==o?o:null}let yA=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const y=function GC(o,a){let l;return l="noop"===o?new VC:("zone.js"===o?void 0:o)||new Li({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),b=[{provide:Li,useValue:y}];return y.run(()=>{const D=$s.create({providers:b,parent:this.injector,name:l.moduleType.name}),I=l.create(D),A=I.injector.get(Rf,null);if(!A)throw new De(402,"");return y.runOutsideAngular(()=>{const R=y.onError.subscribe({next:G=>{A.handleError(G)}});I.onDestroy(()=>{Oy(this._modules,I),R.unsubscribe()})}),function vA(o,a,l){try{const u=l();return dE(u)?u.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):u}catch(u){throw a.runOutsideAngular(()=>o.handleError(u)),u}}(A,y,()=>{const R=I.injector.get(Ey);return R.runInitializers(),R.donePromise.then(()=>(function OF(o){(function kt(o,a){null==o&&lt(a,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(F_=o.toLowerCase().replace(/_/g,"-"))}(I.injector.get(ws,R_)||R_),this._moduleDoBootstrap(I),I))})})}bootstrapModule(l,u=[]){const f=My({},u);return function gL(o,a,l){const u=new iy(l);return Promise.resolve(u)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const u=l.injector.get(xy);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>u.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new De(403,"");l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const l=this._injector.get(Dd,null);null==l||l(),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(mn($s))},o.\u0275prov=Bn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function My(o,a){return Array.isArray(a)?a.reduce(My,o):Object.assign(Object.assign({},o),a)}let xy=(()=>{class o{constructor(l,u,f,g){this._zone=l,this._injector=u,this._exceptionHandler=f,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new le.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),y=new le.y(b=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Li.assertNotInAngularZone(),Ty(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const I=this._zone.onUnstable.subscribe(()=>{Li.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{D.unsubscribe(),I.unsubscribe()}});this.isStable=function ye(...o){const a=(0,te.yG)(o),l=(0,te._6)(o,1/0),u=o;return u.length?1===u.length?(0,K.Xf)(u[0]):(0,d.J)(l)((0,X.D)(u,a)):$.E}(_,y.pipe(function je(o={}){const{connector:a=(()=>new oe.x),resetOnError:l=!0,resetOnComplete:u=!0,resetOnRefCountZero:f=!0}=o;return g=>{let _=null,y=null,b=null,D=0,I=!1,A=!1;const R=()=>{null==y||y.unsubscribe(),y=null},G=()=>{R(),_=b=null,I=A=!1},se=()=>{const Ce=_;G(),null==Ce||Ce.unsubscribe()};return(0,de.e)((Ce,Oe)=>{D++,!A&&!I&&R();const Be=b=null!=b?b:a();Oe.add(()=>{D--,0===D&&!A&&!I&&(y=_e(se,f))}),Be.subscribe(Oe),_||(_=new F.Hp({next:ce=>Be.next(ce),error:ce=>{A=!0,R(),y=_e(G,l,ce),Be.error(ce)},complete:()=>{I=!0,R(),y=_e(G,u),Be.complete()}}),(0,X.D)(Ce).subscribe(_))})(g)}}()))}bootstrap(l,u){if(!this._initStatus.done)throw new De(405,"");let f;f=l instanceof RN?l:this._injector.get(yi).resolveComponentFactory(l),this.componentTypes.push(f.componentType);const g=function pA(o){return o.isBoundToModule}(f)?void 0:this._injector.get(dc),y=f.create($s.NULL,[],u||f.selector,g),b=y.location.nativeElement,D=y.injector.get(Iy,null),I=D&&y.injector.get(Sy);return D&&I&&I.registerApplication(b,D),y.onDestroy(()=>{this.detachView(y.hostView),Oy(this.components,y),I&&I.unregisterApplication(b)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new De(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;Oy(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(jp,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(l){return new(l||o)(mn(Li),mn($s),mn(Rf),mn(Ey))},o.\u0275prov=Bn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Oy(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let Py=!0,zp=!1;function bA(){return zp=!0,Py}function Fy(){if(zp)throw new Error("Cannot enable prod mode after platform setup.");Py=!1}let Ly=(()=>{class o{}return o.__NG_ELEMENT_ID__=wA,o})();function wA(o){return function Vy(o,a,l){if(El(o)&&!l){const u=Tr(o.index,a);return new dd(u,u)}return 47&o.type?new dd(a[16],a):null}(pn(),ge(),16==(16&o))}class KC{constructor(){}supports(a){return ip(a)}create(a){return new Ad(a)}}const Hy=(o,a)=>a;class Ad{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Hy}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,u=this._removalsHead,f=0,g=null;for(;l||u;){const _=!u||l&&l.currentIndex<TA(u,f,g)?l:u,y=TA(_,f,g),b=_.currentIndex;if(_===u)f--,u=u._nextRemoved;else if(l=l._next,null==_.previousIndex)f++;else{g||(g=[]);const D=y-f,I=b-f;if(D!=I){for(let R=0;R<D;R++){const G=R<g.length?g[R]:g[R]=0,se=G+R;I<=se&&se<D&&(g[R]=G+1)}g[_.previousIndex]=I-D}}y!==b&&a(_,y,b)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!ip(a))throw new De(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,_,l=this._itHead,u=!1;if(Array.isArray(a)){this.length=a.length;for(let y=0;y<this.length;y++)g=a[y],_=this._trackByFn(y,g),null!==l&&Object.is(l.trackById,_)?(u&&(l=this._verifyReinsertion(l,g,_,y)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,_,y),u=!0),l=l._next}else f=0,function JP(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[Kl()]();let u;for(;!(u=l.next()).done;)a(u.value)}}(a,y=>{_=this._trackByFn(f,y),null!==l&&Object.is(l.trackById,_)?(u&&(l=this._verifyReinsertion(l,y,_,f)),Object.is(l.item,y)||this._addIdentityChange(l,y)):(l=this._mismatch(l,y,_,f),u=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,u,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(u,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new CA(l,u),g,f),a}_verifyReinsertion(a,l,u,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,u),this._addToMoves(a,u),a}_moveAfter(a,l,u){return this._unlink(a),this._insertAfter(a,l,u),this._addToMoves(a,u),a}_addAfter(a,l,u){return this._insertAfter(a,l,u),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,u){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new Md),this._linkedRecords.put(a),a.currentIndex=u,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,u=a._next;return null===l?this._itHead=u:l._next=u,null===u?this._itTail=l:u._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Md),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class CA{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DA{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===l||l<=u.currentIndex)&&Object.is(u.trackById,a))return u;return null}remove(a){const l=a._prevDup,u=a._nextDup;return null===l?this._head=u:l._nextDup=u,null===u?this._tail=l:u._prevDup=l,null===this._head}}class Md{constructor(){this.map=new Map}put(a){const l=a.trackById;let u=this.map.get(l);u||(u=new DA,this.map.set(l,u)),u.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function TA(o,a,l){const u=o.previousIndex;if(null===u)return u;let f=0;return l&&u<l.length&&(f=l[u]),u+a+f}class $y{constructor(){}supports(a){return a instanceof Map||Ww(a)}create(){return new ua}}class ua{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Ww(a)))throw new De(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(u,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,u),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,u);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let u=l;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const u=a._prev;return l._next=a,l._prev=u,a._prev=l,u&&(u._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,_=f._next;return g&&(g._next=_),_&&(_._prev=g),f._next=null,f._prev=null,f}const u=new IA(a);return this._records.set(a,u),u.currentValue=l,this._addToAdditions(u),u}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(u=>l(a[u],u))}}class IA{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xd(){return new YC([new KC])}let YC=(()=>{class o{constructor(l){this.factories=l}static create(l,u){if(null!=u){const f=u.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:u=>o.create(l,u||xd()),deps:[[o,new vu,new Ha]]}}find(l){const u=this.factories.find(f=>f.supports(l));if(null!=u)return u;throw new De(901,"")}}return o.\u0275prov=Bn({token:o,providedIn:"root",factory:xd}),o})();function SA(){return new Wy([new $y])}let Wy=(()=>{class o{constructor(l){this.factories=l}static create(l,u){if(u){const f=u.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:u=>o.create(l,u||SA()),deps:[[o,new vu,new Ha]]}}find(l){const u=this.factories.find(g=>g.supports(l));if(u)return u;throw new De(901,"")}}return o.\u0275prov=Bn({token:o,providedIn:"root",factory:SA}),o})();const QC=Ay(null,"core",[]);let zy=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(mn(xy))},o.\u0275mod=uo({type:o}),o.\u0275inj=$i({}),o})()},9681:(ze,ue,M)=>{M.r(ue),M.d(ue,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>Gc,_DEFAULT_ENTRY_NAME:()=>Ve,_addComponent:()=>Dt,_addOrOverwriteComponent:()=>jt,_apps:()=>gt,_clearComponents:()=>kt,_components:()=>Ut,_getProvider:()=>bt,_registerComponent:()=>fn,_removeServiceInstance:()=>Ht,deleteApp:()=>os,getApp:()=>Di,getApps:()=>$i,initializeApp:()=>Bn,onLog:()=>Ti,registerVersion:()=>bn,setLogLevel:()=>ao});var d=M(5861),K=M(4859),$=M(1877),te=M(2090),X=M(8766);class ye{constructor(j){this.container=j}getPlatformInfoString(){return this.container.getProviders().map(Ee=>{if(function oe(P){const j=P.getComponent();return"VERSION"===(null==j?void 0:j.type)}(Ee)){const qe=Ee.getImmediate();return`${qe.library}/${qe.version}`}return null}).filter(Ee=>Ee).join(" ")}}const pe="@firebase/app",L=new $.Yd("@firebase/app"),Ve="[DEFAULT]",He={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gt=new Map,Ut=new Map;function Dt(P,j){try{P.container.addComponent(j)}catch(Ee){L.debug(`Component ${j.name} failed to register with FirebaseApp ${P.name}`,Ee)}}function jt(P,j){P.container.addOrOverwriteComponent(j)}function fn(P){const j=P.name;if(Ut.has(j))return L.debug(`There were multiple attempts to register component ${j}.`),!1;Ut.set(j,P);for(const Ee of gt.values())Dt(Ee,P);return!0}function bt(P,j){const Ee=P.container.getProvider("heartbeat").getImmediate({optional:!0});return Ee&&Ee.triggerHeartbeat(),P.container.getProvider(j)}function Ht(P,j,Ee=Ve){bt(P,j).clearInstance(Ee)}function kt(){Ut.clear()}const Sn=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ea{constructor(j,Ee,qe){this._isDeleted=!1,this._options=Object.assign({},j),this._config=Object.assign({},Ee),this._name=Ee.name,this._automaticDataCollectionEnabled=Ee.automaticDataCollectionEnabled,this._container=qe,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(j){this.checkDestroyed(),this._automaticDataCollectionEnabled=j}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(j){this._isDeleted=j}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const Gc="9.8.2";function Bn(P,j={}){"object"!=typeof j&&(j={name:j});const Ee=Object.assign({name:Ve,automaticDataCollectionEnabled:!1},j),qe=Ee.name;if("string"!=typeof qe||!qe)throw Sn.create("bad-app-name",{appName:String(qe)});const ot=gt.get(qe);if(ot){if((0,te.vZ)(P,ot.options)&&(0,te.vZ)(Ee,ot.config))return ot;throw Sn.create("duplicate-app",{appName:qe})}const $e=new K.H0(qe);for(const mt of Ut.values())$e.addComponent(mt);const Yt=new Ea(P,Ee,$e);return gt.set(qe,Yt),Yt}function Di(P=Ve){const j=gt.get(P);if(!j)throw Sn.create("no-app",{appName:P});return j}function $i(){return Array.from(gt.values())}function os(P){return as.apply(this,arguments)}function as(){return(as=(0,d.Z)(function*(P){const j=P.name;gt.has(j)&&(gt.delete(j),yield Promise.all(P.container.getProviders().map(Ee=>Ee.delete())),P.isDeleted=!0)})).apply(this,arguments)}function bn(P,j,Ee){var qe;let ot=null!==(qe=He[P])&&void 0!==qe?qe:P;Ee&&(ot+=`-${Ee}`);const $e=ot.match(/\s|\//),Yt=j.match(/\s|\//);if($e||Yt){const mt=[`Unable to register library "${ot}" with version "${j}":`];return $e&&mt.push(`library name "${ot}" contains illegal characters (whitespace or "/")`),$e&&Yt&&mt.push("and"),Yt&&mt.push(`version name "${j}" contains illegal characters (whitespace or "/")`),void L.warn(mt.join(" "))}fn(new K.wA(`${ot}-version`,()=>({library:ot,version:j}),"VERSION"))}function Ti(P,j){if(null!==P&&"function"!=typeof P)throw Sn.create("invalid-log-argument");(0,$.Am)(P,j)}function ao(P){(0,$.Ub)(P)}const Ii="firebase-heartbeat-store";let ci=null;function it(){return ci||(ci=(0,X.X3)("firebase-heartbeat-database",1,{upgrade:(P,j)=>{0===j&&P.createObjectStore(Ii)}}).catch(P=>{throw Sn.create("storage-open",{originalErrorMessage:P.message})})),ci}function Xe(){return(Xe=(0,d.Z)(function*(P){try{return(yield it()).transaction(Ii).objectStore(Ii).get(Wi(P))}catch(j){throw Sn.create("storage-get",{originalErrorMessage:j.message})}})).apply(this,arguments)}function et(P,j){return As.apply(this,arguments)}function As(){return(As=(0,d.Z)(function*(P,j){try{const qe=(yield it()).transaction(Ii,"readwrite");return yield qe.objectStore(Ii).put(j,Wi(P)),qe.done}catch(Ee){throw Sn.create("storage-set",{originalErrorMessage:Ee.message})}})).apply(this,arguments)}function Wi(P){return`${P.name}!${P.options.appId}`}class Dr{constructor(j){this.container=j,this._heartbeatsCache=null;const Ee=this.container.getProvider("app").getImmediate();this._storage=new V(Ee),this._heartbeatsCachePromise=this._storage.read().then(qe=>(this._heartbeatsCache=qe,qe))}triggerHeartbeat(){var j=this;return(0,d.Z)(function*(){const qe=j.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ot=Ca();if(null===j._heartbeatsCache&&(j._heartbeatsCache=yield j._heartbeatsCachePromise),j._heartbeatsCache.lastSentHeartbeatDate!==ot&&!j._heartbeatsCache.heartbeats.some($e=>$e.date===ot))return j._heartbeatsCache.heartbeats.push({date:ot,agent:qe}),j._heartbeatsCache.heartbeats=j._heartbeatsCache.heartbeats.filter($e=>{const Yt=new Date($e.date).valueOf();return Date.now()-Yt<=2592e6}),j._storage.overwrite(j._heartbeatsCache)})()}getHeartbeatsHeader(){var j=this;return(0,d.Z)(function*(){if(null===j._heartbeatsCache&&(yield j._heartbeatsCachePromise),null===j._heartbeatsCache||0===j._heartbeatsCache.heartbeats.length)return"";const Ee=Ca(),{heartbeatsToSend:qe,unsentEntries:ot}=function k(P,j=1024){const Ee=[];let qe=P.slice();for(const ot of P){const $e=Ee.find(Yt=>Yt.agent===ot.agent);if($e){if($e.dates.push(ot.date),U(Ee)>j){$e.dates.pop();break}}else if(Ee.push({agent:ot.agent,dates:[ot.date]}),U(Ee)>j){Ee.pop();break}qe=qe.slice(1)}return{heartbeatsToSend:Ee,unsentEntries:qe}}(j._heartbeatsCache.heartbeats),$e=(0,te.L)(JSON.stringify({version:2,heartbeats:qe}));return j._heartbeatsCache.lastSentHeartbeatDate=Ee,ot.length>0?(j._heartbeatsCache.heartbeats=ot,yield j._storage.overwrite(j._heartbeatsCache)):(j._heartbeatsCache.heartbeats=[],j._storage.overwrite(j._heartbeatsCache)),$e})()}}function Ca(){return(new Date).toISOString().substring(0,10)}class V{constructor(j){this.app=j,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var j=this;return(0,d.Z)(function*(){return(yield j._canUseIndexedDBPromise)&&(yield function tn(P){return Xe.apply(this,arguments)}(j.app))||{heartbeats:[]}})()}overwrite(j){var Ee=this;return(0,d.Z)(function*(){var qe;if(yield Ee._canUseIndexedDBPromise){const $e=yield Ee.read();return et(Ee.app,{lastSentHeartbeatDate:null!==(qe=j.lastSentHeartbeatDate)&&void 0!==qe?qe:$e.lastSentHeartbeatDate,heartbeats:j.heartbeats})}})()}add(j){var Ee=this;return(0,d.Z)(function*(){var qe;if(yield Ee._canUseIndexedDBPromise){const $e=yield Ee.read();return et(Ee.app,{lastSentHeartbeatDate:null!==(qe=j.lastSentHeartbeatDate)&&void 0!==qe?qe:$e.lastSentHeartbeatDate,heartbeats:[...$e.heartbeats,...j.heartbeats]})}})()}}function U(P){return(0,te.L)(JSON.stringify({version:2,heartbeats:P})).length}!function he(P){fn(new K.wA("platform-logger",j=>new ye(j),"PRIVATE")),fn(new K.wA("heartbeat",j=>new Dr(j),"PRIVATE")),bn(pe,"0.7.25",P),bn(pe,"0.7.25","esm2017"),bn("fire-js","")}("")},4859:(ze,ue,M)=>{M.d(ue,{H0:()=>pe,wA:()=>$});var d=M(5861),K=M(2090);class ${constructor(L,F,de){this.name=L,this.instanceFactory=F,this.type=de,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const te="[DEFAULT]";class X{constructor(L,F){this.name=L,this.container=F,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const F=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(F)){const de=new K.BH;if(this.instancesDeferred.set(F,de),this.isInitialized(F)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:F});je&&de.resolve(je)}catch(je){}}return this.instancesDeferred.get(F).promise}getImmediate(L){var F;const de=this.normalizeInstanceIdentifier(null==L?void 0:L.identifier),je=null!==(F=null==L?void 0:L.optional)&&void 0!==F&&F;if(!this.isInitialized(de)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:de})}catch(_e){if(je)return null;throw _e}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if(function oe(le){return"EAGER"===le.instantiationMode}(L))try{this.getOrInitializeService({instanceIdentifier:te})}catch(F){}for(const[F,de]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(F);try{const _e=this.getOrInitializeService({instanceIdentifier:je});de.resolve(_e)}catch(_e){}}}}clearInstance(L=te){this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}delete(){var L=this;return(0,d.Z)(function*(){const F=Array.from(L.instances.values());yield Promise.all([...F.filter(de=>"INTERNAL"in de).map(de=>de.INTERNAL.delete()),...F.filter(de=>"_delete"in de).map(de=>de._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(L=te){return this.instances.has(L)}getOptions(L=te){return this.instancesOptions.get(L)||{}}initialize(L={}){const{options:F={}}=L,de=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(de))throw Error(`${this.name}(${de}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:de,options:F});for(const[_e,Me]of this.instancesDeferred.entries())de===this.normalizeInstanceIdentifier(_e)&&Me.resolve(je);return je}onInit(L,F){var de;const je=this.normalizeInstanceIdentifier(F),_e=null!==(de=this.onInitCallbacks.get(je))&&void 0!==de?de:new Set;_e.add(L),this.onInitCallbacks.set(je,_e);const Me=this.instances.get(je);return Me&&L(Me,je),()=>{_e.delete(L)}}invokeOnInitCallbacks(L,F){const de=this.onInitCallbacks.get(F);if(de)for(const je of de)try{je(L,F)}catch(_e){}}getOrInitializeService({instanceIdentifier:L,options:F={}}){let de=this.instances.get(L);if(!de&&this.component&&(de=this.component.instanceFactory(this.container,{instanceIdentifier:(le=L,le===te?void 0:le),options:F}),this.instances.set(L,de),this.instancesOptions.set(L,F),this.invokeOnInitCallbacks(de,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,de)}catch(je){}var le;return de||null}normalizeInstanceIdentifier(L=te){return this.component?this.component.multipleInstances?L:te:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(L){this.name=L,this.providers=new Map}addComponent(L){const F=this.getProvider(L.name);if(F.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);F.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const F=new X(L,this);return this.providers.set(L,F),F}getProviders(){return Array.from(this.providers.values())}}},1877:(ze,ue,M)=>{M.d(ue,{Am:()=>le,Ub:()=>pe,Yd:()=>oe,in:()=>K});const d=[];var K=(()=>{return(L=K||(K={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",K;var L})();const $={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},te=K.INFO,X={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},ye=(L,F,...de)=>{if(F<L.logLevel)return;const je=(new Date).toISOString(),_e=X[F];if(!_e)throw new Error(`Attempted to log a message with an invalid logType (value: ${F})`);console[_e](`[${je}]  ${L.name}:`,...de)};class oe{constructor(F){this.name=F,this._logLevel=te,this._logHandler=ye,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(F){if(!(F in K))throw new TypeError(`Invalid value "${F}" assigned to \`logLevel\``);this._logLevel=F}setLogLevel(F){this._logLevel="string"==typeof F?$[F]:F}get logHandler(){return this._logHandler}set logHandler(F){if("function"!=typeof F)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=F}get userLogHandler(){return this._userLogHandler}set userLogHandler(F){this._userLogHandler=F}debug(...F){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...F),this._logHandler(this,K.DEBUG,...F)}log(...F){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...F),this._logHandler(this,K.VERBOSE,...F)}info(...F){this._userLogHandler&&this._userLogHandler(this,K.INFO,...F),this._logHandler(this,K.INFO,...F)}warn(...F){this._userLogHandler&&this._userLogHandler(this,K.WARN,...F),this._logHandler(this,K.WARN,...F)}error(...F){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...F),this._logHandler(this,K.ERROR,...F)}}function pe(L){d.forEach(F=>{F.setLogLevel(L)})}function le(L,F){for(const de of d){let je=null;F&&F.level&&(je=$[F.level]),de.userLogHandler=null===L?null:(_e,Me,...We)=>{const xe=We.map(tt=>{if(null==tt)return null;if("string"==typeof tt)return tt;if("number"==typeof tt||"boolean"==typeof tt)return tt.toString();if(tt instanceof Error)return tt.message;try{return JSON.stringify(tt)}catch(at){return null}}).filter(tt=>tt).join(" ");Me>=(null!=je?je:_e.logLevel)&&L({level:K[Me].toLowerCase(),message:xe,args:We,type:_e.name})}}}},8766:(ze,ue,M)=>{M.d(ue,{Lj:()=>fe,X3:()=>Mt});var d=M(5861);let $,te;const oe=new WeakMap,pe=new WeakMap,le=new WeakMap,L=new WeakMap,F=new WeakMap;let _e={get(Z,me,H){if(Z instanceof IDBTransaction){if("done"===me)return pe.get(Z);if("objectStoreNames"===me)return Z.objectStoreNames||le.get(Z);if("store"===me)return H.objectStoreNames[1]?void 0:H.objectStore(H.objectStoreNames[0])}return tt(Z[me])},set:(Z,me,H)=>(Z[me]=H,!0),has:(Z,me)=>Z instanceof IDBTransaction&&("done"===me||"store"===me)||me in Z};function xe(Z){return"function"==typeof Z?function We(Z){return Z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Z)?function(...me){return Z.apply(at(this),me),tt(oe.get(this))}:function(...me){return tt(Z.apply(at(this),me))}:function(me,...H){const ee=Z.call(at(this),me,...H);return le.set(ee,me.sort?me.sort():[me]),tt(ee)}}(Z):(Z instanceof IDBTransaction&&function je(Z){if(pe.has(Z))return;const me=new Promise((H,ee)=>{const J=()=>{Z.removeEventListener("complete",ie),Z.removeEventListener("error",Y),Z.removeEventListener("abort",Y)},ie=()=>{H(),J()},Y=()=>{ee(Z.error||new DOMException("AbortError","AbortError")),J()};Z.addEventListener("complete",ie),Z.addEventListener("error",Y),Z.addEventListener("abort",Y)});pe.set(Z,me)}(Z),((Z,me)=>me.some(H=>Z instanceof H))(Z,function X(){return $||($=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Z,_e):Z)}function tt(Z){if(Z instanceof IDBRequest)return function de(Z){const me=new Promise((H,ee)=>{const J=()=>{Z.removeEventListener("success",ie),Z.removeEventListener("error",Y)},ie=()=>{H(tt(Z.result)),J()},Y=()=>{ee(Z.error),J()};Z.addEventListener("success",ie),Z.addEventListener("error",Y)});return me.then(H=>{H instanceof IDBCursor&&oe.set(H,Z)}).catch(()=>{}),F.set(me,Z),me}(Z);if(L.has(Z))return L.get(Z);const me=xe(Z);return me!==Z&&(L.set(Z,me),F.set(me,Z)),me}const at=Z=>F.get(Z);function Mt(Z,me,{blocked:H,upgrade:ee,blocking:J,terminated:ie}={}){const Y=indexedDB.open(Z,me),Te=tt(Y);return ee&&Y.addEventListener("upgradeneeded",ve=>{ee(tt(Y.result),ve.oldVersion,ve.newVersion,tt(Y.transaction))}),H&&Y.addEventListener("blocked",()=>H()),Te.then(ve=>{ie&&ve.addEventListener("close",()=>ie()),J&&ve.addEventListener("versionchange",()=>J())}).catch(()=>{}),Te}function fe(Z,{blocked:me}={}){const H=indexedDB.deleteDatabase(Z);return me&&H.addEventListener("blocked",()=>me()),tt(H).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],Ne=["put","add","delete","clear"],De=new Map;function vt(Z,me){if(!(Z instanceof IDBDatabase)||me in Z||"string"!=typeof me)return;if(De.get(me))return De.get(me);const H=me.replace(/FromIndex$/,""),ee=me!==H,J=Ne.includes(H);if(!(H in(ee?IDBIndex:IDBObjectStore).prototype)||!J&&!Ie.includes(H))return;const ie=function(){var Y=(0,d.Z)(function*(Te,...ve){const Fe=this.transaction(Te,J?"readwrite":"readonly");let Ve=Fe.store;return ee&&(Ve=Ve.index(ve.shift())),(yield Promise.all([Ve[H](...ve),J&&Fe.done]))[0]});return function(ve){return Y.apply(this,arguments)}}();return De.set(me,ie),ie}!function Me(Z){_e=Z(_e)}(Z=>T$(D$({},Z),{get:(me,H,ee)=>vt(me,H)||Z.get(me,H,ee),has:(me,H)=>!!vt(me,H)||Z.has(me,H)}))},5861:(ze,ue,M)=>{function d($,te,X,ye,oe,pe,le){try{var L=$[pe](le),F=L.value}catch(de){return void X(de)}L.done?te(F):Promise.resolve(F).then(ye,oe)}function K($){return function(){var te=this,X=arguments;return new Promise(function(ye,oe){var pe=$.apply(te,X);function le(F){d(pe,ye,oe,le,L,"next",F)}function L(F){d(pe,ye,oe,le,L,"throw",F)}le(void 0)})}}M.d(ue,{Z:()=>K})}},ze=>{ze(ze.s=8426)}]);